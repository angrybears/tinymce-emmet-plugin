window.CodeMirror=function(){"use strict";function e(i,o){if(!(this instanceof e))return new e(i,o);this.options=o=o||{};for(var s in ei)!o.hasOwnProperty(s)&&ei.hasOwnProperty(s)&&(o[s]=ei[s]);f(o);var u=this.display=t(i);u.wrapper.CodeMirror=this,a(this),o.autofocus&&!Un&&Q(this),this.view=r(new Ar([new Nr([mr("",null,_(u))])])),this.nextOpId=0,n(this),l(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),this.setValue(o.value||""),On&&setTimeout(on(J,this,!0),20),this.view.history=Ir(),tt(this);var c;try{c=document.activeElement==u.input}catch(h){}c||o.autofocus&&!Un?setTimeout(on(mt,this),20):yt(this),Y(this,function(){for(var e in Qn)Qn.propertyIsEnumerable(e)&&Qn[e](this,o[e],ti);for(var t=0;oi.length>t;++t)oi[t](this)})()}function t(e){var t={},r=t.input=an("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),t.inputDiv=an("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),t.scrollbarH=an("div",[an("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),t.scrollbarV=an("div",[an("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),t.scrollbarFiller=an("div",null,"CodeMirror-scrollbar-filler"),t.lineDiv=an("div"),t.selectionDiv=an("div",null,null,"position: relative; z-index: 1"),t.cursor=an("pre"," ","CodeMirror-cursor"),t.otherCursor=an("pre"," ","CodeMirror-cursor CodeMirror-secondarycursor"),t.measure=an("div",null,"CodeMirror-measure"),t.lineSpace=an("div",[t.measure,t.selectionDiv,t.lineDiv,t.cursor,t.otherCursor],null,"position: relative; outline: none"),t.mover=an("div",[an("div",[t.lineSpace],"CodeMirror-lines")],null,"position: relative"),t.sizer=an("div",[t.mover],"CodeMirror-sizer"),t.heightForcer=an("div"," ",null,"position: absolute; height: "+ci+"px"),t.gutters=an("div",null,"CodeMirror-gutters"),t.lineGutter=null;var n=an("div",[t.sizer,t.heightForcer,t.gutters],null,"position: relative; min-height: 100%");return t.scroller=an("div",[n],"CodeMirror-scroll"),t.scroller.setAttribute("tabIndex","-1"),t.wrapper=an("div",[t.inputDiv,t.scrollbarH,t.scrollbarV,t.scrollbarFiller,t.scroller],"CodeMirror"),Dn&&(t.gutters.style.zIndex=-1,t.scroller.style.paddingRight=0),e.appendChild?e.appendChild(t.wrapper):e(t.wrapper),_n&&(r.style.width="0px"),En||(t.scroller.draggable=!0),Pn?(t.inputDiv.style.height="1px",t.inputDiv.style.position="absolute"):Dn&&(t.scrollbarH.style.minWidth=t.scrollbarV.style.minWidth="18px"),t.viewOffset=t.showingFrom=t.showingTo=t.lastSizeC=0,t.lineNumWidth=t.lineNumInnerWidth=t.lineNumChars=null,t.prevInput="",t.alignWidgets=!1,t.pollingFast=!1,t.poll=new $r,t.draggingText=!1,t.cachedCharWidth=t.cachedTextHeight=null,t.measureLineCache=[],t.measureLineCachePos=0,t.inaccurateSelection=!1,t.pasteIncoming=!1,t}function r(e){var t={line:0,ch:0};return{doc:e,frontier:0,highlight:new $r,sel:{from:t,to:t,head:t,anchor:t,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:Wr(e,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[]}}function n(t){var r=t.view.doc;t.view.mode=e.getMode(t.options,t.options.mode),r.iter(0,r.size,function(e){e.stateAfter=null}),t.view.frontier=0,N(t,100)}function i(e){var t=e.view.doc,r=_(e.display);if(e.options.lineWrapping){e.display.wrapper.className+=" CodeMirror-wrap";var n=e.display.scroller.clientWidth/U(e.display)-3;t.iter(0,t.size,function(e){if(0!=e.height){var t=Math.ceil(e.text.length/n)||1;1!=t&&Or(e,t*r)}}),e.display.sizer.style.minWidth=""}else e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),c(e.view),t.iter(0,t.size,function(e){0!=e.height&&Or(e,r)});X(e,0,t.size),F(e),setTimeout(function(){h(e.display,e.view.doc.height)},100)}function o(e){var t=si[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),F(e)}function s(e){a(e),y(e,!0)}function a(e){var t=e.display.gutters,r=e.options.gutters;un(t);for(var n=0;r.length>n;++n){var i=r[n],o=t.appendChild(an("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none"}function u(e,t){if(0==t.height)return 0;for(var r,n=t.text.length,i=t;r=sr(i);){var o=r.find();i=Wr(e,o.from.line),n+=o.from.ch-o.to.ch}for(i=t;r=ar(i);){var o=r.find();n-=i.text.length-o.from.ch,i=Wr(e,o.to.line),n+=i.text.length-o.to.ch}return n}function c(e){e.maxLine=Wr(e.doc,0),e.maxLineLength=u(e.doc,e.maxLine),e.maxLineChanged=!0,e.doc.iter(1,e.doc.size,function(t){var r=u(e.doc,t);r>e.maxLineLength&&(e.maxLineLength=r,e.maxLine=t)})}function f(e){for(var t=!1,r=0;e.gutters.length>r;++r)"CodeMirror-linenumbers"==e.gutters[r]&&(e.lineNumbers?t=!0:e.gutters.splice(r--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function h(e,t){var r=t+2*D(e);e.sizer.style.minHeight=e.heightForcer.style.top=r+"px";var n=Math.max(r,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,o=n>e.scroller.clientHeight;o?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?hn(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=o?hn(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&o?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=hn(e.measure)+"px"):e.scrollbarFiller.style.display="",Bn&&0===hn(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=Vn?"18px":"12px")}function d(e,t,r){var n=e.scroller.scrollTop,i=e.wrapper.clientHeight;"number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-D(e));var o=Math.ceil(n+i);return{from:Hr(t,n),to:Hr(t,o)}}function p(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild){for(var r=m(t)-t.scroller.scrollLeft+e.view.scrollLeft,n=t.gutters.offsetWidth,i=r+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;s.length>l;++l)s[l].style.left=i;t.gutters.style.left=r+n+"px"}}function v(e){if(!e.options.lineNumbers)return!1;var t=e.view.doc,r=g(e.options,t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(an("div",[an("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1}function g(e,t){return e.lineNumberFormatter(t+e.firstLineNumber)+""}function m(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function y(e,t,r){var n=e.display.showingFrom,i=e.display.showingTo,o=w(e,t,r);return o&&(qr(e,e,"update",e),(e.display.showingFrom!=n||e.display.showingTo!=i)&&qr(e,e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),k(e),h(e.display,e.view.doc.height),o}function w(e,t,r){var n=e.display,i=e.view.doc;if(!n.wrapper.clientWidth)return n.showingFrom=n.showingTo=n.viewOffset=0,void 0;var o=d(n,i,r);if(!(t!==!0&&0==t.length&&o.from>n.showingFrom&&o.to<n.showingTo)){if(t&&v(e)&&(t=!0),n.sizer.style.marginLeft=n.scrollbarH.style.left=n.gutters.offsetWidth+"px",t!==!0&&Yn)for(var l=0;t.length>l;++l)for(var s,a=t[l];s=sr(Wr(i,a.from));){var u=s.find().from.line;a.diff&&(a.diff-=a.from-u),a.from=u}var c=t===!0?0:1/0;if(e.options.lineNumbers&&t&&t!==!0)for(var l=0;t.length>l;++l)if(t[l].diff){c=t[l].from;break}var u=Math.max(o.from-e.options.viewportMargin,0),f=Math.min(i.size,o.to+e.options.viewportMargin);if(u>n.showingFrom&&20>u-n.showingFrom&&(u=n.showingFrom),n.showingTo>f&&20>n.showingTo-f&&(f=Math.min(i.size,n.showingTo)),Yn)for(u=Dr(ur(i,Wr(i,u)));i.size>f&&cr(Wr(i,f));)++f;for(var h=t===!0?[]:b([{from:n.showingFrom,to:n.showingTo}],t),p=0,l=0;h.length>l;++l){var g=h[l];u>g.from&&(g.from=u),g.to>f&&(g.to=f),g.from>=g.to?h.splice(l--,1):p+=g.to-g.from}if(p!=f-u||u!=n.showingFrom||f!=n.showingTo){h.sort(function(e,t){return e.from-t.from}),.7*(f-u)>p&&(n.lineDiv.style.display="none"),C(e,u,f,h,c),n.lineDiv.style.display="";var m=u!=n.showingFrom||f!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight;m&&(n.lastSizeC=n.wrapper.clientHeight),n.showingFrom=u,n.showingTo=f,N(e,100);for(var y,w=n.lineDiv.offsetTop,x=n.lineDiv.firstChild;x;x=x.nextSibling)if(x.lineObj){if(Dn){var L=x.offsetTop+x.offsetHeight;y=L-w,w=L}else{var k=x.getBoundingClientRect();y=k.bottom-k.top}var M=x.lineObj.height-y;2>y&&(y=_(n)),(M>.001||-.001>M)&&Or(x.lineObj,y)}return n.viewOffset=Er(e,Wr(i,u)),n.mover.style.top=n.viewOffset+"px",!0}}}function b(e,t){for(var r=0,n=t.length||0;n>r;++r){for(var i=t[r],o=[],l=i.diff||0,s=0,a=e.length;a>s;++s){var u=e[s];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l}))}e=o}return e}function x(e){for(var t=e.display,r={},n={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[e.options.gutters[o]]=i.offsetLeft,n[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:m(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function C(e,t,r,n,i){function o(t){var r=t.nextSibling;return En&&Gn&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):u.removeChild(t),r}var l=x(e),s=e.display,a=e.options.lineNumbers;n.length||On||En&&e.display.currentWheelTarget||un(s.lineDiv);var u=s.lineDiv,c=u.firstChild,f=n.shift(),h=t;for(e.view.doc.iter(t,r,function(t){if(f&&f.to==h&&(f=n.shift()),cr(t))0!=t.height&&Or(t,0);else if(f&&h>=f.from&&f.to>h){for(;c.lineObj!=t;)c=o(c);a&&h>=i&&c.lineNumber&&fn(c.lineNumber,g(e.options,h)),c=c.nextSibling}else{var r=L(e,t,h,l);u.insertBefore(r,c),r.lineObj=t}++h});c;)c=o(c)}function L(e,t,r,n){var i=Lr(e,t),o=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||o||t.bgClass||t.wrapClass||t.widgets&&t.widgets.length))return i;var s=an("div",null,t.wrapClass,"position: relative");if(e.options.lineNumbers||o){var a=s.appendChild(an("div",null,null,"position: absolute; left: "+n.fixedPos+"px"));if(s.alignable=[a],!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(s.lineNumber=a.appendChild(an("div",g(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),o)for(var u=0;e.options.gutters.length>u;++u){var c=e.options.gutters[u],f=o.hasOwnProperty(c)&&o[c];f&&a.appendChild(an("div",[f],"CodeMirror-gutter-elt","left: "+n.gutterLeft[c]+"px; width: "+n.gutterWidth[c]+"px"))}}if(t.bgClass&&s.appendChild(an("div"," ",t.bgClass+" CodeMirror-linebackground")),s.appendChild(i),t.widgets)for(var h=0,d=t.widgets;d.length>h;++h){var p=d[h],v=an("div",[p.node],"CodeMirror-linewidget");if(v.widget=p,p.noHScroll){(s.alignable||(s.alignable=[])).push(v);var m=n.wrapperWidth;v.style.left=n.fixedPos+"px",p.coverGutter||(m-=n.gutterTotalWidth,v.style.paddingLeft=n.gutterTotalWidth+"px"),v.style.width=m+"px"}p.coverGutter&&(v.style.zIndex=5,v.style.position="relative",p.noHScroll||(v.style.marginLeft=-n.gutterTotalWidth+"px")),p.above?s.insertBefore(v,e.options.lineNumbers&&0!=t.height?a:i):s.appendChild(v)}return Dn&&(s.style.zIndex=2),s}function k(e){var t=e.display,r=Mt(e.view.sel.from,e.view.sel.to);r||e.options.showCursorWhenSelecting?M(e):t.cursor.style.display=t.otherCursor.style.display="none",r?t.selectionDiv.style.display="none":S(e);var n=B(e,e.view.sel.head,"div"),i=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+o.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+o.left-i.left))+"px"}function M(e){var t=e.display,r=B(e,e.view.sel.head,"div");t.cursor.style.left=r.left+"px",t.cursor.style.top=r.top+"px",t.cursor.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",t.cursor.style.display="",r.other?(t.otherCursor.style.display="",t.otherCursor.style.left=r.other.left+"px",t.otherCursor.style.top=r.other.top+"px",t.otherCursor.style.height=.85*(r.other.bottom-r.other.top)+"px"):t.otherCursor.style.display="none"}function S(e){function t(e,t,r,n){0>t&&(t=0),l.appendChild(an("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?s-e:r)+"px; height: "+(n-t)+"px"))}function r(r,n,o,l){function u(t){return P(e,{line:r,ch:t},"div",c)}var c=Wr(i,r),f=c.text.length,h=l?1/0:-1/0;return pn(zr(c),n||0,null==o?f:o,function(e,r,i){var c=u("rtl"==i?r-1:e),d=u("rtl"==i?e:r-1),p=c.left,v=d.right;d.top-c.top>3&&(t(p,c.top,null,c.bottom),p=a,c.bottom<d.top&&t(p,c.bottom,null,d.top)),null==o&&r==f&&(v=s),null==n&&0==e&&(p=a),h=l?Math.min(d.top,h):Math.max(d.bottom,h),a+1>p&&(p=a),t(p,d.top,v-p,d.bottom)}),h}var n=e.display,i=e.view.doc,o=e.view.sel,l=document.createDocumentFragment(),s=n.lineSpace.offsetWidth,a=H(e.display);if(o.from.line==o.to.line)r(o.from.line,o.from.ch,o.to.ch);else{for(var u,c,f=Wr(i,o.from.line),h=f,d=[o.from.line,o.from.ch];u=ar(h);){var p=u.find();if(d.push(p.from.ch,p.to.line,p.to.ch),p.to.line==o.to.line){d.push(o.to.ch),c=!0;break}h=Wr(i,p.to.line)}if(c)for(var v=0;d.length>v;v+=3)r(d[v],d[v+1],d[v+2]);else{var g,m,y=Wr(i,o.to.line);g=o.from.ch?r(o.from.line,o.from.ch,null,!1):Er(e,f)-n.viewOffset,m=o.to.ch?r(o.to.line,sr(y)?null:0,o.to.ch,!0):Er(e,y)-n.viewOffset,m>g&&t(a,g,null,m)}}cn(n.selectionDiv,l),n.selectionDiv.style.display=""}function T(e){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.offsetHeight&&(t.cursor.style.visibility=t.otherCursor.style.visibility=(r=!r)?"":"hidden")},e.options.cursorBlinkRate)}function N(e,t){e.view.frontier<e.display.showingTo&&e.view.highlight.set(t,on(A,e))}function A(e){var t=e.view,r=t.doc;if(!(t.frontier>=e.display.showingTo)){var n,i=+new Date+e.options.workTime,o=Gt(t.mode,O(e,t.frontier)),l=[];r.iter(t.frontier,Math.min(r.size,e.display.showingTo+500),function(r){return t.frontier>=e.display.showingFrom?(br(e,r,o)&&t.frontier>=e.display.showingFrom&&(n&&n.end==t.frontier?n.end++:l.push(n={start:t.frontier,end:t.frontier+1})),r.stateAfter=Gt(t.mode,o)):(xr(e,r,o),r.stateAfter=0==t.frontier%5?Gt(t.mode,o):null),++t.frontier,+new Date>i?(N(e,e.options.workDelay),!0):void 0}),l.length&&Y(e,function(){for(var e=0;l.length>e;++e)X(this,l[e].start,l[e].end)})()}}function W(e,t){for(var r,n,i=e.view.doc,o=t,l=t-100;o>l;--o){if(0==o)return 0;var s=Wr(i,o-1);if(s.stateAfter)return o;var a=Jr(s.text,null,e.options.tabSize);(null==n||r>a)&&(n=o-1,r=a)}return n}function O(e,t){var r=e.view,n=W(e,t),i=n&&Wr(r.doc,n-1).stateAfter;return i=i?Gt(r.mode,i):jt(r.mode),r.doc.iter(n,t,function(o){xr(e,o,i);var l=n==t-1||0==n%5||n>=r.showingFrom&&r.showingTo>n;o.stateAfter=l?Gt(r.mode,i):null,++n}),i}function D(e){return e.lineSpace.offsetTop}function H(e){var t=cn(e.measure,an("pre")).appendChild(an("span","x"));return t.offsetLeft}function E(e,t,r,n){for(var n=n||z(e,t),i=-1,o=r;;o+=i){var l=n[o];if(l)break;0>i&&0==o&&(i=1)}return{left:r>o?l.right:l.left,right:o>r?l.left:l.right,top:l.top,bottom:l.bottom}}function z(e,t){for(var r=e.display,n=e.display.measureLineCache,i=0;n.length>i;++i){var o=n[i];if(o.text==t.text&&o.markedSpans==t.markedSpans&&r.scroller.clientWidth==o.width)return o.measure}var l=I(e,t),o={text:t.text,width:r.scroller.clientWidth,markedSpans:t.markedSpans,measure:l};return 16==n.length?n[++r.measureLineCachePos%16]=o:n.push(o),l}function I(e,t){var r=e.display,n=nn(t.text.length),i=Lr(e,t,n);if(On&&!Dn&&!e.options.lineWrapping&&i.childNodes.length>100){for(var o=document.createDocumentFragment(),l=10,s=i.childNodes.length,a=0,u=Math.ceil(s/l);u>a;++a){for(var c=an("div",null,null,"display: inline-block"),f=0;l>f&&s;++f)c.appendChild(i.firstChild),--s;o.appendChild(c)}i.appendChild(o)}cn(r.measure,i);for(var h,d=r.lineDiv.getBoundingClientRect(),p=[],v=nn(t.text.length),g=i.offsetHeight,a=0;n.length>a;++a)if(h=n[a]){for(var m=h.getBoundingClientRect(),y=Math.max(0,m.top-d.top),w=Math.min(m.bottom-d.top,g),f=0;p.length>f;f+=2){var b=p[f],x=p[f+1];if(!(b>w||y>x)&&(y>=b&&x>=w||b>=y&&w>=x||Math.min(w,x)-Math.max(y,b)>=w-y>>1)){p[f]=Math.min(y,b),p[f+1]=Math.max(w,x);break}}f==p.length&&p.push(y,w),v[a]={left:m.left-d.left,right:m.right-d.left,top:f}}for(var h,a=0;v.length>a;++a)if(h=v[a]){var C=h.top;h.top=p[C],h.bottom=p[C+1]}return v}function F(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.view.maxLineChanged=!0}function R(e,t,r,n){if(t.widgets)for(var i=0;t.widgets.length>i;++i)if(t.widgets[i].above){var o=t.widgets[i].node.offsetHeight;r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Er(e,t);if("local"!=n&&(l-=e.display.viewOffset),"page"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=s.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function P(e,t,r,n){return n||(n=Wr(e.view.doc,t.line)),R(e,n,E(e,n,t.ch),r)}function B(e,t,r,n,i){function o(t,o){var l=E(e,n,t,i);return o?l.left=l.right:l.right=l.left,R(e,n,l,r)}n=n||Wr(e.view.doc,t.line),i||(i=z(e,n));var l=zr(n),s=t.ch;if(!l)return o(s);for(var a,u,c=l[0].level,f=0;l.length>f;++f){var h,d,p=l[f],v=p.level%2;if(s>p.from&&p.to>s)return o(s,v);var g=v?p.to:p.from,m=v?p.from:p.to;if(g==s)d=f&&p.level<(h=l[f-1]).level?o(h.level%2?h.from:h.to-1,!0):o(v&&p.from!=p.to?s-1:s),v==c?a=d:u=d;else if(m==s){var h=l.length-1>f&&l[f+1];if(!v&&h&&h.from==h.to)continue;d=h&&p.level<h.level?o(h.level%2?h.to-1:h.from):o(v?s:s-1,!0),v==c?a=d:u=d}}return c&&!s&&(u=o(l[0].to-1)),a?(u&&(a.other=u),a):u}function V(e,t,r){var n=e.view.doc;if(r+=e.display.viewOffset,0>r)return{line:0,ch:0,outside:!0};var i=Hr(n,r);if(i>=n.size)return{line:n.size-1,ch:Wr(n,n.size-1).text.length};for(0>t&&(t=0);;){var o=Wr(n,i),l=K(e,o,i,t,r),s=ar(o);if(!s||l.ch!=yn(o))return l;i=s.find().to.line}}function K(e,t,r,n,i){function o(n){var i=B(e,{line:r,ch:n},"line",t,u);return s=!0,l>i.bottom?Math.max(0,i.left-a):i.top>l?i.left+a:(s=!1,i.left)}var l=i-Er(e,t),s=!1,a=e.display.wrapper.clientWidth,u=z(e,t),c=zr(t),f=t.text.length,h=mn(t),d=yn(t),p=H(e.display),v=o(d);if(n>v)return{line:r,ch:d,outside:s};for(;;){if(c?d==h||d==xn(t,h,1):1>=d-h){for(var g=v-n>n-p,m=g?h:d;pi.test(t.text.charAt(m));)++m;return{line:r,ch:m,after:g,outside:s}}var y=Math.ceil(f/2),w=h+y;if(c){w=h;for(var b=0;y>b;++b)w=xn(t,w,1)}var x=o(w);x>n?(d=w,v=x,s&&(v+=1e3),f-=y):(h=w,p=x,f=y)}}function _(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ln){Ln=an("pre");for(var t=0;49>t;++t)Ln.appendChild(document.createTextNode("x")),Ln.appendChild(an("br"));Ln.appendChild(document.createTextNode("x"))}cn(e.measure,Ln);var r=Ln.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),un(e.measure),r||1}function U(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=an("span","x"),r=an("pre",[t]);cn(e.measure,r);var n=t.offsetWidth;return n>2&&(e.cachedCharWidth=n),n||10}function G(e){e.curOp?++e.curOp.depth:e.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++e.nextOpId}}function j(e){var t=e.curOp;if(!--t.depth){e.curOp=null;var r=e.view,n=e.display;if(t.updateMaxLine&&c(r),r.maxLineChanged&&!e.options.lineWrapping){var i=E(e,r.maxLine,r.maxLine.text.length).right;n.sizer.style.minWidth=i+3+ci+"px",r.maxLineChanged=!1}var o,l;if(t.selectionChanged){var s=B(e,r.sel.head);o=Rt(e,s.left,s.top,s.left,s.bottom)}(t.changes.length||o&&null!=o.scrollTop)&&(l=y(e,t.changes,o&&o.scrollTop)),!l&&t.selectionChanged&&k(e),o&&zt(e),t.selectionChanged&&T(e),r.focused&&t.updateInput&&J(e,t.userSelChange),t.textChanged&&Xr(e,"change",e,t.textChanged),t.selectionChanged&&Xr(e,"cursorActivity",e);for(var a=0;t.delayedCallbacks.length>a;++a)t.delayedCallbacks[a](e)}}function Y(e,t){return function(){var r=e||this;G(r);try{var n=t.apply(r,arguments)}finally{j(r)}return n}}function X(e,t,r,n){e.curOp.changes.push({from:t,to:r,diff:n})}function q(e){e.view.pollingFast||e.display.poll.set(e.options.pollInterval,function(){$(e),e.view.focused&&q(e)})}function Z(e){function t(){var n=$(e);n||r?(e.display.pollingFast=!1,q(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function $(e){var t=e.display.input,r=e.display.prevInput,n=e.view,i=n.sel;if(!n.focused||bi(t)||et(e))return!1;var o=t.value;if(o==r&&Mt(i.from,i.to))return!1;G(e),n.sel.shift=!1;for(var l=0,s=Math.min(r.length,o.length);s>l&&r[l]==o[l];)++l;var a=i.from,u=i.to;r.length>l?a={line:a.line,ch:a.ch-(r.length-l)}:n.overwrite&&Mt(a,u)&&!e.display.pasteIncoming&&(u={line:u.line,ch:Math.min(Wr(e.view.doc,u.line).text.length,u.ch+(o.length-l))});var c=e.curOp.updateInput;return bt(e,a,u,wi(o.slice(l)),"end",e.display.pasteIncoming?"paste":"input",{from:a,to:u}),e.curOp.updateInput=c,o.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=o,j(e),e.display.pasteIncoming=!1,!0}function J(e,t){var r,n,i=e.view;Mt(i.sel.from,i.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",r=xi&&(i.sel.to.line-i.sel.from.line>100||(n=e.getSelection()).length>1e3),e.display.input.value=r?"-":n||e.getSelection(),i.focused&&tn(e.display.input)),e.display.inaccurateSelection=r}function Q(e){"nocursor"==e.options.readOnly||!On&&document.activeElement==e.display.input||e.display.input.focus()}function et(e){return e.options.readOnly||e.view.cantEdit}function tt(e){function t(){e.view.focused&&setTimeout(on(Q,e),0)}function r(t){e.options.onDragEvent&&e.options.onDragEvent(e,Pr(t))||Kr(t)}function n(){i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=e.getSelection(),tn(i.input))}var i=e.display;jr(i.scroller,"mousedown",Y(e,it)),jr(i.scroller,"dblclick",Y(e,Br)),jr(i.lineSpace,"selectstart",function(e){rt(i,e)||Br(e)}),Wn||jr(i.scroller,"contextmenu",function(t){wt(e,t)}),jr(i.scroller,"scroll",function(){at(e,i.scroller.scrollTop),ut(e,i.scroller.scrollLeft,!0),Xr(e,"scroll",e)}),jr(i.scrollbarV,"scroll",function(){at(e,i.scrollbarV.scrollTop)}),jr(i.scrollbarH,"scroll",function(){ut(e,i.scrollbarH.scrollLeft)}),jr(i.scroller,"mousewheel",function(t){ct(e,t)}),jr(i.scroller,"DOMMouseScroll",function(t){ct(e,t)}),jr(i.scrollbarH,"mousedown",t),jr(i.scrollbarV,"mousedown",t),jr(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),jr(window,"resize",function o(){i.cachedCharWidth=i.cachedTextHeight=null,F(e),i.wrapper.parentNode?y(e,!0):Yr(window,"resize",o)}),jr(i.input,"keyup",Y(e,function(t){e.options.onKeyEvent&&e.options.onKeyEvent(e,Pr(t))||16==Gr(t,"keyCode")&&(e.view.sel.shift=!1)})),jr(i.input,"input",on(Z,e)),jr(i.input,"keydown",Y(e,vt)),jr(i.input,"keypress",Y(e,gt)),jr(i.input,"focus",on(mt,e)),jr(i.input,"blur",on(yt,e)),e.options.dragDrop&&(jr(i.scroller,"dragstart",function(t){st(e,t)}),jr(i.scroller,"dragenter",r),jr(i.scroller,"dragover",r),jr(i.scroller,"drop",Y(e,ot))),jr(i.scroller,"paste",function(){Q(e),Z(e)}),jr(i.input,"paste",function(){i.pasteIncoming=!0,Z(e)}),jr(i.input,"cut",n),jr(i.input,"copy",n),Pn&&jr(i.sizer,"mouseup",function(){document.activeElement==i.input&&i.input.blur(),Q(e)})}function rt(e,t){for(var r=_r(t);r!=e.wrapper;r=r.parentNode)if(/\bCodeMirror-(?:line)?widget\b/.test(r.className)||r.parentNode==e.sizer&&r!=e.mover)return!0}function nt(e,t,r){var n=e.display;if(!r){var i=_r(t);if(i==n.scrollbarH||i==n.scrollbarH.firstChild||i==n.scrollbarV||i==n.scrollbarV.firstChild||i==n.scrollbarFiller)return null}var o,l,s=n.lineSpace.getBoundingClientRect();try{o=t.clientX,l=t.clientY}catch(t){return null}return V(e,o-s.left,l-s.top)}function it(e){function t(e){if("single"==f)return Ot(i,At(a,u),e),void 0;if(g=At(a,g),m=At(a,m),"double"==f){var t=Kt(Wr(a,e.line).text,e);St(e,g)?Ot(i,t.from,m):Ot(i,g,t.to)}else"triple"==f&&(St(e,g)?Ot(i,m,At(a,{line:e.line,ch:0})):Ot(i,g,At(a,{line:e.line+1,ch:0})))}function r(e){var n=++w,s=nt(i,e,!0);if(s)if(Mt(s,p)){var u=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;u&&setTimeout(Y(i,function(){w==n&&(o.scroller.scrollTop+=u,r(e))}),50)}else{l.focused||mt(i),p=s,t(s);var c=d(o,a);(s.line>=c.to||s.line<c.from)&&setTimeout(Y(i,function(){w==n&&r(e)}),150)}}function n(e){w=1/0;var r=nt(i,e);r&&t(r),Br(e),Q(i),Yr(document,"mousemove",b),Yr(document,"mouseup",x)}var i=this,o=i.display,l=i.view,s=l.sel,a=l.doc;if(s.shift=Gr(e,"shiftKey"),rt(o,e))return En||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!lt(i,e)){var u=nt(i,e);switch(Ur(e)){case 3:return Wn&&wt.call(i,i,e),void 0;case 2:return u&&Ot(i,u),setTimeout(on(Q,i),20),Br(e),void 0}if(!u)return _r(e)==o.scroller&&Br(e),void 0;l.focused||mt(i);var c=+new Date,f="single";if(Mn&&Mn.time>c-400&&Mt(Mn.pos,u))f="triple",Br(e),setTimeout(on(Q,i),20),_t(i,u.line);else if(kn&&kn.time>c-400&&Mt(kn.pos,u)){f="double",Mn={time:c,pos:u},Br(e);var h=Kt(Wr(a,u.line).text,u);Ot(i,h.from,h.to)}else kn={time:c,pos:u};var p=u;if(i.options.dragDrop&&vi&&!et(i)&&!Mt(s.from,s.to)&&!St(u,s.from)&&!St(s.to,u)&&"single"==f){var v=Y(i,function(t){En&&(o.scroller.draggable=!1),l.draggingText=!1,Yr(document,"mouseup",v),Yr(o.scroller,"drop",v),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(Br(t),Ot(i,u),Q(i))});return En&&(o.scroller.draggable=!0),l.draggingText=v,o.scroller.dragDrop&&o.scroller.dragDrop(),jr(document,"mouseup",v),jr(o.scroller,"drop",v),void 0}Br(e),"single"==f&&Ot(i,At(a,u));var g=s.from,m=s.to,y=o.wrapper.getBoundingClientRect(),w=0,b=Y(i,function(e){On||Ur(e)?r(e):n(e)}),x=Y(i,n);jr(document,"mousemove",b),jr(document,"mouseup",x)}}function ot(e){var t=this;if(!t.options.onDragEvent||!t.options.onDragEvent(t,Pr(e))){Br(e);var r=nt(t,e,!0),n=e.dataTransfer.files;if(r&&!et(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=function(){o[n]=s.result,++l==i&&(r=At(t.view.doc,r),Y(t,function(){var e=kt(t,o.join(""),r,r,"paste");Dt(t,r,e)})())},s.readAsText(e)},a=0;i>a;++a)s(n[a],a);else{if(t.view.draggingText&&!St(r,t.view.sel.from)&&!St(t.view.sel.to,r))return t.view.draggingText(e),On&&setTimeout(on(Q,t),50),void 0;try{var o=e.dataTransfer.getData("Text");if(o){var u=t.view.sel.from,c=t.view.sel.to;Dt(t,r,r),t.view.draggingText&&kt(t,"",u,c,"paste"),t.replaceSelection(o,null,"paste"),Q(t),mt(t)}}catch(e){}}}}function lt(e,t){var r=e.display;try{var n=t.clientX,i=t.clientY}catch(t){return!1}if(n>=Math.floor(r.gutters.getBoundingClientRect().right))return!1;if(Br(t),!Zr(e,"gutterClick"))return!0;var o=r.lineDiv.getBoundingClientRect();if(i>o.bottom)return!0;i-=o.top-r.viewOffset;for(var l=0;e.options.gutters.length>l;++l){var s=r.gutters.childNodes[l];if(s&&s.getBoundingClientRect().right>=n){var a=Hr(e.view.doc,i),u=e.options.gutters[l];qr(e,e,"gutterClick",e,a,u,t);break}}return!0}function st(e,t){var r=e.getSelection();t.dataTransfer.setData("Text",r),t.dataTransfer.setDragImage&&!Rn&&t.dataTransfer.setDragImage(an("img"),0,0)}function at(e,t){2>Math.abs(e.view.scrollTop-t)||(e.view.scrollTop=t,Wn||y(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Wn&&y(e,[]))}function ut(e,t,r){(r?t==e.view.scrollLeft:2>Math.abs(e.view.scrollLeft-t))||(e.view.scrollLeft=t,p(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function ct(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;if(null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),n&&Gn&&En)for(var i=t.target;i!=o;i=i.parentNode)if(i.lineObj){e.display.currentWheelTarget=i;break}var o=e.display.scroller;if(r&&!Wn&&!Fn&&null!=qn)return n&&at(e,Math.max(0,Math.min(o.scrollTop+n*qn,o.scrollHeight-o.clientHeight))),ut(e,Math.max(0,Math.min(o.scrollLeft+r*qn,o.scrollWidth-o.clientWidth))),Br(t),Nn=null,void 0;if(n&&null!=qn){var l=n*qn,s=e.view.scrollTop,a=s+e.display.wrapper.clientHeight;0>l?s=Math.max(0,s+l-50):a=Math.min(e.view.doc.height,a+l+50),y(e,[],{top:s,bottom:a})}20>Xn&&(null==Nn?(Nn=o.scrollLeft,An=o.scrollTop,Sn=r,Tn=n,setTimeout(function(){if(null!=Nn){var e=o.scrollLeft-Nn,t=o.scrollTop-An,r=t&&Tn&&t/Tn||e&&Sn&&e/Sn;Nn=An=null,r&&(qn=(qn*Xn+r)/(Xn+1),++Xn)}},200)):(Sn+=r,Tn+=n))}function ft(e,t,r){if("string"==typeof t&&(t=li[t],!t))return!1;e.display.pollingFast&&$(e)&&(e.display.pollingFast=!1);var n=e.view,i=n.sel.shift;try{et(e)&&(n.suppressEdits=!0),r&&(n.sel.shift=!1),t(e)}catch(o){if(o!=fi)throw o;return!1}finally{n.sel.shift=i,n.suppressEdits=!1}return!0}function ht(e){var t=e.view.keyMaps.slice(0);return t.push(e.options.keyMap),e.options.extraKeys&&t.unshift(e.options.extraKeys),t}function dt(e,t){function r(){a=!0}var n=Yt(e.options.keyMap),i=n.auto;clearTimeout(Zn),i&&!qt(t)&&(Zn=setTimeout(function(){Yt(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var o=Ci[Gr(t,"keyCode")],l=!1,s=Gn&&(Fn||zn);if(null==o||t.altGraphKey)return!1;Gr(t,"altKey")&&(o="Alt-"+o),Gr(t,s?"metaKey":"ctrlKey")&&(o="Ctrl-"+o),Gr(t,s?"ctrlKey":"metaKey")&&(o="Cmd-"+o);var a=!1,u=ht(e);return l=Gr(t,"shiftKey")?Xt("Shift-"+o,u,function(t){return ft(e,t,!0)},r)||Xt(o,u,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?ft(e,t):void 0},r):Xt(o,u,function(t){return ft(e,t)},r),a&&(l=!1),l&&(Br(t),T(e),Hn&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),l}function pt(e,t,r){var n=Xt("'"+r+"'",ht(e),function(t){return ft(e,t,!0)});return n&&(Br(t),T(e)),n}function vt(e){var t=this;if(t.view.focused||mt(t),On&&27==e.keyCode&&(e.returnValue=!1),!t.options.onKeyEvent||!t.options.onKeyEvent(t,Pr(e))){var r=Gr(e,"keyCode");t.view.sel.shift=16==r||Gr(e,"shiftKey");var n=dt(t,e);Fn&&(Jn=n?r:null,n||88!=r||xi||!Gr(e,Gn?"metaKey":"ctrlKey")||t.replaceSelection(""))}}function gt(e){var t=this;if(!t.options.onKeyEvent||!t.options.onKeyEvent(t,Pr(e))){var r=Gr(e,"keyCode"),n=Gr(e,"charCode");if(Fn&&r==Jn)return Jn=null,Br(e),void 0;if(!(Fn&&(!e.which||10>e.which)||Pn)||!dt(t,e)){var i=String.fromCharCode(null==n?r:n);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!et(this)&&this.view.mode.electricChars.indexOf(i)>-1&&setTimeout(Y(t,function(){Pt(t,t.view.sel.to.line,"smart")}),75),pt(t,e,i)||Z(t)}}}function mt(e){"nocursor"!=e.options.readOnly&&(e.view.focused||(Xr(e,"focus",e),e.view.focused=!0,-1==e.display.scroller.className.search(/\bCodeMirror-focused\b/)&&(e.display.scroller.className+=" CodeMirror-focused"),J(e,!0)),q(e),T(e))}function yt(e){e.view.focused&&(Xr(e,"blur",e),e.view.focused=!1,e.display.scroller.className=e.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.view.focused||(e.view.sel.shift=!1)},150)}function wt(e,t){function r(){if(n.inputDiv.style.position="relative",n.input.style.cssText=s,Hn&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=l),q(e),null!=n.input.selectionStart){clearTimeout($n);
var t=n.input.value=" "+(Mt(i.from,i.to)?"":n.input.value),r=0;n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=t.length,$n=setTimeout(function o(){" "==n.prevInput&&0==n.input.selectionStart?Y(e,li.selectAll)(e):10>r++?$n=setTimeout(o,500):J(e)},200)}}var n=e.display,i=e.view.sel,o=nt(e,t),l=n.scroller.scrollTop;if(o&&!Fn){(Mt(i.from,i.to)||St(o,i.from)||!St(o,i.to))&&Y(e,Dt)(e,o,o);var s=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Q(e),J(e,!0),Mt(i.from,i.to)&&(n.input.value=n.prevInput=" "),Wn?(Kr(t),jr(window,"mouseup",function a(){Yr(window,"mouseup",a),setTimeout(r,20)})):setTimeout(r,50)}}function bt(e,t,r,n,i,o){var l=jn&&or(e.view.doc,t,r);if(!l)return xt(e,t,r,n,i,o);for(var s=l.length-1;s>=1;--s)xt(e,l[s].from,l[s].to,[""],o);return l.length?xt(e,l[0].from,l[0].to,n,i,o):void 0}function xt(e,t,r,n,i,o){if(!e.view.suppressEdits){var l=e.view,s=l.doc,a=[];s.iter(t.line,r.line+1,function(e){a.push(pr(e.text,e.markedSpans))});var u=l.sel.from,c=l.sel.to,f=ir(dr(a[0]),dr(en(a)),t.ch,r.ch,n),h=Lt(e,t,r,f,i,o);return l.history&&Fr(e,t.line,n.length,a,o,u,c,l.sel.from,l.sel.to),h}}function Ct(e,t){var r=e.view.doc,n=e.view.history,i=("undo"==t?n.done:n.undone).pop();if(i){for(var o={events:[],fromBefore:i.fromAfter,toBefore:i.toAfter,fromAfter:i.fromBefore,toAfter:i.toBefore},l=i.events.length-1;l>=0;l-=1){n.dirtyCounter+="undo"==t?-1:1;var s=i.events[l],a=[],u=s.start+s.added;r.iter(s.start,u,function(e){a.push(pr(e.text,e.markedSpans))}),o.events.push({start:s.start,added:s.old.length,old:a});var c=l?null:{from:i.fromBefore,to:i.toBefore};Lt(e,{line:s.start,ch:0},{line:u-1,ch:Wr(r,u-1).text.length},s.old,c,t)}("undo"==t?n.undone:n.done).push(o)}}function Lt(e,t,r,n,i,o){var l=e.view,s=l.doc,a=e.display;if(!l.suppressEdits){var c=r.line-t.line,f=Wr(s,t.line),h=Wr(s,r.line),d=!1,p=t.line;e.options.lineWrapping||(p=Dr(ur(s,f)),s.iter(p,r.line+1,function(e){return u(s,e)==l.maxLineLength?(d=!0,!0):void 0}));var v=en(n),g=_(a);if(0==t.ch&&0==r.ch&&""==hr(v)){for(var m=[],y=0,w=n.length-1;w>y;++y)m.push(mr(hr(n[y]),dr(n[y]),g));yr(e,h,h.text,dr(v)),c&&s.remove(t.line,c,e),m.length&&s.insert(t.line,m)}else if(f==h)if(1==n.length)yr(e,f,f.text.slice(0,t.ch)+hr(n[0])+f.text.slice(r.ch),dr(n[0]));else{for(var m=[],y=1,w=n.length-1;w>y;++y)m.push(mr(hr(n[y]),dr(n[y]),g));m.push(mr(hr(v)+f.text.slice(r.ch),dr(v),g)),yr(e,f,f.text.slice(0,t.ch)+hr(n[0]),dr(n[0])),s.insert(t.line+1,m)}else if(1==n.length)yr(e,f,f.text.slice(0,t.ch)+hr(n[0])+h.text.slice(r.ch),dr(n[0])),s.remove(t.line+1,c,e);else{var m=[];yr(e,f,f.text.slice(0,t.ch)+hr(n[0]),dr(n[0])),yr(e,h,hr(v)+h.text.slice(r.ch),dr(v));for(var y=1,w=n.length-1;w>y;++y)m.push(mr(hr(n[y]),dr(n[y]),g));c>1&&s.remove(t.line+1,c-1,e),s.insert(t.line+1,m)}if(e.options.lineWrapping){var b=Math.max(5,a.scroller.clientWidth/U(a)-3);s.iter(t.line,t.line+n.length,function(e){if(0!=e.height){var t=(Math.ceil(e.text.length/b)||1)*g;t!=e.height&&Or(e,t)}})}else s.iter(p,t.line+n.length,function(e){var t=u(s,e);t>l.maxLineLength&&(l.maxLine=e,l.maxLineLength=t,l.maxLineChanged=!0,d=!1)}),d&&(e.curOp.updateMaxLine=!0);l.frontier=Math.min(l.frontier,t.line),N(e,400);var x=n.length-c-1;if(X(e,t.line,r.line+1,x),Zr(e,"change")){for(var y=0;n.length>y;++y)"string"!=typeof n[y]&&(n[y]=n[y].text);var C={from:t,to:r,text:n,origin:o};if(e.curOp.textChanged){for(var L=e.curOp.textChanged;L.next;L=L.next);L.next=C}else e.curOp.textChanged=C}var k,M,S={line:t.line+n.length-1,ch:hr(v).length+(1==n.length?t.ch:0)};if(i&&"string"!=typeof i)i.from?(k=i.from,M=i.to):k=M=i;else if("end"==i)k=M=S;else if("start"==i)k=M=t;else if("around"==i)k=t,M=S;else{var T=function(e){if(St(e,t))return e;if(!St(r,e))return S;var n=e.line+x,i=e.ch;return e.line==r.line&&(i+=hr(v).length-(r.ch-(r.line==t.line?t.ch:0))),{line:n,ch:i}};k=T(l.sel.from),M=T(l.sel.to)}return Dt(e,k,M,null,!0),S}}function kt(e,t,r,n,i){if(n||(n=r),St(n,r)){var o=n;n=r,r=o}return bt(e,r,n,wi(t),null,i)}function Mt(e,t){return e.line==t.line&&e.ch==t.ch}function St(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Tt(e){return{line:e.line,ch:e.ch}}function Nt(e,t){return Math.max(0,Math.min(t,e.size-1))}function At(e,t){if(0>t.line)return{line:0,ch:0};if(t.line>=e.size)return{line:e.size-1,ch:Wr(e,e.size-1).text.length};var r=t.ch,n=Wr(e,t.line).text.length;return null==r||r>n?{line:t.line,ch:n}:0>r?{line:t.line,ch:0}:t}function Wt(e,t){return t>=0&&e.size>t}function Ot(e,t,r,n){var i=e.view.sel;if(i.shift||i.extend){var o=i.anchor;if(r){var l=St(t,o);l!=St(r,o)?(o=t,t=r):l!=St(t,r)&&(t=r)}Dt(e,o,t,n)}else Dt(e,t,r||t,n);e.curOp.userSelChange=!0}function Dt(e,t,r,n,i){e.view.goalColumn=null;var o=e.view.sel;if((i||!Mt(t,o.anchor))&&(t=Et(e,t,n,"push"!=i)),(i||!Mt(r,o.head))&&(r=Et(e,r,n,"push"!=i)),!Mt(o.anchor,t)||!Mt(o.head,r)){o.anchor=t,o.head=r;var l=St(r,t);o.from=l?r:t,o.to=l?t:r,e.curOp.updateInput=!0,e.curOp.selectionChanged=!0}}function Ht(e){Dt(e,e.view.sel.from,e.view.sel.to,null,"push")}function Et(e,t,r,n){var i=e.view.doc,o=!1,l=t,s=r||1;e.view.cantEdit=!1;e:for(;;){var a,u=Wr(i,l.line);if(u.markedSpans){for(var c=0;u.markedSpans.length>c;++c){var f=u.markedSpans[c],h=f.marker;if((null==f.from||(h.inclusiveLeft?f.from<=l.ch:f.from<l.ch))&&(null==f.to||(h.inclusiveRight?f.to>=l.ch:f.to>l.ch))){if(n&&h.clearOnEnter){(a||(a=[])).push(h);continue}if(!h.atomic)continue;var d=h.find()[0>s?"from":"to"];if(Mt(d,l)&&(d.ch+=s,0>d.ch?d=d.line?At(i,{line:d.line-1}):null:d.ch>u.text.length&&(d=d.line<i.size-1?{line:d.line+1,ch:0}:null),!d)){if(o)return n?(e.view.cantEdit=!0,{line:0,ch:0}):Et(e,t,r,!0);o=!0,d=t,s=-s}l=d;continue e}}if(a)for(var c=0;a.length>c;++c)a[c].clear()}return l}}function zt(e){var t=e.view,r=It(e,t.sel.head);if(t.focused){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null;if(0>r.top+i.top?o=!0:r.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Kn){var l="none"==n.cursor.style.display;l&&(n.cursor.style.display="",n.cursor.style.left=r.left+"px",n.cursor.style.top=r.top-n.viewOffset+"px"),n.cursor.scrollIntoView(o),l&&(n.cursor.style.display="none")}}}function It(e,t){for(;;){var r=!1,n=B(e,t),i=Rt(e,n.left,n.top,n.left,n.bottom),o=e.view.scrollTop,l=e.view.scrollLeft;if(null!=i.scrollTop&&(at(e,i.scrollTop),Math.abs(e.view.scrollTop-o)>1&&(r=!0)),null!=i.scrollLeft&&(ut(e,i.scrollLeft),Math.abs(e.view.scrollLeft-l)>1&&(r=!0)),!r)return n}}function Ft(e,t,r,n,i){var o=Rt(e,t,r,n,i);null!=o.scrollTop&&at(e,o.scrollTop),null!=o.scrollLeft&&ut(e,o.scrollLeft)}function Rt(e,t,r,n,i){var o=e.display,l=D(o);r+=l,i+=l;var s=o.scroller.clientHeight-ci,a=o.scroller.scrollTop,u={},c=e.view.doc.height+2*l,f=l+10>r,h=i+l>c-10;a>r?u.scrollTop=f?0:Math.max(0,r):i>a+s&&(u.scrollTop=(h?c:i)-s);var d=o.scroller.clientWidth-ci,p=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var v=o.gutters.offsetWidth,g=v+10>t;return p+v>t||g?(g&&(t=0),u.scrollLeft=Math.max(0,t-10-v)):n>d+p-3&&(u.scrollLeft=n+10-d),u}function Pt(e,t,r,n){var i=e.view.doc;if(r||(r="add"),"smart"==r)if(e.view.mode.indent)var o=O(e,t);else r="prev";var l,s=e.options.tabSize,a=Wr(i,t),u=Jr(a.text,null,s),c=a.text.match(/^\s*/)[0];if("smart"==r&&(l=e.view.mode.indent(o,a.text.slice(c.length),a.text),l==fi)){if(!n)return;r="prev"}"prev"==r?l=t?Jr(Wr(i,t-1).text,null,s):0:"add"==r?l=u+e.options.indentUnit:"subtract"==r&&(l=u-e.options.indentUnit),l=Math.max(0,l);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)h+=s,f+="	";l>h&&(f+=Qr(l-h)),f!=c&&kt(e,f,{line:t,ch:0},{line:t,ch:c.length},"input"),a.stateAfter=null}function Bt(e,t,r){var n=t,i=t,o=e.view.doc;return"number"==typeof t?i=Wr(o,Nt(o,t)):n=Dr(t),null==n?null:r(i,n)?(X(e,n,n+1),i):null}function Vt(e,t,r,n){function i(){var e=a+t;return 0>e||e==l.size?!1:(a=e,c=Wr(l,e))}function o(e){var r=(n?xn:Cn)(c,u,t,!0);if(null==r){if(e||!i())return!1;u=n?(0>t?yn:mn)(c):0>t?c.text.length:0}else u=r;return!0}var l=e.view.doc,s=e.view.sel.head,a=s.line,u=s.ch,c=Wr(l,a);if("char"==r)o();else if("column"==r)o(!0);else if("word"==r)for(var f=!1;!(0>t)||o();){if(ln(c.text.charAt(u)))f=!0;else if(f){0>t&&(t=1,o());break}if(t>0&&!o())break}return Et(e,{line:a,ch:u},t,!0)}function Kt(e,t){var r=t.ch,n=t.ch;if(e){t.after===!1||n==e.length?--r:++n;for(var i=e.charAt(r),o=ln(i)?ln:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ln(e)};r>0&&o(e.charAt(r-1));)--r;for(;e.length>n&&o(e.charAt(n));)++n}return{from:{line:t.line,ch:r},to:{line:t.line,ch:n}}}function _t(e,t){Ot(e,{line:t,ch:0},At(e.view.doc,{line:t+1,ch:0}))}function Ut(t,r,n,i){e.defaults[t]=r,n&&(Qn[t]=i?function(e,t,r){r!=ti&&n(e,t,r)}:n)}function Gt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function jt(e,t,r){return e.startState?e.startState(t,r):!0}function Yt(e){return"string"==typeof e?si[e]:e}function Xt(e,t,r,n){function i(t){t=Yt(t);var o=t[e];if(o===!1)return n&&n(),!0;if(null!=o&&r(o))return!0;if(t.nofallthrough)return n&&n(),!0;var l=t.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return i(l);for(var s=0,a=l.length;a>s;++s)if(i(l[s]))return!0;return!1}for(var o=0;t.length>o;++o)if(i(t[o]))return!0}function qt(e){var t=Ci[Gr(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Zt(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function $t(e,t){this.lines=[],this.type=t,this.cm=e}function Jt(e,t,r,n,i){var o=e.view.doc,l=new $t(e,i);if("range"==i&&!St(t,r))return l;if(n)for(var s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);l.replacedWith&&(l.collapsed=!0,l.replacedWith=an("span",[l.replacedWith],"CodeMirror-widget")),l.collapsed&&(Yn=!0);var a,u,c=t.line,f=0;if(o.iter(c,r.line+1,function(e){var n={from:null,to:null,marker:l};f+=e.text.length,c==t.line&&(n.from=t.ch,f-=t.ch),c==r.line&&(n.to=r.ch,f-=e.text.length-r.ch),l.collapsed&&(c==r.line&&(u=lr(e,r.ch)),c==t.line?a=lr(e,t.ch):Or(e,0)),tr(e,n),l.collapsed&&c==t.line&&cr(e)&&Or(e,0),++c}),l.readOnly&&(jn=!0,(e.view.history.done.length||e.view.history.undone.length)&&e.clearHistory()),l.collapsed){if(a!=u)throw Error("Inserting collapsed marker overlapping an existing one");l.size=f,l.atomic=!0}return(l.className||l.startStyle||l.endStyle||l.collapsed)&&X(e,t.line,r.line+1),l.atomic&&Ht(e),l}function Qt(e,t){if(e)for(var r=0;e.length>r;++r){var n=e[r];if(n.marker==t)return n}}function er(e,t){for(var r,n=0;e.length>n;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function tr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.lines.push(e)}function rr(e,t){if(e)for(var r,n=0;e.length>n;++n){var i=e[n],o=i.marker,l=null==i.from||(o.inclusiveLeft?t>=i.from:t>i.from);if(l||"bookmark"==o.type&&i.from==t){var s=null==i.to||(o.inclusiveRight?i.to>=t:i.to>t);(r||(r=[])).push({from:i.from,to:s?null:i.to,marker:o})}}return r}function nr(e,t,r){if(e)for(var n,i=0;e.length>i;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=r:o.to>r);if(s||"bookmark"==l.type&&o.from==r&&o.from!=t){var a=null==o.from||(l.inclusiveLeft?r>=o.from:r>o.from);(n||(n=[])).push({from:a?null:o.from-r,to:null==o.to?null:o.to-r,marker:l})}}return n}function ir(e,t,r,n,i){if(!e&&!t)return i;var o=rr(e,r),l=nr(t,r,n),s=1==i.length,a=en(i).length+(s?r:0);if(o)for(var u=0;o.length>u;++u){var c=o[u];if(null==c.to){var f=Qt(l,c.marker);f?s&&(c.to=null==f.to?null:f.to+a):c.to=r}}if(l)for(var u=0;l.length>u;++u){var c=l[u];if(null!=c.to&&(c.to+=a),null==c.from){var f=Qt(o,c.marker);f||(c.from=a,s&&(o||(o=[])).push(c))}else c.from+=a,s&&(o||(o=[])).push(c)}var h=[pr(i[0],o)];if(!s){var d,p=i.length-2;if(p>0&&o)for(var u=0;o.length>u;++u)null==o[u].to&&(d||(d=[])).push({from:null,to:null,marker:o[u].marker});for(var u=0;p>u;++u)h.push(pr(i[u+1],d));h.push(pr(en(i),l))}return h}function or(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;e.markedSpans.length>t;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=rn(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;n.length>o;++o)for(var l=n[o].find(),s=0;i.length>s;++s){var a=i[s];if(St(l.from,a.to)&&!St(l.to,a.from)){var u=[s,1];St(a.from,l.from)&&u.push({from:a.from,to:l.from}),St(l.to,a.to)&&u.push({from:l.to,to:a.to}),i.splice.apply(i,u),s+=u.length-1}}return i}function lr(e,t){var r,n=Yn&&e.markedSpans;if(n)for(var i,o=0;n.length>o;++o)i=n[o],i.marker.collapsed&&(null==i.from||t>i.from)&&(null==i.to||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function sr(e){return lr(e,-1)}function ar(e){return lr(e,e.text.length+1)}function ur(e,t){for(var r;r=sr(t);)t=Wr(e,r.find().from.line);return t}function cr(e){var t=Yn&&e.markedSpans;if(t)for(var r,n=0;t.length>n;++n)if(r=t[n],r.marker.collapsed){if(null==r.from)return!0;if(0==r.from&&r.marker.inclusiveLeft&&fr(e,r))return!0}}function fr(e,t){if(null==t.to||t.marker.inclusiveRight&&t.to==e.text.length)return!0;for(var r,n=0;e.markedSpans.length>n;++n)if(r=e.markedSpans[n],r.marker.collapsed&&r.from==t.to&&(r.marker.inclusiveLeft||t.marker.inclusiveRight)&&fr(e,r))return!0}function hr(e){return"string"==typeof e?e:e.text}function dr(e){if("string"==typeof e)return null;for(var t=e.markedSpans,r=null,n=0;t.length>n;++n)t[n].marker.explicitlyCleared?r||(r=t.slice(0,n)):r&&r.push(t[n]);return r?r.length?r:null:t}function pr(e,t){return t?{text:e,markedSpans:t}:e}function vr(e){var t=e.markedSpans;if(t){for(var r=0;t.length>r;++r){var n=t[r].marker.lines,i=rn(n,e);n.splice(i,1)}e.markedSpans=null}}function gr(e,t){if(t){for(var r=0;t.length>r;++r)t[r].marker.lines.push(e);e.markedSpans=t}}function mr(e,t,r){var n={text:e,height:r};return gr(n,t),cr(n)&&(n.height=0),n}function yr(e,t,r,n){t.text=r,t.stateAfter=t.styles=null,null!=t.order&&(t.order=null),vr(t),gr(t,n),cr(t)?t.height=0:t.height||(t.height=_(e.display)),qr(e,t,"change")}function wr(e){e.parent=null,vr(e)}function br(e,t,r){var n=e.view.mode,i=e.options.flattenSpans,o=!t.styles,l=0,s="",a=null,u=new Zt(t.text,e.options.tabSize),c=t.styles||(t.styles=[]);for(""==t.text&&n.blankLine&&n.blankLine(r);!u.eol();){var f=n.token(u,r),h=u.current();if(u.start=u.pos,i&&a==f?s+=h:(s&&(o=o||l>=c.length||s!=c[l]||a!=c[l+1],c[l++]=s,c[l++]=a),s=h,a=f),u.pos>5e3)break}return s&&(o=o||l>=c.length||s!=c[l]||a!=c[l+1],c[l++]=s,c[l++]=a),u.pos>5e3&&(c[l++]=t.text.slice(u.pos),c[l++]=null),l!=c.length&&(c.length=l,o=!0),o}function xr(e,t,r){var n=e.view.mode,i=new Zt(t.text,e.options.tabSize);for(""==t.text&&n.blankLine&&n.blankLine(r);!i.eol()&&5e3>=i.pos;)n.token(i,r),i.start=i.pos}function Cr(e){return e?ai[e]||(ai[e]="cm-"+e.replace(/ +/g," cm-")):null}function Lr(e,t,r){for(var n,i,o,l=t,s=!0;n=sr(l);)s=!1,l=Wr(e.view.doc,n.find().from.line),i||(i=l);var a={pre:an("pre"),col:0,pos:0,display:!r,measure:null,addedOne:!1,cm:e};l.textClass&&(a.pre.className=l.textClass);do{l.styles||br(e,l,l.stateAfter=O(e,Dr(l))),a.measure=l==t&&r,a.pos=0,a.addToken=a.measure?Mr:kr,r&&o&&l!=t&&!a.addedOne&&(r[0]=a.pre.appendChild(dn(e.display.measure)),a.addedOne=!0);var u=Tr(l,a);o=l==i,u&&(l=Wr(e.view.doc,u.to.line),s=!1)}while(u);return r&&!a.addedOne&&(r[0]=a.pre.appendChild(s?an("span"," "):dn(e.display.measure))),a.pre.firstChild||cr(t)||a.pre.appendChild(document.createTextNode(" ")),a.pre}function kr(e,t,r,n,i){if(t){if(ui.test(t))for(var o=document.createDocumentFragment(),l=0;;){ui.lastIndex=l;var s=ui.exec(t),a=s?s.index-l:t.length-l;if(a&&(o.appendChild(document.createTextNode(t.slice(l,l+a))),e.col+=a),!s)break;if(l+=a+1,"	"==s[0]){var u=e.cm.options.tabSize,c=u-e.col%u;o.appendChild(an("span",Qr(c),"cm-tab")),e.col+=c}else{var f=an("span","•","cm-invalidchar");f.title="\\u"+s[0].charCodeAt(0).toString(16),o.appendChild(f),e.col+=1}}else{e.col+=t.length;var o=document.createTextNode(t)}if(r||n||i||e.measure){var h=r||"";return n&&(h+=n),i&&(h+=i),e.pre.appendChild(an("span",[o],h))}e.pre.appendChild(o)}}function Mr(e,t,r,n,i){for(var o=0;t.length>o;++o)o&&t.length-1>o&&e.cm.options.lineWrapping&&gi.test(t.slice(o-1,o+1))&&e.pre.appendChild(an("wbr")),e.measure[e.pos++]=kr(e,t.charAt(o),r,0==o&&n,o==t.length-1&&i);t.length&&(e.addedOne=!0)}function Sr(e,t,r){r&&(e.display||(r=r.cloneNode(!0)),e.pre.appendChild(r),e.measure&&t&&(e.measure[e.pos]=r,e.addedOne=!0)),e.pos+=t}function Tr(e,t){var r=e.styles,n=e.markedSpans;if(n)for(var i,o,l,s,a,u=e.text,c=u.length,f=0,h=0,d="",p=0;;){if(p==f){o=l=s="",a=null,p=1/0;for(var v=null,g=0;n.length>g;++g){var m=n[g],y=m.marker;f>=m.from&&(null==m.to||m.to>f)?(null!=m.to&&p>m.to&&(p=m.to,l=""),y.className&&(o+=" "+y.className),y.startStyle&&m.from==f&&(s+=" "+y.startStyle),y.endStyle&&m.to==p&&(l+=" "+y.endStyle),y.collapsed&&(!a||a.marker.width<y.width)&&(a=m)):m.from>f&&p>m.from&&(p=m.from),"bookmark"==y.type&&m.from==f&&y.replacedWith&&(v=y.replacedWith)}if(a&&(a.from||0)==f&&(Sr(t,(null==a.to?c:a.to)-f,null!=a.from&&a.marker.replacedWith),null==a.to))return a.marker.find();v&&!a&&Sr(t,0,v)}if(f>=c)break;for(var w=Math.min(c,p);;){if(d){var b=f+d.length;if(!a){var x=b>w?d.slice(0,w-f):d;t.addToken(t,x,i+o,s,f+x.length==p?l:"")}if(b>=w){d=d.slice(w-f),f=w;break}f=b,s=""}d=r[h++],i=Cr(r[h++])}}else for(var h=0;r.length>h;h+=2)t.addToken(t,r[h],Cr(r[h+1]))}function Nr(e){this.lines=e,this.parent=null;for(var t=0,r=e.length,n=0;r>t;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Ar(e){this.children=e;for(var t=0,r=0,n=0,i=e.length;i>n;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}function Wr(e,t){for(;!e.lines;)for(var r=0;;++r){var n=e.children[r],i=n.chunkSize();if(i>t){e=n;break}t-=i}return e.lines[t]}function Or(e,t){for(var r=t-e.height,n=e;n;n=n.parent)n.height+=r}function Dr(e){if(null==e.parent)return null;for(var t=e.parent,r=rn(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r}function Hr(e,t){var r=0;e:do{for(var n=0,i=e.children.length;i>n;++n){var o=e.children[n],l=o.height;if(l>t){e=o;continue e}t-=l,r+=o.chunkSize()}return r}while(!e.lines);for(var n=0,i=e.lines.length;i>n;++n){var s=e.lines[n],a=s.height;if(a>t)break;t-=a}return r+n}function Er(e,t){t=ur(e.view.doc,t);for(var r=0,n=t.parent,i=0;n.lines.length>i;++i){var o=n.lines[i];if(o==t)break;r+=o.height}for(var l=n.parent;l;n=l,l=n.parent)for(var i=0;l.children.length>i;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function zr(e){var t=e.order;return null==t&&(t=e.order=Li(e.text)),t}function Ir(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function Fr(e,t,r,n,i,o,l,s,a){var u=e.view.history;u.undone.length=0;var c=+new Date,f=en(u.done);if(f&&(u.lastOp==e.curOp.id||u.lastOrigin==i&&("input"==i||"delete"==i)&&u.lastTime>c-600)){var h=en(f.events);if(h.start>t+n.length||t>h.start+h.added)f.events.push({start:t,added:r,old:n});else{for(var d=Math.max(0,h.start-t),p=Math.max(0,t+n.length-(h.start+h.added)),v=d;v>0;--v)h.old.unshift(n[v-1]);for(var v=p;v>0;--v)h.old.push(n[n.length-v]);d&&(h.start=t),h.added+=r-(n.length-d-p)}f.fromAfter=s,f.toAfter=a}else{for(f={events:[{start:t,added:r,old:n}],fromBefore:o,toBefore:l,fromAfter:s,toAfter:a},u.done.push(f);u.done.length>e.options.undoDepth;)u.done.shift();0>u.dirtyCounter?u.dirtyCounter=0/0:u.dirtyCounter++}u.lastTime=c,u.lastOp=e.curOp.id,u.lastOrigin=i}function Rr(){Kr(this)}function Pr(e){return e.stop||(e.stop=Rr),e}function Br(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Vr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Kr(e){Br(e),Vr(e)}function _r(e){return e.target||e.srcElement}function Ur(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Gn&&e.ctrlKey&&1==t&&(t=3),t}function Gr(e,t){var r=e.override&&e.override.hasOwnProperty(t);return r?e.override[t]:e[t]}function jr(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}}function Yr(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;n.length>i;++i)if(n[i]==r){n.splice(i,1);break}}}function Xr(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;r.length>i;++i)r[i].apply(null,n)}function qr(e,t,r){function n(e){return function(){e.apply(null,o)}}var i=t._handlers&&t._handlers[r];if(i)for(var o=Array.prototype.slice.call(arguments,3),l=e.curOp&&e.curOp.delayedCallbacks,s=0;i.length>s;++s)l?l.push(n(i[s])):i[s].apply(null,o)}function Zr(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function $r(){this.id=null}function Jr(e,t,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var n=0,i=0;t>n;++n)"	"==e.charAt(n)?i+=r-i%r:++i;return i}function Qr(e){for(;e>=hi.length;)hi.push(en(hi)+" ");return hi[e]}function en(e){return e[e.length-1]}function tn(e){_n?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function rn(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;n>r;++r)if(e[r]==t)return r;return-1}function nn(e){for(var t=[],r=0;e>r;++r)t.push(void 0);return t}function on(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ln(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||di.test(e))}function sn(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&e[r]&&++t;return!t}function an(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)fn(i,t);else if(t)for(var o=0;t.length>o;++o)i.appendChild(t[o]);return i}function un(e){return e.innerHTML="",e}function cn(e,t){return un(e).appendChild(t)}function fn(e,t){Hn?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function hn(e){if(null!=mi)return mi;var t=an("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return cn(e,t),t.offsetWidth&&(mi=t.offsetHeight-t.clientHeight),mi||0}function dn(e){if(null==yi){var t=an("span","​");cn(e,an("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(yi=1>=t.offsetWidth&&t.offsetHeight>2&&!Dn)}return yi?an("span","​"):an("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function pn(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=0;e.length>i;++i){var o=e[i];r>o.from&&o.to>t&&n(Math.max(o.from,t),Math.min(o.to,r),1==o.level?"rtl":"ltr")}}function vn(e){return e.level%2?e.to:e.from}function gn(e){return e.level%2?e.from:e.to}function mn(e){var t=zr(e);return t?vn(t[0]):0}function yn(e){var t=zr(e);return t?gn(en(t)):e.text.length}function wn(e,t){var r=Wr(e.view.doc,t),n=ur(e.view.doc,r);n!=r&&(t=Dr(n));var i=zr(n),o=i?i[0].level%2?yn(n):mn(n):0;return{line:t,ch:o}}function bn(e,t){for(var r,n;r=ar(n=Wr(e.view.doc,t));)t=r.find().to.line;var i=zr(n),o=i?i[0].level%2?mn(n):yn(n):n.text.length;return{line:t,ch:o}}function xn(e,t,r,n){var i=zr(e);if(!i)return Cn(e,t,r,n);for(var o=n?function(t,r){do t+=r;while(t>0&&pi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},l=i[0].level,s=0;i.length>s;++s){var a=i[s],u=a.level%2==l;if(t>a.from&&a.to>t||u&&(a.from==t||a.to==t))break}for(var c=o(t,a.level%2?-r:r);null!=c;)if(a.level%2==l){if(!(a.from>c||c>a.to))break;a=i[s+=r],c=a&&(r>0==a.level%2?o(a.to,-1):o(a.from,1))}else if(c==vn(a))a=i[--s],c=a&&gn(a);else{if(c!=gn(a))break;a=i[++s],c=a&&vn(a)}return 0>c||c>e.text.length?null:c}function Cn(e,t,r,n){var i=t+r;if(n)for(;i>0&&pi.test(e.text.charAt(i));)i+=r;return 0>i||i>e.text.length?null:i}var Ln,kn,Mn,Sn,Tn,Nn,An,Wn=/gecko\/\d/i.test(navigator.userAgent),On=/MSIE \d/.test(navigator.userAgent),Dn=/MSIE [1-7]\b/.test(navigator.userAgent),Hn=/MSIE [1-8]\b/.test(navigator.userAgent),En=/WebKit\//.test(navigator.userAgent),zn=En&&/Qt\/\d+\.\d+/.test(navigator.userAgent),In=/Chrome\//.test(navigator.userAgent),Fn=/Opera\//.test(navigator.userAgent),Rn=/Apple Computer/.test(navigator.vendor),Pn=/KHTML\//.test(navigator.userAgent),Bn=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Vn=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Kn=/PhantomJS/.test(navigator.userAgent),_n=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Un=_n||/Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent),Gn=_n||/Mac/.test(navigator.platform),jn=!1,Yn=!1,Xn=0,qn=null;On?qn=-.53:Wn?qn=15:In?qn=-.7:Rn&&(qn=-1/3);var Zn,$n,Jn=null;e.prototype={getValue:function(e){var t=[],r=this.view.doc;return r.iter(0,r.size,function(e){t.push(e.text)}),t.join(e||"\n")},setValue:Y(null,function(e){var t=this.view.doc,r={line:0,ch:0},n=Wr(t,t.size-1).text.length;xt(this,r,{line:t.size-1,ch:n},wi(e),r,r,"setValue")}),getSelection:function(e){return this.getRange(this.view.sel.from,this.view.sel.to,e)},replaceSelection:Y(null,function(e,t,r){var n=this.view.sel;bt(this,n.from,n.to,wi(e),t||"around",r)}),focus:function(){window.focus(),Q(this),mt(this),Z(this)},setOption:function(e,t){var r=this.options,n=r[e];(r[e]!=t||"mode"==e)&&(r[e]=t,Qn.hasOwnProperty(e)&&Y(this,Qn[e])(this,t,n))},getOption:function(e){return this.options[e]},getMode:function(){return this.view.mode},addKeyMap:function(e){this.view.keyMaps.push(e)},removeKeyMap:function(e){for(var t=this.view.keyMaps,r=0;t.length>r;++r)if(("string"==typeof e?t[r].name:t[r])==e)return t.splice(r,1),!0},undo:Y(null,function(){Ct(this,"undo")}),redo:Y(null,function(){Ct(this,"redo")}),indentLine:Y(null,function(e,t,r){"string"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Wt(this.view.doc,e)&&Pt(this,e,t,r)}),indentSelection:Y(null,function(e){var t=this.view.sel;if(Mt(t.from,t.to))return Pt(this,t.from.line,e);for(var r=t.to.line-(t.to.ch?0:1),n=t.from.line;r>=n;++n)Pt(this,n,e)}),historySize:function(){var e=this.view.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.view.history=Ir()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0==this.view.history.dirtyCounter},getHistory:function(){function e(e){for(var t,r=0,n=[];e.length>r;++r){var i=e[r];n.push({events:t=[],fromBefore:i.fromBefore,toBefore:i.toBefore,fromAfter:i.fromAfter,toAfter:i.toAfter});for(var o=0,l=i.events;l.length>o;++o){var s=[],a=l[o];t.push({start:a.start,added:a.added,old:s});for(var u=0;a.old.length>u;++u)s.push(hr(a.old[u]))}}return n}var t=this.view.history;return{done:e(t.done),undone:e(t.undone)}},setHistory:function(e){var t=this.view.history=Ir();t.done=e.done,t.undone=e.undone},getTokenAt:function(e){var t=this.view.doc;e=At(t,e);for(var r=O(this,e.line),n=this.view.mode,i=Wr(t,e.line),o=new Zt(i.text,this.options.tabSize);o.pos<e.ch&&!o.eol();){o.start=o.pos;var l=n.token(o,r)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:r}},getStateAfter:function(e){var t=this.view.doc;return e=Nt(t,null==e?t.size-1:e),O(this,e+1)},cursorCoords:function(e,t){var r,n=this.view.sel;return r=null==e?n.head:"object"==typeof e?At(this.view.doc,e):e?n.from:n.to,B(this,r,t||"page")},charCoords:function(e,t){return P(this,At(this.view.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return V(this,e.left-t.left,e.top-t.top)},defaultTextHeight:function(){return _(this.display)},markText:Y(null,function(e,t,r){return Jt(this,At(this.view.doc,e),At(this.view.doc,t),r,"range")}),setBookmark:Y(null,function(e,t){return e=At(this.view.doc,e),Jt(this,e,e,t?{replacedWith:t}:{},"bookmark")}),findMarksAt:function(e){var t=this.view.doc;e=At(t,e);var r=[],n=Wr(t,e.line).markedSpans;if(n)for(var i=0;n.length>i;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&r.push(o.marker)}return r},setGutterMarker:Y(null,function(e,t,r){return Bt(this,e,function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&sn(n)&&(e.gutterMarkers=null),!0})}),clearGutter:Y(null,function(e){var t=0,r=this,n=r.view.doc;n.iter(0,n.size,function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,X(r,t,t+1),sn(n.gutterMarkers)&&(n.gutterMarkers=null)),++t})}),addLineClass:Y(null,function(e,t,r){return Bt(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(RegExp("\\b"+r+"\\b").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:Y(null,function(e,t,r){return Bt(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.replace(RegExp("^"+r+"\\b\\s*|\\s*\\b"+r+"\\b"),"");if(o==i)return!1;e[n]=o||null}return!0})}),addLineWidget:Y(null,function(e,t,r){var n=r||{};return n.node=t,n.noHScroll&&(this.display.alignWidgets=!0),Bt(this,e,function(e){return(e.widgets||(e.widgets=[])).push(n),n.line=e,!0}),n}),removeLineWidget:Y(null,function(e){var t=e.line.widgets,r=Dr(e.line);if(null!=r){for(var n=0;t.length>n;++n)t[n]==e&&t.splice(n--,1);X(this,r,r+1)}}),lineInfo:function(e){if("number"==typeof e){if(!Wt(this.view.doc,e))return null;var t=e;if(e=Wr(this.view.doc,e),!e)return null}else{var t=Dr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=B(this,At(this.view.doc,e));var l=e.top,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("near"==n){var a=Math.max(o.wrapper.clientHeight,this.view.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(l=e.top-t.offsetHeight),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+D(o)+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Ft(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(e){return At(this.view.doc,e)},getCursor:function(e){var t,r=this.view.sel;return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||e===!1?r.to:r.from,Tt(t)},somethingSelected:function(){return!Mt(this.view.sel.from,this.view.sel.to)},setCursor:Y(null,function(e,t,r){var n=At(this.view.doc,"number"==typeof e?{line:e,ch:t||0}:e);r?Ot(this,n):Dt(this,n,n)}),setSelection:Y(null,function(e,t){var r=this.view.doc;Dt(this,At(r,e),At(r,t||e))}),extendSelection:Y(null,function(e,t){var r=this.view.doc;Ot(this,At(r,e),t&&At(r,t))}),setExtending:function(e){this.view.sel.extend=e},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){var t=this.view.doc;return Wt(t,e)?Wr(t,e):void 0},getLineNumber:function(e){return Dr(e)},setLine:Y(null,function(e,t){Wt(this.view.doc,e)&&kt(this,t,{line:e,ch:0},{line:e,ch:Wr(this.view.doc,e).text.length})}),removeLine:Y(null,function(e){Wt(this.view.doc,e)&&kt(this,"",{line:e,ch:0},At(this.view.doc,{line:e+1,ch:0}))}),replaceRange:Y(null,function(e,t,r){var n=this.view.doc;return t=At(n,t),r=r?At(n,r):t,kt(this,e,t,r)}),getRange:function(e,t,r){var n=this.view.doc;e=At(n,e),t=At(n,t);var i=e.line,o=t.line;if(i==o)return Wr(n,i).text.slice(e.ch,t.ch);var l=[Wr(n,i).text.slice(e.ch)];return n.iter(i+1,o,function(e){l.push(e.text)}),l.push(Wr(n,o).text.slice(0,t.ch)),l.join(r||"\n")
},triggerOnKeyDown:Y(null,vt),execCommand:function(e){return li[e](this)},moveH:Y(null,function(e,t){var r=this.view.sel,n=0>e?r.from:r.to;(r.shift||r.extend||Mt(r.from,r.to))&&(n=Vt(this,e,t,!0)),Ot(this,n,n,e)}),deleteH:Y(null,function(e,t){var r=this.view.sel;Mt(r.from,r.to)?kt(this,"",r.from,Vt(this,e,t,!1),"delete"):kt(this,"",r.from,r.to,"delete"),this.curOp.userSelChange=!0}),moveV:Y(null,function(e,t){var r,n=this.view,i=n.doc,o=this.display,l=n.sel.head,s=B(this,l,"div"),a=s.left;if(null!=n.goalColumn&&(a=n.goalColumn),"page"==t){var u=Math.min(o.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=s.top+e*u}else"line"==t&&(r=e>0?s.bottom+3:s.top-3);do{var c=V(this,a,r);r+=5*e}while(c.outside&&(0>e?r>0:i.height>r));"page"==t&&(o.scrollbarV.scrollTop+=P(this,c,"div").top-s.top),Ot(this,c,c,e),n.goalColumn=a}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(e){var t,r=0,n=this.view.doc;return n.iter(0,n.size,function(n){var i=n.text.length+1;return i>e?(t=e,!0):(e-=i,++r,void 0)}),At(n,{line:r,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return this.view.doc.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){null!=e&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),null!=t&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),y(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=ci;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:function(e){"number"==typeof e&&(e={line:e,ch:0}),e=e?At(this.view.doc,e):this.view.sel.head,It(this,e)},setSize:function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(e+"")?e+"px":e}null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.refresh()},on:function(e,t){jr(this,e,t)},off:function(e,t){Yr(this,e,t)},operation:function(e){return Y(this,e)()},refresh:function(){F(this),this.display.scroller.scrollHeight>this.view.scrollTop&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=this.view.scrollTop),y(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Qn=e.optionHandlers={},ei=e.defaults={},ti=e.Init={toString:function(){return"CodeMirror.Init"}};Ut("value","",function(e,t){e.setValue(t)},!0),Ut("mode",null,n,!0),Ut("indentUnit",2,n,!0),Ut("indentWithTabs",!1),Ut("smartIndent",!0),Ut("tabSize",4,function(e){n(e),F(e),y(e,!0)},!0),Ut("electricChars",!0),Ut("theme","default",function(e){l(e),s(e)},!0),Ut("keyMap","default",o),Ut("extraKeys",null),Ut("onKeyEvent",null),Ut("onDragEvent",null),Ut("lineWrapping",!1,i,!0),Ut("gutters",[],function(e){f(e.options),s(e)},!0),Ut("lineNumbers",!1,function(e){f(e.options),s(e)},!0),Ut("firstLineNumber",1,s,!0),Ut("lineNumberFormatter",function(e){return e},s,!0),Ut("showCursorWhenSelecting",!1,k,!0),Ut("readOnly",!1,function(e,t){"nocursor"==t?(yt(e),e.display.input.blur()):t||J(e,!0)}),Ut("dragDrop",!0),Ut("cursorBlinkRate",530),Ut("cursorHeight",1),Ut("workTime",100),Ut("workDelay",100),Ut("flattenSpans",!0),Ut("pollInterval",100),Ut("undoDepth",40),Ut("viewportMargin",10,function(e){e.refresh()},!0),Ut("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Ut("autofocus",null);var ri=e.modes={},ni=e.mimeModes={};e.defineMode=function(t,r){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){r.dependencies=[];for(var n=2;arguments.length>n;++n)r.dependencies.push(arguments[n])}ri[t]=r},e.defineMIME=function(e,t){ni[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ni.hasOwnProperty(t))t=ni[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){var r=e.resolveMode(r),n=ri[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(ii.hasOwnProperty(r.name)){var o=ii[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}return i.name=r.name,i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var ii=e.modeExtensions={};e.extendMode=function(e,t){var r=ii.hasOwnProperty(e)?ii[e]:ii[e]={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineOption=Ut;var oi=[];e.defineInitHook=function(e){oi.push(e)},e.copyState=Gt,e.startState=jt,e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);t=r.state,e=r.mode}return r||{mode:e,state:t}};var li=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),r=e.getCursor(!1),n=!Mt(t,r);n||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,n?r:{line:t.line},"delete"):e.replaceRange("",t,{line:t.line+1,ch:0},"delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t},"delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection({line:0,ch:0})},goDocEnd:function(e){e.extendSelection({line:e.lineCount()-1})},goLineStart:function(e){e.extendSelection(wn(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),r=wn(e,t.line),n=e.getLineHandle(r.line),i=zr(n);if(i&&0!=i[0].level)e.extendSelection(r);else{var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&o>=t.ch&&t.ch;e.extendSelection({line:r.line,ch:l?0:o})}},goLineEnd:function(e){e.extendSelection(bn(e,e.getCursor().line))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","input")},transposeChars:function(e){var t=e.getCursor(),r=e.getLine(t.line);t.ch>0&&t.ch<r.length-1&&e.replaceRange(r.charAt(t.ch)+r.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){Y(e,function(){e.replaceSelection("\n","end","input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},si=e.keyMap={};si.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},si.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},si.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},si["default"]=Gn?si.macDefault:si.pcDefault,si.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=qt,e.fromTextArea=function(t,r){function n(){t.value=u.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),null==r.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form){jr(t.form,"submit",n);var l=t.form,s=l.submit;try{l.submit=function a(){n(),l.submit=s,l.submit(),l.submit=a}}catch(o){}}t.style.display="none";var u=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return u.save=n,u.getTextArea=function(){return t},u.toTextArea=function(){n(),t.parentNode.removeChild(u.getWrapperElement()),t.style.display="",t.form&&(Yr(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=s))},u},Zt.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));return r?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return Jr(this.string,this.start,this.tabSize)},indentation:function(){return Jr(this.string,null,this.tabSize)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=Zt,$t.prototype.clear=function(){if(!this.explicitlyCleared){G(this.cm);for(var e=null,t=null,r=0;this.lines.length>r;++r){var n=this.lines[r],i=Qt(n.markedSpans,this);null!=i.to&&(t=Dr(n)),n.markedSpans=er(n.markedSpans,i),null!=i.from?e=Dr(n):this.collapsed&&!cr(n)&&Or(n,_(this.cm.display))}null!=e&&X(this.cm,e,t+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,Ht(this.cm)),j(this.cm),qr(this.cm,this,"clear")}},$t.prototype.find=function(){for(var e,t,r=0;this.lines.length>r;++r){var n=this.lines[r],i=Qt(n.markedSpans,this);if(null!=i.from||null!=i.to){var o=Dr(n);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}},window.lineIsHidden=cr;var ai={},ui=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Nr.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,r){for(var n=e,i=e+t;i>n;++n){var o=this.lines[n];this.height-=o.height,wr(o),qr(r,o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0,i=t.length;i>n;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;n>e;++e)if(r(this.lines[e]))return!0}},Ar.prototype={chunkSize:function(){return this.size},remove:function(e,t,r){this.size-=t;for(var n=0;this.children.length>n;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e),s=i.height;if(i.remove(e,l,r),this.height-=s-i.height,o==l&&(this.children.splice(n--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(25>this.size-t){var a=[];this.collapse(a),this.children=[new Nr(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,r=this.children.length;r>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var r=0,n=0,i=t.length;i>n;++n)r+=t[n].height;this.insertHeight(e,t,r)},insertHeight:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>=e){if(o.insertHeight(e,t,r),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),a=new Nr(s);o.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Ar(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=rn(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Ar(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,r){this.iterN(e,t-e,r)},iterN:function(e,t,r){for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>e){var s=Math.min(t,l-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=l}}},e.e_stop=Kr,e.e_preventDefault=Br,e.e_stopPropagation=Vr,e.on=jr,e.off=Yr,e.signal=Xr;var ci=30,fi=e.Pass={toString:function(){return"CodeMirror.Pass"}};$r.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=Jr;var hi=[""],di=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,pi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,vi=function(){if(Hn)return!1;var e=an("div");return"draggable"in e||"dragDrop"in e}(),gi=/^$/;Wn?gi=/$'/:Rn?gi=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:In&&(gi=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var mi,yi,wi=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;n>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=wi;var bi=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},xi=function(){var e=an("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ci={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=Ci,function(){for(var e=0;10>e;e++)Ci[e+48]=e+"";for(var e=65;90>=e;e++)Ci[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Ci[e+111]=Ci[e+63235]="F"+e}();var Li=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?r.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,l=/[Lb1n]/,s=/[1n]/;return function(t){if(!n.test(t))return!1;for(var r,a=t.length,u=[],c=null,f=0;a>f;++f)u.push(r=e(t.charCodeAt(f))),null==c&&("L"==r?c="L":("R"==r||"r"==r)&&(c="R"));null==c&&(c="L");for(var f=0,h=c;a>f;++f){var r=u[f];"m"==r?u[f]=h:h=r}for(var f=0,d=c;a>f;++f){var r=u[f];"1"==r&&"r"==d?u[f]="n":o.test(r)&&(d=r,"r"==r&&(u[f]="R"))}for(var f=1,h=u[0];a-1>f;++f){var r=u[f];"+"==r&&"1"==h&&"1"==u[f+1]?u[f]="1":","!=r||h!=u[f+1]||"1"!=h&&"n"!=h||(u[f]=h),h=r}for(var f=0;a>f;++f){var r=u[f];if(","==r)u[f]="N";else if("%"==r){for(var p=f+1;a>p&&"%"==u[p];++p);for(var v=f&&"!"==u[f-1]||a-1>p&&"1"==u[p]?"1":"N",g=f;p>g;++g)u[g]=v;f=p-1}}for(var f=0,d=c;a>f;++f){var r=u[f];"L"==d&&"1"==r?u[f]="L":o.test(r)&&(d=r)}for(var f=0;a>f;++f)if(i.test(u[f])){for(var p=f+1;a>p&&i.test(u[p]);++p);for(var m="L"==(f?u[f-1]:c),y="L"==(a-1>p?u[p]:c),v=m||y?"L":"R",g=f;p>g;++g)u[g]=v;f=p-1}for(var w,b=[],f=0;a>f;)if(l.test(u[f])){var x=f;for(++f;a>f&&l.test(u[f]);++f);b.push({from:x,to:f,level:0})}else{var C=f,L=b.length;for(++f;a>f&&"L"!=u[f];++f);for(var g=C;f>g;)if(s.test(u[g])){g>C&&b.splice(L,0,{from:C,to:g,level:1});var k=g;for(++g;f>g&&s.test(u[g]);++g);b.splice(L,0,{from:k,to:g,level:2}),C=g}else++g;f>C&&b.splice(L,0,{from:C,to:f,level:1})}return 1==b[0].level&&(w=t.match(/^\s+/))&&(b[0].from=w[0].length,b.unshift({from:0,to:w[0].length,level:0})),1==en(b).level&&(w=t.match(/\s+$/))&&(en(b).to-=w[0].length,b.push({from:a-w[0].length,to:a,level:0})),b[0].level!=en(b).level&&b.push({from:a,to:a,level:b[0].level}),b}}();return e.version="3.0",e}(),CodeMirror.defineMode("xml",function(e,t){function r(e,t){function r(r){return t.tokenize=r,r(e,t)}var i=e.next();if("<"==i){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?r(o("atom","]]>")):null:e.match("--")?r(o("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(l(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=o("meta","?>"),"meta";var s=e.eat("/");w="";for(var a;a=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)w+=a;return w?(b=s?"closeTag":"openTag",t.tokenize=n,"tag"):"error"}if("&"==i){var u;return u=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),u?"atom":"error"}return e.eatWhile(/[^&<]/),null}function n(e,t){var n=e.next();return">"==n||"/"==n&&e.eat(">")?(t.tokenize=r,b=">"==n?"endTag":"selfcloseTag","tag"):"="==n?(b="equals",null):/[\'\"]/.test(n)?(t.tokenize=i(n),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function i(e){return function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=n;break}return"string"}}function o(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=r;break}n.next()}return e}}function l(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=l(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=r;break}return n.tokenize=l(e-1),n.tokenize(t,n)}}return"meta"}}function s(){for(var e=arguments.length-1;e>=0;e--)x.cc.push(arguments[e])}function a(){return s.apply(null,arguments),!0}function u(e,t){var r=k.doNotIndent.hasOwnProperty(e)||x.context&&x.context.noIndent;x.context={prev:x.context,tagName:e,indent:x.indented,startOfLine:t,noIndent:r}}function c(){x.context&&(x.context=x.context.prev)}function f(e){if("openTag"==e)return x.tagName=w,a(v,h(x.startOfLine));if("closeTag"==e){var t=!1;return x.context?x.context.tagName!=w&&(k.implicitlyClosed.hasOwnProperty(x.context.tagName.toLowerCase())&&c(),t=!x.context||x.context.tagName!=w):t=!0,t&&(C="error"),a(d(t))}return a()}function h(e){return function(t){var r=x.tagName;return x.tagName=null,"selfcloseTag"==t||"endTag"==t&&k.autoSelfClosers.hasOwnProperty(r.toLowerCase())?(p(r.toLowerCase()),a()):"endTag"==t?(p(r.toLowerCase()),u(r,e),a()):a()}}function d(e){return function(t){return e&&(C="error"),"endTag"==t?(c(),a()):(C="error",a(arguments.callee))}}function p(e){for(var t;;){if(!x.context)return;if(t=x.context.tagName.toLowerCase(),!k.contextGrabbers.hasOwnProperty(t)||!k.contextGrabbers[t].hasOwnProperty(e))return;c()}}function v(e){return"word"==e?(C="attribute",a(g,v)):"endTag"==e||"selfcloseTag"==e?s():(C="error",a(v))}function g(e){return"equals"==e?a(m,v):(k.allowMissing?"word"==e&&(C="attribute"):C="error","endTag"==e||"selfcloseTag"==e?s():a())}function m(e){return"string"==e?a(y):"word"==e&&k.allowUnquoted?(C="string",a()):(C="error","endTag"==e||"selfCloseTag"==e?s():a())}function y(e){return"string"==e?a(y):s()}var w,b,x,C,L=e.indentUnit,k=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},M=t.alignCDATA;return{startState:function(){return{tokenize:r,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;C=b=w=null;var r=t.tokenize(e,t);if(t.type=b,(r||b)&&"comment"!=r)for(x=t;;){var n=t.cc.pop()||f;if(n(b||r))break}return t.startOfLine=!1,C||r},indent:function(e,t,i){var o=e.context;if(e.tokenize!=n&&e.tokenize!=r||o&&o.noIndent)return i?i.match(/^(\s*)/)[0].length:0;if(M&&/<!\[CDATA\[/.test(t))return 0;for(o&&/^<\//.test(t)&&(o=o.prev);o&&!o.startOfLine;)o=o.prev;return o?o.indent+L:0},electricChars:"/",configuration:t.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});
var _=function(){function e(t,n,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;if(t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped),t.isEqual&&w.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&w.isFunction(n.isEqual))return n.isEqual(t);var i=l.call(t);if(i!=l.call(n))return!1;switch(i){case"[object String]":return t==n+"";case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=r.length;o--;)if(r[o]==t)return!0;r.push(t);var o=0,a=!0;if("[object Array]"==i){if(o=t.length,a=o==n.length)for(;o--&&(a=o in t==o in n&&e(t[o],n[o],r)););}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var s in t)if(w.has(t,s)&&(o++,!(a=w.has(n,s)&&e(t[s],n[s],r))))break;if(a){for(s in n)if(w.has(n,s)&&!o--)break;a=!o}}return r.pop(),a}var t=this,n=t._,r={},i=Array.prototype,o=Object.prototype,a=i.slice,s=i.unshift,l=o.toString,u=o.hasOwnProperty,c=i.forEach,f=i.map,d=i.reduce,h=i.reduceRight,p=i.filter,m=i.every,g=i.some,v=i.indexOf,b=i.lastIndexOf,o=Array.isArray,y=Object.keys,x=Function.prototype.bind,w=function(e){return new z(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):t._=w,w.VERSION="1.3.3";var C=w.each=w.forEach=function(e,t,n){if(null!=e)if(c&&e.forEach===c)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i&&!(i in e&&t.call(n,e[i],i,e)===r);i++);else for(i in e)if(w.has(e,i)&&t.call(n,e[i],i,e)===r)break};w.map=w.collect=function(e,t,n){var r=[];return null==e?r:f&&e.map===f?e.map(t,n):(C(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),e.length===+e.length&&(r.length=e.length),r)},w.reduce=w.foldl=w.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduce===d)return r&&(t=w.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(C(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return n},w.reduceRight=w.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return r&&(t=w.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=w.toArray(e).reverse();return r&&!i&&(t=w.bind(t,r)),i?w.reduce(o,t,n,r):w.reduce(o,t)},w.find=w.detect=function(e,t,n){var r;return k(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},w.filter=w.select=function(e,t,n){var r=[];return null==e?r:p&&e.filter===p?e.filter(t,n):(C(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},w.reject=function(e,t,n){var r=[];return null==e?r:(C(e,function(e,i,o){t.call(n,e,i,o)||(r[r.length]=e)}),r)},w.every=w.all=function(e,t,n){var i=!0;return null==e?i:m&&e.every===m?e.every(t,n):(C(e,function(e,o,a){return(i=i&&t.call(n,e,o,a))?void 0:r}),!!i)};var k=w.some=w.any=function(e,t,n){t||(t=w.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,n):(C(e,function(e,o,a){return i||(i=t.call(n,e,o,a))?r:void 0}),!!i)};w.include=w.contains=function(e,t){var n=!1;return null==e?n:v&&e.indexOf===v?-1!=e.indexOf(t):n=k(e,function(e){return e===t})},w.invoke=function(e,t){var n=a.call(arguments,2);return w.map(e,function(e){return(w.isFunction(t)?t||e:e[t]).apply(e,n)})},w.pluck=function(e,t){return w.map(e,function(e){return e[t]})},w.max=function(e,t,n){if(!t&&w.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&w.isEmpty(e))return-1/0;var r={computed:-1/0};return C(e,function(e,i,o){i=t?t.call(n,e,i,o):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},w.min=function(e,t,n){if(!t&&w.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&w.isEmpty(e))return 1/0;var r={computed:1/0};return C(e,function(e,i,o){i=t?t.call(n,e,i,o):e,r.computed>i&&(r={value:e,computed:i})}),r.value},w.shuffle=function(e){var t,n=[];return C(e,function(e,r){t=Math.floor(Math.random()*(r+1)),n[r]=n[t],n[t]=e}),n},w.sortBy=function(e,t,n){var r=w.isFunction(t)?t:function(e){return e[t]};return w.pluck(w.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return void 0===n?1:void 0===r?-1:r>n?-1:n>r?1:0}),"value")},w.groupBy=function(e,t){var n={},r=w.isFunction(t)?t:function(e){return e[t]};return C(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},w.sortedIndex=function(e,t,n){n||(n=w.identity);for(var r=0,i=e.length;i>r;){var o=r+i>>1;n(e[o])<n(t)?r=o+1:i=o}return r},w.toArray=function(e){return e?w.isArray(e)?a.call(e):w.isArguments(e)?a.call(e):e.toArray&&w.isFunction(e.toArray)?e.toArray():w.values(e):[]},w.size=function(e){return w.isArray(e)?e.length:w.keys(e).length},w.first=w.head=w.take=function(e,t,n){return null==t||n?e[0]:a.call(e,0,t)},w.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},w.last=function(e,t,n){return null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},w.rest=w.tail=function(e,t,n){return a.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,function(e){return!!e})},w.flatten=function(e,t){return w.reduce(e,function(e,n){return w.isArray(n)?e.concat(t?n:w.flatten(n)):(e[e.length]=n,e)},[])},w.without=function(e){return w.difference(e,a.call(arguments,1))},w.uniq=w.unique=function(e,t,n){var n=n?w.map(e,n):e,r=[];return 3>e.length&&(t=!0),w.reduce(n,function(n,i,o){return(t?w.last(n)===i&&n.length:w.include(n,i))||(n.push(i),r.push(e[o])),n},[]),r},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(e){var t=a.call(arguments,1);return w.filter(w.uniq(e),function(e){return w.every(t,function(t){return w.indexOf(t,e)>=0})})},w.difference=function(e){var t=w.flatten(a.call(arguments,1),!0);return w.filter(e,function(e){return!w.include(t,e)})},w.zip=function(){for(var e=a.call(arguments),t=w.max(w.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=w.pluck(e,""+r);return n},w.indexOf=function(e,t,n){if(null==e)return-1;var r;if(n)return n=w.sortedIndex(e,t),e[n]===t?n:-1;if(v&&e.indexOf===v)return e.indexOf(t);for(n=0,r=e.length;r>n;n++)if(n in e&&e[n]===t)return n;return-1},w.lastIndexOf=function(e,t){if(null==e)return-1;if(b&&e.lastIndexOf===b)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},w.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0);for(var n=arguments[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0,o=Array(r);r>i;)o[i++]=e,e+=n;return o};var S=function(){};w.bind=function(e,t){var n,r;if(e.bind===x&&x)return x.apply(e,a.call(arguments,1));if(!w.isFunction(e))throw new TypeError;return r=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(a.call(arguments)));S.prototype=e.prototype;var i=new S,o=e.apply(i,r.concat(a.call(arguments)));return Object(o)===o?o:i}},w.bindAll=function(e){var t=a.call(arguments,1);return 0==t.length&&(t=w.functions(e)),C(t,function(t){e[t]=w.bind(e[t],e)}),e},w.memoize=function(e,t){var n={};return t||(t=w.identity),function(){var r=t.apply(this,arguments);return w.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},w.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=function(e){return w.delay.apply(w,[e,1].concat(a.call(arguments,1)))},w.throttle=function(e,t){var n,r,i,o,a,s,l=w.debounce(function(){a=o=!1},t);return function(){return n=this,r=arguments,i||(i=setTimeout(function(){i=null,a&&e.apply(n,r),l()},t)),o?a=!0:s=e.apply(n,r),l(),o=!0,s}},w.debounce=function(e,t,n){var r;return function(){var i=this,o=arguments;n&&!r&&e.apply(i,o),clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t)}},w.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}},w.wrap=function(e,t){return function(){var n=[e].concat(a.call(arguments,0));return t.apply(this,n)}},w.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},w.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},w.keys=y||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t,n=[];for(t in e)w.has(e,t)&&(n[n.length]=t);return n},w.values=function(e){return w.map(e,w.identity)},w.functions=w.methods=function(e){var t,n=[];for(t in e)w.isFunction(e[t])&&n.push(t);return n.sort()},w.extend=function(e){return C(a.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},w.pick=function(e){var t={};return C(w.flatten(a.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},w.defaults=function(e){return C(a.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isEqual=function(t,n){return e(t,n,[])},w.isEmpty=function(e){if(null==e)return!0;if(w.isArray(e)||w.isString(e))return 0===e.length;for(var t in e)if(w.has(e,t))return!1;return!0},w.isElement=function(e){return!(!e||1!=e.nodeType)},w.isArray=o||function(e){return"[object Array]"==l.call(e)},w.isObject=function(e){return e===Object(e)},w.isArguments=function(e){return"[object Arguments]"==l.call(e)},w.isArguments(arguments)||(w.isArguments=function(e){return!(!e||!w.has(e,"callee"))}),w.isFunction=function(e){return"[object Function]"==l.call(e)},w.isString=function(e){return"[object String]"==l.call(e)},w.isNumber=function(e){return"[object Number]"==l.call(e)},w.isFinite=function(e){return w.isNumber(e)&&isFinite(e)},w.isNaN=function(e){return e!==e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},w.isDate=function(e){return"[object Date]"==l.call(e)},w.isRegExp=function(e){return"[object RegExp]"==l.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return u.call(e,t)},w.noConflict=function(){return t._=n,this},w.identity=function(e){return e},w.times=function(e,t,n){for(var r=0;e>r;r++)t.call(n,r)},w.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.result=function(e,t){if(null==e)return null;var n=e[t];return w.isFunction(n)?n.call(e):n},w.mixin=function(e){C(w.functions(e),function(t){O(t,w[t]=e[t])})};var L=0;w.uniqueId=function(e){var t=L++;return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var _,T=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(_ in A)A[A[_]]=_;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,N=/\\(\\|'|r|n|t|u2028|u2029)/g,P=function(e){return e.replace(N,function(e,t){return A[t]})};w.template=function(e,t,n){n=w.defaults(n||{},w.templateSettings),e="__p+='"+e.replace(M,function(e){return"\\"+A[e]}).replace(n.escape||T,function(e,t){return"'+\n_.escape("+P(t)+")+\n'"}).replace(n.interpolate||T,function(e,t){return"'+\n("+P(t)+")+\n'"}).replace(n.evaluate||T,function(e,t){return"';\n"+P(t)+"\n;__p+='"})+"';\n",n.variable||(e="with(obj||{}){\n"+e+"}\n");var e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n",r=Function(n.variable||"obj","_",e);return t?r(t,w):(t=function(e){return r.call(this,e,w)},t.source="function("+(n.variable||"obj")+"){\n"+e+"}",t)},w.chain=function(e){return w(e).chain()};var z=function(e){this._wrapped=e};w.prototype=z.prototype;var E=function(e,t){return t?w(e).chain():e},O=function(e,t){z.prototype[e]=function(){var e=a.call(arguments);return s.call(e,this._wrapped),E(t.apply(w,e),this._chain)}};return w.mixin(w),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];z.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return("shift"==e||"splice"==e)&&0===r&&delete n[0],E(n,this._chain)}}),C(["concat","join","slice"],function(e){var t=i[e];z.prototype[e]=function(){return E(t.apply(this._wrapped,arguments),this._chain)}}),z.prototype.chain=function(){return this._chain=!0,this},z.prototype.value=function(){return this._wrapped},w}.call({}),emmet=function(e){function t(e,t,n){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},_.extend(r,e),o.prototype=e.prototype,r.prototype=new o,t&&_.extend(r.prototype,t),n&&_.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r}function n(e){return!(e in i)&&a&&a(e),i[e]}if(_===void 0)try{_=e.require("underscore")}catch(r){}if(_===void 0)throw"Cannot access to Underscore.js lib";var i={_:_},o=function(){},a=null;return{define:function(e,t){e in i||(i[e]=_.isFunction(t)?this.exec(t):t)},require:n,exec:function(t,r){return t.call(r||e,_.bind(n,this),_,this)},extend:function(e,n){var r=t(this,e,n);return r.extend=this.extend,e.hasOwnProperty("toString")&&(r.prototype.toString=e.toString),r},expandAbbreviation:function(e,t,r,i){if(!e)return"";var t=t||"html",o=n("filters"),a=n("abbreviationParser"),r=n("profile").get(r,t);return n("tabStops").resetTabstopIndex(),e=o.extractFromAbbreviation(e),i=a.parse(e[0],{syntax:t,contextNode:i}),t=o.composeList(t,r,e[1]),o.apply(i,t,r),""+i},defaultSyntax:function(){return"html"},defaultProfile:function(){return"plain"},log:function(){e.console&&e.console.log&&e.console.log.apply(e.console,arguments)},setModuleLoader:function(e){a=e}}}(this);"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=emmet),exports.emmet=emmet),emmet.define("abbreviationParser",function(e,t){function n(){this.parent=null,this.children=[],this._attributes=[],this.abbreviation="",this.counter=1,this._name=null,this._text="",this.repeatCount=1,this.hasImplicitRepeat=!1,this._data={},this.padding=this.content=this.end=this.start=""}function r(e){return e.substring(1,e.length-1)}function i(o){for(var a,s,o=e("utils").trim(o),l=new n,u=l.addChild(),c=e("stringStream").create(o),o=1e3;!c.eol()&&--o>0;)switch(a=c.peek()){case"(":if(c.start=c.pos,!c.skipToPair("(",")"))throw'Invalid abbreviation: mo matching ")" found for character at '+c.pos;a=i(r(c.current())),(s=c.match(/^\*(\d+)?/,!0))&&u._setRepeat(s[1]),t.each(a.children,function(e){u.addChild(e)});break;case">":u=u.addChild(),c.next();break;case"+":u=u.parent.addChild(),c.next();break;case"^":a=u.parent||u,u=(a.parent||a).addChild(),c.next();break;default:c.start=c.pos,c.eatWhile(function(e){if("["==e||"{"==e){if(c.skipToPair(e,p[e]))return c.backUp(1),!0;throw'Invalid abbreviation: mo matching "'+p[e]+'" found for character at '+c.pos}return"+"==e?(c.next(),e=c.eol()||~"+>^*".indexOf(c.peek()),c.backUp(1),e):"("!=e&&f(e)}),u.setAbbreviation(c.current()),c.start=c.pos}if(1>o)throw"Endless loop detected";return l}function o(t){var t=e("utils").trim(t),n=[],t=e("stringStream").create(t);for(t.eatSpace();!t.eol()&&(t.start=t.pos,t.eatWhile(h));){var r=t.current(),i="";if("="==t.peek()){t.next(),t.start=t.pos;var o=t.peek();if('"'==o||"'"==o){t.next();e:{for(var i=t,a=void 0;a=i.next();)if(a===o){i=!0;break e}i=!1}if(!i)throw"Invalid attribute value";i=t.current(),i=i.substring(1,i.length-1)}else{if(!t.eatWhile(/[^\s\]]/))throw"Invalid attribute value";i=t.current()}}n.push({name:r,value:i}),t.eatSpace()}return n}function a(t){for(var n=[],i={"#":"id",".":"class"},a=null,l=e("stringStream").create(t);!l.eol();)switch(l.peek()){case"#":case".":null===a&&(a=l.pos);var u=i[l.peek()];l.next(),l.start=l.pos,l.eatWhile(h),n.push({name:u,value:l.current()});break;case"[":if(null===a&&(a=l.pos),l.start=l.pos,!l.skipToPair("[","]"))throw"Invalid attribute set definition";n=n.concat(o(r(l.current())));break;default:l.next()}return n.length?{element:t.substring(0,a),attributes:s(n)}:null}function s(e){var e=t.map(e,function(e){return t.clone(e)}),n={};return t.filter(e,function(e){if(!(e.name in n))return n[e.name]=e;var t=n[e.name];return"class"==e.name.toLowerCase()?t.value+=(t.value.length?" ":"")+e.value:t.value=e.value,!1})}function l(t){if(!~t.indexOf("{"))return null;for(var n=e("stringStream").create(t);!n.eol();)switch(n.peek()){case"[":case"(":n.skipToPair(n.peek(),p[n.peek()]);break;case"{":return n.start=n.pos,n.skipToPair("{","}"),{element:t.substring(0,n.start),text:r(n.current())};default:n.next()}}function u(e){for(var n,r,i=e.children.length-1;i>=0;i--)if(r=e.children[i],r.isRepeating())for(n=r.repeatCount,r.repeatCount=1,r.updateProperty("counter",1);--n>0;)r.parent.addChild(r.clone(),i+1).updateProperty("counter",n+1);return t.each(e.children,u),e}function c(e){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];r.isGroup()?r.replace(c(r).children):r.isEmpty()&&r.remove()}return t.each(e.children,c),e}function f(e){var t=e.charCodeAt(0);return t>64&&91>t||t>96&&123>t||t>47&&58>t||-1!="#.*:$-_!@|%".indexOf(e)}var d=/^[\w\-\$\:@\!%]+\+?$/i,h=/[\w\-:\$]/,p={"[":"]","(":")","{":"}"},m=Array.prototype.splice,g=[],v=[],b=[];return n.prototype={addChild:function(e,r){return e=e||new n,e.parent=this,t.isUndefined(r)?this.children.push(e):this.children.splice(r,0,e),e},clone:function(){var e=new n;return t.each(["abbreviation","counter","_name","_text","repeatCount","hasImplicitRepeat","start","end","content","padding"],function(t){e[t]=this[t]},this),e._attributes=t.map(this._attributes,function(e){return t.clone(e)}),e._data=t.clone(this._data),e.children=t.map(this.children,function(t){return t=t.clone(),t.parent=e,t}),e},remove:function(){return this.parent&&(this.parent.children=t.without(this.parent.children,this)),this},replace:function(){var e=this.parent,n=t.indexOf(e.children,this),r=t.flatten(arguments);m.apply(e.children,[n,1].concat(r)),t.each(r,function(t){t.parent=e})},updateProperty:function(e,n){this[e]=n,t.each(this.children,function(t){t.updateProperty(e,n)})},find:function(e){return this.findAll(e)[0]},findAll:function(e){if(!t.isFunction(e))var n=e.toLowerCase(),e=function(e){return e.name().toLowerCase()==n};var r=[];return t.each(this.children,function(t){e(t)&&r.push(t),r=r.concat(t.findAll(e))}),t.compact(r)},data:function(t,n){return 2==arguments.length&&(this._data[t]=n,"resource"==t&&e("elements").is(n,"snippet")&&(this.content=n.data,this._text))&&(this.content=e("abbreviationUtils").insertChildContent(n.data,this._text)),this._data[t]},name:function(){var t=this.matchedResource();return e("elements").is(t,"element")?t.name:this._name},attributeList:function(){var n=[],r=this.matchedResource();return e("elements").is(r,"element")&&t.isArray(r.attributes)&&(n=n.concat(r.attributes)),s(n.concat(this._attributes))},attribute:function(e,n){if(2==arguments.length){var r=t.indexOf(t.pluck(this._attributes,"name"),e.toLowerCase());~r?this._attributes[r].value=n:this._attributes.push({name:e,value:n})}return(t.find(this.attributeList(),function(t){return t.name==e})||{}).value},matchedResource:function(){return this.data("resource")},index:function(){return this.parent?t.indexOf(this.parent.children,this):-1},_setRepeat:function(e){e?this.repeatCount=parseInt(e,10)||1:this.hasImplicitRepeat=!0},setAbbreviation:function(e){var t=this;this.abbreviation=e=(e||"").replace(/\*(\d+)?$/,function(e,n){return t._setRepeat(n),""});var n=l(e);if(n&&(e=n.element,this.content=this._text=n.text),(n=a(e))&&(e=n.element,this._attributes=n.attributes),(this._name=e)&&!d.test(this._name))throw"Invalid abbreviation"},toString:function(){var n=e("utils"),r=this.start,i=this.end,o=this.content,a=this;t.each(b,function(e){r=e(r,a,"start"),o=e(o,a,"content"),i=e(i,a,"end")});var s=t.map(this.children,function(e){return""+e}).join(""),o=e("abbreviationUtils").insertChildContent(o,s,{keepVariable:!1});return r+n.padString(o,this.padding)+i},hasEmptyChildren:function(){return!!t.find(this.children,function(e){return e.isEmpty()})},hasImplicitName:function(){return!this._name&&!this.isTextNode()},isGroup:function(){return!this.abbreviation},isEmpty:function(){return!this.abbreviation&&!this.children.length},isRepeating:function(){return this.repeatCount>1||this.hasImplicitRepeat},isTextNode:function(){return!this.name()&&!this.attributeList().length},isElement:function(){return!this.isEmpty()&&!this.isTextNode()},deepestChild:function(){if(!this.children.length)return null;for(var e=this;e.children.length;)e=t.last(e.children);return e}},b.push(function(t,n){return e("utils").replaceCounter(t,n.counter)}),{parse:function(e,n){var n=n||{},r=i(e);if(n.contextNode){r._name=n.contextNode.name;var o={};t.each(r._attributes,function(e){o[e.name]=e}),t.each(n.contextNode.attributes,function(e){e.name in o?o[e.name].value=e.value:(e=t.clone(e),r._attributes.push(e),o[e.name]=e)})}return t.each(g,function(e){e(r,n)}),r=c(u(r)),t.each(v,function(e){e(r,n)}),r},AbbreviationNode:n,addPreprocessor:function(e){t.include(g,e)||g.push(e)},removeFilter:function(e){preprocessor=t.without(g,e)},addPostprocessor:function(e){t.include(v,e)||v.push(e)},removePostprocessor:function(e){v=t.without(v,e)},addOutputProcessor:function(e){t.include(b,e)||b.push(e)},removeOutputProcessor:function(e){b=t.without(b,e)},isAllowedChar:function(e){return e+="",f(e)||~">+^[](){}".indexOf(e)}}}),emmet.exec(function(e,t){function n(r,i){var o=e("resources"),a=e("elements"),s=e("abbreviationParser");t.each(t.clone(r.children),function(e){var r=o.getMatchedResource(e,i);if(t.isString(r))e.data("resource",a.create("snippet",r));else if(a.is(r,"reference")){if(r=s.parse(r.data,{syntax:i}),e.repeatCount>1){var l=r.findAll(function(e){return e.hasImplicitRepeat});t.each(l,function(t){t.repeatCount=e.repeatCount,t.hasImplicitRepeat=!1})}var u=r.deepestChild();u&&t.each(e.children,function(e){u.addChild(e)}),t.each(r.children,function(n){t.each(e.attributeList(),function(e){n.attribute(e.name,e.value)})}),e.replace(r.children)}else e.data("resource",r);n(e,i)})}e("abbreviationParser").addPreprocessor(function(e,t){var r=t.syntax||emmet.defaultSyntax();n(e,r)})}),emmet.exec(function(e,t){function n(t){for(var n=e("range"),r=[],t=e("stringStream").create(t);!t.eol();){if("\\"==t.peek())t.next();else if(t.start=t.pos,t.match(s,!0)){r.push(n.create(t.start,s));continue}t.next()}return r}function r(r,i){var o=e("utils"),a=n(r);return a.reverse(),t.each(a,function(e){r=o.replaceSubstring(r,i,e)}),r}function i(e){return n(e.content).length?!0:!!t.find(e.attributeList(),function(e){return!!n(e.value).length})}function o(n,o,a){var s=n.findAll(function(e){return i(e)});i(n)&&s.unshift(n),s.length?t.each(s,function(e){e.content=r(e.content,o),t.each(e._attributes,function(e){e.value=r(e.value,o)})}):(n=n.deepestChild()||n,n.content=a?o:e("abbreviationUtils").insertChildContent(n.content,o))}var a=e("abbreviationParser"),s="$#";a.addPreprocessor(function(n,r){if(r.pastedContent){var i=e("utils"),o=t.map(i.splitByLines(r.pastedContent,!0),i.trim);n.findAll(function(e){return e.hasImplicitRepeat?(e.data("paste",o),e.repeatCount=o.length):void 0})}}),a.addPostprocessor(function(e,n){!e.findAll(function(e){var n=e.data("paste"),r="";return t.isArray(n)?r=n[e.counter-1]:t.isFunction(n)?r=n(e.counter-1,e.content):n&&(r=n),r&&o(e,r,!!e.data("pasteOverwrites")),e.data("paste",null),!!n}).length&&n.pastedContent&&o(e,n.pastedContent)})}),emmet.exec(function(e,t){function n(r){var i=e("tagName");return t.each(r.children,function(e){(e.hasImplicitName()||e.data("forceNameResolving"))&&(e._name=i.resolve(e.parent.name())),n(e)}),r}e("abbreviationParser").addPostprocessor(n)}),emmet.define("cssParser",function(e,t){function n(e){return e!==void 0}function r(){return{"char":l.chnum,line:l.linenum}}function i(e,t,r){var i=l,r=r||{};d.push({charstart:n(r["char"])?r["char"]:i.chnum,charend:n(r.charend)?r.charend:i.chnum,linestart:n(r.line)?r.line:i.linenum,lineend:n(r.lineend)?r.lineend:i.linenum,value:e,type:t||e})}function o(e,t){var r=l,i=t||{},o=n(i["char"])?i["char"]:r.chnum,i=n(i.line)?i.line:r.linenum;return{name:"ParseError",message:e+" at line "+(i+1)+" char "+(o+1),walker:r,tokens:d}}function a(e){var t=l,n=t.ch,o=r(),a=e?e+n:n,n=t.nextChar();for(e&&(o["char"]-=e.length);c(n)||f(n);)a+=n,n=t.nextChar();i(a,"identifier",o)}function s(){var e=l.ch;if(" "===e||"	"===e){for(var t=l.ch,n="",s=r();" "===t||"	"===t;)n+=t,t=l.nextChar();i(n,"white",s)}else{if("/"===e){var d,t=l,e=s=t.ch,h=r();if(d=t.nextChar(),"*"!==d)h.charend=h["char"],h.lineend=h.line,n=i(e,e,h);else{for(;"*"!==s||"/"!==d;)e+=d,s=d,d=t.nextChar();e+=d,t.nextChar(),i(e,"comment",h)}return n}if('"'===e||"'"===e){for(t=l,e=s=n=t.ch,h=r(),n=t.nextChar();n!==s;){if("\n"===n){if(d=t.nextChar(),"\\"!==d)throw o("Unterminated string",h);e+=n+d}else e+="\\"===n?n+t.nextChar():n;n=t.nextChar()}e+=n,t.nextChar(),i(e,"string",h)}else if("("===e){for(t=l,n=t.ch,s=0,e=n,d=r(),n=t.nextChar();")"!==n&&!s;){if("("===n)s++;else if(")"===n)s--;else if(n===!1)throw o("Unterminated brace",d);e+=n,n=t.nextChar()}e+=n,t.nextChar(),i(e,"brace",d)}else{if("-"===e||"."===e||f(e)){n=l,s=n.ch,e=r(),d=s;var p,h="."===d,s=n.nextChar();if(p=!f(s),h&&p)e.charend=e["char"],e.lineend=e.line,t=i(d,".",e);else if("-"===d&&p)t=a("-");else{for(;s!==!1&&(f(s)||!h&&"."===s);)"."===s&&(h=!0),d+=s,s=n.nextChar();i(d,"number",e)}return t}if(c(e))return a();if(u(e))return t=l,e=t.ch,n=r(),d=t.nextChar(),"="===d&&u(e,!0)?(e+=d,i(e,"match",n),t.nextChar(),s=void 0):(n.charend=n["char"]+1,n.lineend=n.line,i(e,e,n)),s;if("\n"!==e)throw o("Unrecognized character");i("line"),l.nextChar()}}}var l,u,c,f,d=[];return l={lines:null,total_lines:0,linenum:-1,line:"",ch:"",chnum:-1,init:function(e){var t=l;t.lines=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"),t.total_lines=t.lines.length,t.chnum=-1,t.linenum=-1,t.ch="",t.line="",t.nextLine(),t.nextChar()},nextLine:function(){return this.linenum+=1,this.line=this.total_lines<=this.linenum?!1:this.lines[this.linenum],-1!==this.chnum&&(this.chnum=0),this.line},nextChar:function(){for(this.chnum+=1;""===this.line.charAt(this.chnum);)return this.nextLine()===!1?this.ch=!1:(this.chnum=-1,this.ch="\n");return this.ch=this.line.charAt(this.chnum)},peek:function(){return this.line.charAt(this.chnum+1)}},c=function(e){return"&"==e||"_"===e||"-"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e},f=function(e){return e!==!1&&e>="0"&&"9">=e},u=function(){for(var e="{}[]()+*=.,;:>~|\\%$#@^!".split(""),t="*^|$~".split(""),n={},r={},i=0;e.length>i;i+=1)n[e[i]]=!0;for(i=0;t.length>i;i+=1)r[t[i]]=!0;return function(e,t){return t?!!r[e]:!!n[e]}}(),{lex:function(e){for(l.init(e),d=[];l.ch!==!1;)s();return d},parse:function(e){var n=0;return t.map(this.lex(e),function(t){return"line"==t.type&&(t.value="\r"==e.charAt(n)&&"\n"==e.charAt(n+1)?"\r\n":e.charAt(n)),{type:t.type,start:n,end:n+=t.value.length}})},toSource:function(e){for(var t,n=0,r=e.length,i="";r>n;n+=1)t=e[n],i+="line"===t.type?"\n":t.value;return i}}}),emmet.define("xmlParser",function(e){function t(e,t){function r(n){return t.tokenize=n,n(e,t)}var a=e.next();if("<"==a){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?r(i("atom","]]>")):null:e.match("--")?r(i("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(o(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=i("meta","?>"),"meta";for(w=e.eat("/")?"closeTag":"openTag",e.eatSpace(),x="";a=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)x+=a;return t.tokenize=n,"tag"}return"&"==a?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),"text")}function n(e,n){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(n.tokenize=t,w=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(w="equals",null):/[\'\"]/.test(i)?(n.tokenize=r(i),n.tokenize(e,n)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function r(e){return function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=n;break}return"string"}}function i(e,n){return function(r,i){for(;!r.eol();){if(r.match(n)){i.tokenize=t;break}r.next()}return e}}function o(e){return function(n,r){for(var i;null!=(i=n.next());){if("<"==i)return r.tokenize=o(e+1),r.tokenize(n,r);if(">"==i){if(1==e){r.tokenize=t;break}return r.tokenize=o(e-1),r.tokenize(n,r)}}return"meta"}}function a(){for(var e=arguments.length-1;e>=0;e--)C.cc.push(arguments[e])}function s(){return a.apply(null,arguments),!0}function l(){C.context&&(C.context=C.context.prev)}function u(e){return"openTag"==e?(C.tagName=x,s(h,c(C.startOfLine))):"closeTag"==e?(e=!1,C.context?C.context.tagName!=x&&(y.implicitlyClosed.hasOwnProperty(C.context.tagName.toLowerCase())&&l(),e=!C.context||C.context.tagName!=x):e=!0,e&&(b="error"),s(f(e))):s()}function c(e){return function(t){if("selfcloseTag"==t||"endTag"==t&&y.autoSelfClosers.hasOwnProperty(C.tagName.toLowerCase()))return d(C.tagName.toLowerCase()),s();if("endTag"==t){d(C.tagName.toLowerCase());var t=C.tagName,n=y.doNotIndent.hasOwnProperty(t)||C.context&&C.context.noIndent;C.context={prev:C.context,tagName:t,indent:C.indented,startOfLine:e,noIndent:n}}return s()}}function f(e){return function(t){return e&&(b="error"),"endTag"==t?(l(),s()):(b="error",s(arguments.callee))}}function d(e){for(var t;C.context&&(t=C.context.tagName.toLowerCase(),y.contextGrabbers.hasOwnProperty(t)&&y.contextGrabbers[t].hasOwnProperty(e));)l()}function h(e){return"word"==e?(b="attribute",s(p,h)):"endTag"==e||"selfcloseTag"==e?a():(b="error",s(h))}function p(e){return"equals"==e?s(m,h):(y.allowMissing||(b="error"),"endTag"==e||"selfcloseTag"==e?a():s())}function m(e){return"string"==e?s(g):"word"==e&&y.allowUnquoted?(b="string",s()):(b="error","endTag"==e||"selfCloseTag"==e?a():s())}function g(e){return"string"==e?s(g):a()}function v(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=0),e.eatSpace())return null;b=w=x=null;var n=t.tokenize(e,t);if(t.type=w,(n||w)&&"comment"!=n)for(C=t;!(t.cc.pop()||u)(w||n););return t.startOfLine=!1,b||n}var b,y={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!0,allowMissing:!0},x=null,w=null,C=null;return{parse:function(n,r){for(var r=r||0,i={tokenize:t,cc:[],indented:0,startOfLine:!0,tagName:null,context:null},o=e("stringStream").create(n),a=[];!o.eol();)a.push({type:v(o,i),start:o.start+r,end:o.pos+r}),o.start=o.pos;return a}}}),emmet.define("string-score",function(){return{score:function(e,t,n){if(e==t)return 1;if(""==t)return 0;for(var r,i,o,a,s,l=0,u=t.length,c=e.length,f=1,d=0;u>d;++d){if(a=t.charAt(d),i=e.indexOf(a.toLowerCase()),o=e.indexOf(a.toUpperCase()),s=Math.min(i,o),o=s>-1?s:Math.max(i,o),-1===o){if(n){f+=1-n;continue}return 0}i=.1,e[o]===a&&(i+=.1),0===o?(i+=.6,0===d&&(r=1)):" "===e.charAt(o-1)&&(i+=.8),e=e.substring(o+1,c),l+=i}return e=l/u,u=(e*(u/c)+e)/2,u/=f,r&&1>u+.15&&(u+=.15),u}}}),emmet.define("utils",function(e,t){function n(e){this._data=[],this.length=0,e&&this.append(e)}var r="${0}";return n.prototype={append:function(e){this._data.push(e),this.length+=e.length},toString:function(){return this._data.join("")},valueOf:function(){return""+this}},{reTag:/<\/?[\w:\-]+(?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*\s*(\/?)>$/,endsWithTag:function(e){return this.reTag.test(e)},isNumeric:function(e){return"string"==typeof e&&(e=e.charCodeAt(0)),e&&e>47&&58>e},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},getNewline:function(){var n=e("resources");return n?(n=n.getVariable("newline"),t.isString(n)?n:"\n"):"\n"},setNewline:function(t){var n=e("resources");n.setVariable("newline",t),n.setVariable("nl",t)},splitByLines:function(e,n){var r=this.getNewline(),r=(e||"").replace(/\r\n/g,"\n").replace(/\n\r/g,"\n").replace(/\r/g,"\n").replace(/\n/g,r).split(r);return n&&(r=t.filter(r,function(e){return e.length&&!!this.trim(e)},this)),r},normalizeNewline:function(e){return this.splitByLines(e).join(this.getNewline())},repeatString:function(e,t){for(var n=[],r=0;t>r;r++)n.push(e);return n.join("")},padString:function(n,r){var i=t.isNumber(r)?this.repeatString(e("resources").getVariable("indentation")||"	",r):r,o=[],a=this.splitByLines(n),s=this.getNewline();
o.push(a[0]);for(var l=1;a.length>l;l++)o.push(s+i+a[l]);return o.join("")},zeroPadString:function(e,t){for(var n="",r=e.length;t>r++;)n+="0";return n+e},unindentString:function(e,t){for(var n=this.splitByLines(e),r=0;n.length>r;r++)0==n[r].search(t)&&(n[r]=n[r].substr(t.length));return n.join(this.getNewline())},replaceUnescapedSymbol:function(e,n,r){for(var i=0,o=e.length,a=n.length,s=0;o>i;)if("\\"==e.charAt(i))i+=a+1;else if(e.substr(i,a)==n){var l=a;s++;var u=r;t.isFunction(r)&&((u=r(e,n,i,s))?(l=u[0].length,u=u[1]):u=!1),u===!1?i++:(e=e.substring(0,i)+u+e.substring(i+l),o=e.length,i+=u.length)}else i++;return e},replaceVariables:function(n,r){var r=r||{},i=t.isFunction(r)?r:function(e,t){return t in r?r[t]:null},o=e("resources");return e("tabStops").processText(n,{variable:function(e){var n=i(e.token,e.name,e);return null===n&&(n=o.getVariable(e.name)),(null===n||t.isUndefined(n))&&(n=e.token),n}})},replaceCounter:function(e,t){var t=t+"",n=this;return this.replaceUnescapedSymbol(e+"","$",function(e,r,i){if("{"==e.charAt(i+1)||n.isNumeric(e.charAt(i+1)))return!1;for(r=i+1;"$"==e.charAt(r)&&"{"!=e.charAt(r+1);)r++;return[e.substring(i,r),n.zeroPadString(t,r-i)]})},matchesTag:function(e){return this.reTag.test(e||"")},escapeText:function(e){return e.replace(/([\$\\])/g,"\\$1")},unescapeText:function(e){return e.replace(/\\(.)/g,"$1")},getCaretPlaceholder:function(){return t.isFunction(r)?r.apply(this,arguments):r},setCaretPlaceholder:function(e){r=e},getLinePadding:function(e){return(e.match(/^(\s+)/)||[""])[0]},getLinePaddingFromPosition:function(e,t){return this.getLinePadding(this.findNewlineBounds(e,t).substring(e))},escapeForRegexp:function(e){return e.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")},prettifyNumber:function(e,t){return e.toFixed(t===void 0?2:t).replace(/\.?0+$/,"")},stringBuilder:function(e){return new n(e)},replaceSubstring:function(e,n,r,i){return t.isObject(r)&&"end"in r&&(i=r.end,r=r.start),t.isString(i)&&(i=r+i.length),t.isUndefined(i)&&(i=r),0>r||r>e.length?e:e.substring(0,r)+n+e.substring(i)},narrowToNonSpace:function(t,n,r){for(n=e("range").create(n,r),r=/[\s\n\r\u00a0]/;n.start<n.end&&r.test(t.charAt(n.start));)n.start++;for(;n.end>n.start;)if(n.end--,!r.test(t.charAt(n.end))){n.end++;break}return n},findNewlineBounds:function(t,n){for(var r=t.length,i=0,o=r-1,a=n-1;a>0;a--){var s=t.charAt(a);if("\n"==s||"\r"==s){i=a+1;break}}for(a=n;r>a;a++)if(s=t.charAt(a),"\n"==s||"\r"==s){o=a;break}return e("range").create(i,o-i)},deepMerge:function(){var e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length;for(!t.isObject(a)&&!t.isFunction(a)&&(a={});l>s;s++)if(null!=(e=arguments[s]))for(n in e)r=a[n],i=e[n],a!==i&&(i&&(t.isObject(i)||(o=t.isArray(i)))?(o?(o=!1,r=r&&t.isArray(r)?r:[]):r=r&&t.isObject(r)?r:{},a[n]=this.deepMerge(r,i)):void 0!==i&&(a[n]=i));return a}}}),emmet.define("range",function(e,t){function n(e,t,n){switch(n){case"eq":case"==":return e===t;case"lt":case"<":return t>e;case"lte":case"<=":return t>=e;case"gt":case">":return e>t;case"gte":case">=":return e>=t}}function r(e,n){t.isObject(e)&&"start"in e?(this.start=Math.min(e.start,e.end),this.end=Math.max(e.start,e.end)):t.isArray(e)?(this.start=e[0],this.end=e[1]):(n=t.isString(n)?n.length:+n,this.start=e,this.end=e+n)}return r.prototype={length:function(){return Math.abs(this.end-this.start)},equal:function(e){return this.cmp(e,"eq","eq")},shift:function(e){return this.start+=e,this.end+=e,this},overlap:function(e){return e.start<=this.end&&e.end>=this.start},intersection:function(e){if(this.overlap(e)){var t=Math.max(e.start,this.start);return new r(t,Math.min(e.end,this.end)-t)}return null},union:function(e){if(this.overlap(e)){var t=Math.min(e.start,this.start);return new r(t,Math.max(e.end,this.end)-t)}return null},inside:function(e){return this.cmp(e,"lte","gt")},contains:function(e){return this.cmp(e,"lt","gt")},include:function(){return this.cmp(loc,"lte","gte")},cmp:function(e,t,i){var o;return e instanceof r?(o=e.start,e=e.end):o=e,n(this.start,o,t||"<=")&&n(this.end,e,i||">")},substring:function(e){return this.length()>0?e.substring(this.start,this.end):""},clone:function(){return new r(this.start,this.length())},toArray:function(){return[this.start,this.end]},toString:function(){return"{"+this.start+", "+this.length()+"}"}},{create:function(e,n){return t.isUndefined(e)||null===e?null:e instanceof r?e:(t.isObject(e)&&"start"in e&&"end"in e&&(n=e.end-e.start,e=e.start),new r(e,n))},create2:function(e,n){return t.isNumber(e)&&t.isNumber(n)&&(n-=e),this.create(e,n)}}}),emmet.define("handlerList",function(e,t){function n(){this._list=[]}return n.prototype={add:function(e,n){this._list.push(t.extend({order:0},n||{},{fn:e}))},remove:function(e){this._list=t.without(this._list,t.find(this._list,function(t){return t.fn===e}))},list:function(){return t.sortBy(this._list,"order").reverse()},listFn:function(){return t.pluck(this.list(),"fn")},exec:function(e,n){var n=n||[],r=null;return t.find(this.list(),function(t){return r=t.fn.apply(t,n),r!==e?!0:void 0}),r}},{create:function(){return new n}}}),emmet.define("tokenIterator",function(e,t){function n(e){this.tokens=e,this._position=0,this.reset()}return n.prototype={next:function(){if(this.hasNext()){var e=this.tokens[++this._i];return this._position=e.start,e}return null},current:function(){return this.tokens[this._i]},position:function(){return this._position},hasNext:function(){return this._i<this._il-1},reset:function(){this._i=-1,this._il=this.tokens.length},item:function(){return this.tokens[this._i]},itemNext:function(){return this.tokens[this._i+1]},itemPrev:function(){return this.tokens[this._i-1]},nextUntil:function(e,n){for(var r,i=t.isString(e)?function(t){return t.type==e}:e;(r=this.next())&&(n&&n.call(this,r),!i.call(this,r)););}},{create:function(e){return new n(e)}}}),emmet.define("stringStream",function(){function e(e){this.pos=this.start=0,this.string=e}return e.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);return("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){return e=this.string.indexOf(e,this.pos),e>-1?(this.pos=e,!0):void 0},skipToPair:function(e,t){for(var n,r=0,i=this.pos,o=this.string.length;o>i;)if(n=this.string.charAt(i++),n==e)r++;else if(n==t&&(r--,1>r))return this.pos=i,!0;return!1},backUp:function(e){this.pos-=e},match:function(e,t,n){return"string"!=typeof e?((e=this.string.slice(this.pos).match(e))&&t!==!1&&(this.pos+=e[0].length),e):(n=n?function(e){return e.toLowerCase()}:function(e){return e},n(this.string).indexOf(n(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0)},current:function(){return this.string.slice(this.start,this.pos)}},{create:function(t){return new e(t)}}}),emmet.define("resources",function(e,t){function n(t,n,r){var o=e("utils"),n=o.replaceUnescapedSymbol(n,"|",o.getCaretPlaceholder());if("snippets"==r)return e("elements").create("snippet",n);if("abbreviations"==r){r=n,e("utils").trim(t);var a,t=e("elements");return(a=i.exec(r))?t.create("element",a[1],a[2],"/"==a[4]):t.create("reference",r)}}var r={},i=/^<(\w+\:?[\w\-]*)((?:\s+[\w\:\-]+\s*=\s*(['"]).*?\3)*)\s*(\/?)>/,o={},a={},s=e("handlerList").create();return{setVocabulary:function(e,t){r={},"system"==t?o=e:a=e},getVocabulary:function(e){return"system"==e?o:a},getMatchedResource:function(e,n){return s.exec(null,t.toArray(arguments))||this.findSnippet(n,e.name())},getVariable:function(e){return(this.getSection("variables")||{})[e]},setVariable:function(e,t){var n=this.getVocabulary("user")||{};"variables"in n||(n.variables={}),n.variables[e]=t,this.setVocabulary(n,"user")},hasSyntax:function(e){return e in this.getVocabulary("user")||e in this.getVocabulary("system")},addResolver:function(e,t){s.add(e,t)},removeResolver:function(e){s.remove(e)},getSection:function(n){if(!n)return null;n in r||(r[n]=e("utils").deepMerge({},o[n],a[n]));for(var i,s=r[n],l=t.rest(arguments);s&&(i=l.shift());){if(!(i in s))return null;s=s[i]}return s},findItem:function(e,t){for(var n=this.getSection(e);n;){if(t in n)return n[t];n=this.getSection(n["extends"])}},findSnippet:function(e,r,i){if(!e||!r)return null;var i=i||[],o=[r];~r.indexOf("-")&&o.push(r.replace(/\-/g,":"));var a=this.getSection(e),s=null;return t.find(["snippets","abbreviations"],function(r){var i=this.getSection(e,r);return i?t.find(o,function(e){return i[e]?s=n(e,i[e],r):void 0}):void 0},this),i.push(e),s||!a["extends"]||t.include(i,a["extends"])?s:this.findSnippet(a["extends"],r,i)},fuzzyFindSnippet:function(n,r,i){var i=i||.3,n=this.getAllSnippets(n),o=e("string-score"),r=r.replace(/:$/,"").replace(/:/g,"-"),a=t.map(n,function(e,t){return{key:t,score:o.score(e.nk,r,.1)}});return(a=t.last(t.sortBy(a,"score")))&&a.score>=i?n[a.key].parsedValue:void 0},getAllSnippets:function(e){var i="all-"+e;if(!r[i]){var o=[],a=[];do{var s=this.getSection(e);if(!s)break;t.each(["snippets","abbreviations"],function(e){var r={};t.each(s[e]||null,function(t,i){r[i]={nk:i.replace(/:$/,"").replace(/:/g,"-"),value:t,parsedValue:n(i,t,e),type:e}}),o.push(r)}),a.push(e),e=s["extends"]}while(e&&!t.include(a,e));r[i]=t.extend.apply(t,o.reverse())}return r[i]}}}),emmet.define("actions",function(e,t){function n(t){return e("utils").trim(t.charAt(0).toUpperCase()+t.substring(1).replace(/_[a-z]/g,function(e){return" "+e.charAt(1).toUpperCase()}))}var r={};return{add:function(e,t,i){e=e.toLowerCase(),i=i||{},i.label||(i.label=n(e)),r[e]={name:e,fn:t,options:i}},get:function(e){return r[e.toLowerCase()]},run:function(e,n){t.isArray(n)||(n=t.rest(arguments));var r=this.get(e);return r?r.fn.apply(emmet,n):(emmet.log('Action "%s" is not defined',e),!1)},getAll:function(){return r},getList:function(){return t.values(this.getAll())},getMenu:function(e){var r=[],e=e||[];return t.each(this.getList(),function(i){if(!i.options.hidden&&!t.include(e,i.name)){var o=n(i.name),a=r;if(i.options.label)for(var s,l,u=i.options.label.split("/"),o=u.pop();s=u.shift();)l=t.find(a,function(e){return"submenu"==e.type&&e.name==s}),l||(l={name:s,type:"submenu",items:[]},a.push(l)),a=l.items;a.push({type:"action",name:i.name,label:o})}}),r},getActionNameForMenuTitle:function(e,n){var r=null;return t.find(n||this.getMenu(),function(t){return"action"!=t.type?r=this.getActionNameForMenuTitle(e,t.items):t.label==e||t.name==e?r=t.name:void 0},this),r||null}}}),emmet.define("profile",function(e,t){function n(e){t.extend(this,s,e)}function r(e,t){switch(((t||"")+"").toLowerCase()){case"lower":return e.toLowerCase();case"upper":return e.toUpperCase()}return e}function i(e,t){return a[e.toLowerCase()]=new n(t)}function o(){i("xhtml"),i("html",{self_closing_tag:!1}),i("xml",{self_closing_tag:!0,tag_nl:!0}),i("plain",{tag_nl:!1,indent:!1,place_cursor:!1}),i("line",{tag_nl:!1,indent:!1,extraFilters:"s"})}var a={},s={tag_case:"asis",attr_case:"asis",attr_quotes:"double",tag_nl:"decide",tag_nl_leaf:!1,place_cursor:!0,indent:!0,inline_break:3,self_closing_tag:"xhtml",filters:"",extraFilters:""};return n.prototype={tagName:function(e){return r(e,this.tag_case)},attributeName:function(e){return r(e,this.attr_case)},attributeQuote:function(){return"single"==this.attr_quotes?"'":'"'},selfClosing:function(){return"xhtml"==this.self_closing_tag?" /":this.self_closing_tag===!0?"/":""},cursor:function(){return this.place_cursor?e("utils").getCaretPlaceholder():""}},o(),{create:function(e,r){return 2==arguments.length?i(e,r):new n(t.defaults(e||{},s))},get:function(r,i){if(!r&&i){var o=e("resources").findItem(i,"profile");o&&(r=o)}return r?r instanceof n?r:t.isString(r)&&r.toLowerCase()in a?a[r.toLowerCase()]:this.create(r):a.plain},remove:function(e){e=(e||"").toLowerCase(),e in a&&delete a[e]},reset:function(){a={},o()},stringCase:r}}),emmet.define("editorUtils",function(e){return{isInsideTag:function(e,t){for(var n=/^<\/?\w[\w\:\-]*.*?>/,r=t;r>-1&&"<"!=e.charAt(r);)r--;return-1!=r&&(n=n.exec(e.substring(r)))&&t>r&&r+n[0].length>t?!0:!1},outputInfo:function(e,t,n){return n=n||e.getProfileName(),{syntax:(t||e.getSyntax())+"",profile:n?n+"":null,content:e.getContent()+""}},unindent:function(t,n){return e("utils").unindentString(n,this.getCurrentLinePadding(t))},getCurrentLinePadding:function(t){return e("utils").getLinePadding(t.getCurrentLine())}}}),emmet.define("actionUtils",function(e){return{mimeTypes:{gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",html:"text/html",htm:"text/html"},extractAbbreviation:function(t){for(var n=t.length,r=-1,i=0,o=0,a=0,s=e("utils"),l=e("abbreviationParser");;){if(n--,0>n){r=0;break}var u=t.charAt(n);if("]"==u)o++;else if("["==u){if(!o){r=n+1;break}o--}else if("}"==u)a++;else if("{"==u){if(!a){r=n+1;break}a--}else if(")"==u)i++;else if("("==u){if(!i){r=n+1;break}i--}else if(!o&&!a&&(!l.isAllowedChar(u)||">"==u&&s.endsWithTag(t.substring(0,n+1)))){r=n+1;break}}return-1==r||a||o||i?"":t.substring(r).replace(/^[\*\+\>\^]+/,"")},getImageSize:function(e){var t=function(){return e.charCodeAt(n++)};if("PNG\r\n\n"===e.substr(0,8)){var n=e.indexOf("IHDR")+4;return{width:t()<<24|t()<<16|t()<<8|t(),height:t()<<24|t()<<16|t()<<8|t()}}if("GIF8"===e.substr(0,4))return n=6,{width:t()|t()<<8,height:t()|t()<<8};if("ÿØ"===e.substr(0,2))for(var n=2,r=e.length;r>n&&255==t();){var i=t();if(218==i)break;var o=t()<<8|t();if(!(!(i>=192&&207>=i)||4&i||8&i))return n+=1,{height:t()<<8|t(),width:t()<<8|t()};n+=o-2}},captureContext:function(t){if(t.getSyntax()+""in{html:1,xml:1,xsl:1}){var n=t.getContent()+"",r=e("htmlMatcher").find(n,t.getCaretPos());if(r&&"tag"==r.type){for(var i,t=/([\w\-:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,r=r.open,n=r.range.substring(n).replace(/^<[\w\-\:]+/,""),r={name:r.name,attributes:[]};i=t.exec(n);)r.attributes.push({name:i[1],value:i[2]});return r}}return null},findExpressionBounds:function(t,n){for(var r=t.getContent()+"",i=r.length,o=t.getCaretPos()-1,a=o+1;o>=0&&n(r.charAt(o),o,r);)o--;for(;i>a&&n(r.charAt(a),a,r);)a++;return a>o?e("range").create([++o,a]):void 0},compoundUpdate:function(e,t){if(t){var n=e.getSelectionRange();return e.replaceContent(t.data,t.start,t.end,!0),e.createSelection(t.caret,t.caret+n.end-n.start),!0}return!1},detectSyntax:function(t,n){var r=n||"html";return e("resources").hasSyntax(r)||(r="html"),"html"==r&&(this.isStyle(t)||this.isInlineCSS(t))&&(r="css"),r},detectProfile:function(t){var n=t.getSyntax(),r=e("resources").findItem(n,"profile");if(r)return r;switch(n){case"xml":case"xsl":return"xml";case"css":if(this.isInlineCSS(t))return"line";break;case"html":return(r=e("resources").getVariable("profile"))||(r=this.isXHTML(t)?"xhtml":"html"),r}return"xhtml"},isXHTML:function(e){return-1!=e.getContent().search(/<!DOCTYPE[^>]+XHTML/i)},isStyle:function(t){var n=t.getContent()+"",t=t.getCaretPos();return(n=e("htmlMatcher").tag(n,t))&&"style"==n.open.name.toLowerCase()&&n.innerRange.cmp(t,"lte","gte")},isInlineCSS:function(t){var n=t.getContent()+"",t=t.getCaretPos();return(n=e("xmlEditTree").parseFromPosition(n,t,!0))?(n=n.itemFromPosition(t,!0))&&"style"==n.name().toLowerCase()&&n.valueRange(!0).cmp(t,"lte","gte"):!1}}}),emmet.define("abbreviationUtils",function(e,t){return{isSnippet:function(t){return e("elements").is(t.matchedResource(),"snippet")},isUnary:function(t){var n=t.matchedResource();return t.children.length||this.isSnippet(t)?!1:n&&n.is_empty||e("tagName").isEmptyElement(t.name())},isInline:function(t){return t.isTextNode()||!t.name()||e("tagName").isInlineLevel(t.name())},isBlock:function(e){return this.isSnippet(e)||!this.isInline(e)},isSnippet:function(t){return e("elements").is(t.matchedResource(),"snippet")},hasTagsInContent:function(t){return e("utils").matchesTag(t.content)},hasBlockChildren:function(e){return this.hasTagsInContent(e)&&this.isBlock(e)||t.any(e.children,function(e){return this.isBlock(e)},this)},insertChildContent:function(n,r,i){var i=t.extend({keepVariable:!0,appendIfNoChild:!0},i||{}),o=!1,a=e("utils"),n=a.replaceVariables(n,function(e,t,s){var l=e;return"child"==t&&(l=a.padString(r,a.getLinePaddingFromPosition(n,s.start)),o=!0,i.keepVariable&&(l+=e)),l});return!o&&i.appendIfNoChild&&(n+=r),n}}}),emmet.define("base64",function(){return{encode:function(e){for(var t,n,r,i,o,a,s=[],l=0,u=e.length;u>l;)i=e.charCodeAt(l++),o=e.charCodeAt(l++),a=e.charCodeAt(l++),t=255&i,n=255&o,r=255&a,i=t>>2,t=(3&t)<<4|n>>4,n=(15&n)<<2|r>>6,r&=63,isNaN(o)?n=r=64:isNaN(a)&&(r=64),s.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r));return s.join("")},decode:function(e){var t,n,r,i,o,a=0,s=0,l=[],u=e.length;if(!e)return e;e+="";do t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),r=t<<18|n<<12|i<<6|o,t=255&r>>16,n=255&r>>8,r&=255,l[s++]=64==i?String.fromCharCode(t):64==o?String.fromCharCode(t,n):String.fromCharCode(t,n,r);while(u>a);return l.join("")}}}),emmet.define("htmlMatcher",function(e,t){function n(t){var n,r={};return{open:function(e){return(e=this.matches(e))&&"open"==e.type?e:null},close:function(e){return(e=this.matches(e))&&"close"==e.type?e:null},matches:function(i){var s="p"+i;if(!(s in r)&&"<"==t.charAt(i)){var l=t.slice(i);r[s]=(n=l.match(o))?{name:n[1],selfClose:!!n[3],range:e("range").create(i,n[0]),type:"open"}:(n=l.match(a))?{name:n[1],range:e("range").create(i,n[0]),type:"close"}:!1}return r[s]},text:function(){return t}}}function r(e,t,n){return e.substring(t,t+n.length)==n}function i(e,n){for(var i=[],o=null,a=n.text(),s=e.range.end,l=a.length;l>s;s++){if(r(a,s,"<!--"))for(o=s;l>o;o++)if(r(a,o,"-->")){s=o+3;break}if(o=n.matches(s))if("open"!=o.type||o.selfClose){if("close"==o.type){if(!i.length)return o.name==e.name?o:null;if(t.last(i)==o.name)i.pop();else{for(var u=!1;i.length&&!u;)i.pop()==o.name&&(u=!0);if(!i.length&&!u)return o.name==e.name?o:null}}}else i.push(o.name)}}var o=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,a=/^<\/([\w\:\-]+)[^>]*>/;return{find:function(o,a){for(var s=e("range"),l=n(o),u=null,c=null,f=a;f>=0;f--)if(u=l.open(f)){if(u.selfClose&&u.range.cmp(a,"lt","gt"))break;if(c=i(u,l)){if(s.create2(u.range.start,c.range.end).contains(a))break}else if(u.range.contains(a))break;u=null}else if(r(o,f,"-->")){for(var d=f-1;d>=0&&!r(o,d,"-->");d--)if(r(o,d,"<!--")){f=d;break}}else if(r(o,f,"<!--")){for(d=f+4,u=o.length;u>d;d++)if(r(o,d,"-->")){d+=3;break}u={range:e("range").create(f,t.isNumber(d)?d-f:d[0]),type:"comment"};break}return u?(d=f=null,c?(f=s.create2(u.range.start,c.range.end),d=s.create2(u.range.end,c.range.start)):f=d=s.create2(u.range.start,u.range.end),"comment"==u.type&&(s=f.substring(o),d.start+=s.length-s.replace(/^<\!--\s*/,"").length,d.end-=s.length-s.replace(/\s*--\>$/,"").length),{open:u,close:c,type:"comment"==u.type?"comment":"tag",innerRange:d,innerContent:function(){return this.innerRange.substring(o)},outerRange:f,outerContent:function(){return this.outerRange.substring(o)},range:d.length()&&d.cmp(a,"lte","gte")?d:f,content:function(){return this.range.substring(o)},source:o}):void 0},tag:function(e,t){var n=this.find(e,t);return n&&"tag"==n.type?n:void 0}}}),emmet.define("tabStops",function(e,t){var n=100,r=0,i={replaceCarets:!1,escape:function(e){return"\\"+e},tabstop:function(e){return e.token},variable:function(e){return e.token}};return e("abbreviationParser").addOutputProcessor(function(t,n){var i=0,o=e("tabStops"),a=e("utils"),s={tabstop:function(e){var t=parseInt(e.group);return 0==t?"${0}":(t>i&&(i=t),e.placeholder?(t+=r,e=o.processText(e.placeholder,s),"${"+t+":"+e+"}"):"${"+(t+r)+"}")}},t=o.processText(t,s),t=a.replaceVariables(t,o.variablesResolver(n));return r+=i+1,t}),{extract:function(n,r){var o=e("utils"),a={carets:""},s=[],r=t.extend({},i,r,{tabstop:function(e){var t=e.token,n="";return"cursor"==e.placeholder?s.push({start:e.start,end:e.start+t.length,group:"carets",value:""}):("placeholder"in e&&(a[e.group]=e.placeholder),e.group in a&&(n=a[e.group]),s.push({start:e.start,end:e.start+t.length,group:e.group,value:n})),t}});r.replaceCarets&&(n=n.replace(RegExp(o.escapeForRegexp(o.getCaretPlaceholder()),"g"),"${0:cursor}"));var n=this.processText(n,r),l=o.stringBuilder(),u=0,o=t.map(s,function(e){l.append(n.substring(u,e.start));var t=l.length,r=a[e.group]||"";return l.append(r),u=e.end,{group:e.group,start:t,end:t+r.length}});return l.append(n.substring(u)),{text:""+l,tabstops:t.sortBy(o,"start")}},processText:function(n,r){for(var o,a,r=t.extend({},i,r),s=e("utils").stringBuilder(),l=e("stringStream").create(n);o=l.next();)"\\"!=o||l.eol()?(a=o,"$"==o&&(l.start=l.pos-1,l.match(/^[0-9]+/)?a=r.tabstop({start:s.length,group:l.current().substr(1),token:l.current()}):(o=l.match(/^\{([a-z_\-][\w\-]*)\}/))?a=r.variable({start:s.length,name:o[1],token:l.current()}):(o=l.match(/^\{([0-9]+)(:.+?)?\}/,!1))&&(l.skipToPair("{","}"),a={start:s.length,group:o[1],token:l.current()},(o=a.token.substring(a.group.length+2,a.token.length-1))&&(a.placeholder=o.substr(1)),a=r.tabstop(a))),s.append(a)):s.append(r.escape(l.next()));return""+s},upgrade:function(e,n){var r=0,i={tabstop:function(e){var t=parseInt(e.group);return t>r&&(r=t),e.placeholder?"${"+(t+n)+":"+e.placeholder+"}":"${"+(t+n)+"}"}};return t.each(["start","end","content"],function(t){e[t]=this.processText(e[t],i)},this),r},variablesResolver:function(r){var i={},o=e("resources");return function(a,s){if("child"==s)return a;if("cursor"==s)return e("utils").getCaretPlaceholder();var l=r.attribute(s);return t.isUndefined(l)?(l=o.getVariable(s))?l:(i[s]||(i[s]=n++),"${"+i[s]+":"+s+"}"):l}},resetPlaceholderCounter:function(){console.log("deprecated"),n=100},resetTabstopIndex:function(){r=0,n=100}}}),emmet.define("preferences",function(e,t){var n={},r={},i=null,o=null;return{define:function(e,n,i){var o=e;t.isString(e)&&(o={},o[e]={value:n,description:i}),t.each(o,function(e,n){r[n]=t.isObject(e)&&"value"in e&&3>t.keys(e).length?e:{value:e}})},set:function(e,i){var o=e;t.isString(e)&&(o={},o[e]=i),t.each(o,function(e,i){if(!(i in r))throw'Property "'+i+'" is not defined. You should define it first with `define` method of current module';if(e!==r[i].value){switch(typeof r[i].value){case"boolean":var o=e;t.isString(o)?(o=o.toLowerCase(),e="yes"==o||"true"==o||"1"==o):e=!!o;break;case"number":e=parseInt(e+"",10)||0;break;default:e+=""}n[i]=e}else i in n&&delete n[i]})},get:function(e){return e in n?n[e]:e in r?r[e].value:void 0},getArray:function(n){return n=this.get(n),t.isUndefined(n)||(n=t.map(n.split(","),e("utils").trim),n.length||(n=null)),n},getDict:function(e){var n={};return t.each(this.getArray(e),function(e){e=e.split(":"),n[e[0]]=e[1]}),n},description:function(e){return e in r?r[e].description:void 0},remove:function(e){t.isArray(e)||(e=[e]),t.each(e,function(e){e in n&&delete n[e],e in r&&delete r[e]})},list:function(){return t.map(t.keys(r).sort(),function(e){return{name:e,value:this.get(e),type:typeof r[e].value,description:r[e].description}},this)},load:function(e){t.each(e,function(e,t){this.set(t,e)},this)},exportModified:function(){return t.clone(n)},reset:function(){n={}},_startTest:function(){i=r,o=n,r={},n={}},_stopTest:function(){r=i,n=o}}}),emmet.define("filters",function(e,t){function n(e){return e?t.isString(e)?e.split(/[\|,]/g):e:[]}var r={};return{add:function(e,t){r[e]=t},apply:function(i,o,a){var s=e("utils"),a=e("profile").get(a);return t.each(n(o),function(e){(e=s.trim(e.toLowerCase()))&&e in r&&(i=r[e](i,a))}),i},composeList:function(t,r,i){return r=e("profile").get(r),t=n(r.filters||e("resources").findItem(t,"filters")||"html"),r.extraFilters&&(t=t.concat(n(r.extraFilters))),i&&(t=t.concat(n(i))),t&&t.length||(t=n("html")),t},extractFromAbbreviation:function(e){var t="",e=e.replace(/\|([\w\|\-]+)$/,function(e,n){return t=n,""});return[e,n(t)]}}}),emmet.define("elements",function(e,t){function n(e){return{data:e}}var r={},i=/([\w\-]+)\s*=\s*(['"])(.*?)\2/g,o={add:function(e,t){var n=this;r[e]=function(){var r=t.apply(n,arguments);return r&&(r.type=e),r}},get:function(e){return r[e]},create:function(e){var t=[].slice.call(arguments,1),n=this.get(e);return n?n.apply(this,t):null},is:function(e,t){return e&&e.type===t}};return o.add("element",function(e,n,r){var o={name:e,is_empty:!!r};if(n)if(o.attributes=[],t.isArray(n))o.attributes=n;else if(t.isString(n))for(;e=i.exec(n);)o.attributes.push({name:e[1],value:e[3]});else t.each(n,function(e,t){o.attributes.push({name:t,value:e})});return o}),o.add("snippet",n),o.add("reference",n),o.add("empty",function(){return{}}),o}),emmet.define("editTree",function(e,t,n){function r(e,n){this.options=t.extend({offset:0},n),this.source=e,this._children=[],this._positions={name:0},this.initialize.apply(this,arguments)}function i(e,t,n){this.parent=e,this._name=t.value,this._value=n?n.value:"",this._positions={name:t.start,value:n?n.start:-1},this.initialize.apply(this,arguments)}var o=e("range").create;return r.extend=n.extend,r.prototype={initialize:function(){},_updateSource:function(n,r,i){var a=o(r,t.isUndefined(i)?0:i-r),s=n.length-a.length(),l=function(e){t.each(e,function(t,n){t>=a.end&&(e[n]+=s)})};l(this._positions),t.each(this.list(),function(e){l(e._positions)}),this.source=e("utils").replaceSubstring(this.source,n,a)},add:function(e,t){var n=new i(e,t);return this._children.push(n),n},get:function(e){return t.isNumber(e)?this.list()[e]:t.isString(e)?t.find(this.list(),function(t){return t.name()===e}):e},getAll:function(e){t.isArray(e)||(e=[e]);var n=[],r=[];return t.each(e,function(e){t.isString(e)?n.push(e):t.isNumber(e)&&r.push(e)}),t.filter(this.list(),function(e,i){return t.include(r,i)||t.include(n,e.name())})},value:function(e,n,r){var i=this.get(e);return i?i.value(n):t.isUndefined(n)?void 0:this.add(e,n,r)},values:function(e){return t.map(this.getAll(e),function(e){return e.value()})},remove:function(e){(e=this.get(e))&&(this._updateSource("",e.fullRange()),this._children=t.without(this._children,e))},list:function(){return this._children},indexOf:function(e){return t.indexOf(this.list(),this.get(e))},name:function(e){return t.isUndefined(e)||this._name===(e+="")||(this._updateSource(e,this._positions.name,this._positions.name+this._name.length),this._name=e),this._name},nameRange:function(e){return o(this._positions.name+(e?this.options.offset:0),this.name())},range:function(e){return o(e?this.options.offset:0,""+this)},itemFromPosition:function(e,n){return t.find(this.list(),function(t){return t.range(n).inside(e)})},toString:function(){return this.source}},i.extend=n.extend,i.prototype={initialize:function(){},_pos:function(e,t){return e+(t?this.parent.options.offset:0)},value:function(e){return t.isUndefined(e)||this._value===(e+="")||(this.parent._updateSource(e,this.valueRange()),this._value=e),this._value},name:function(e){return t.isUndefined(e)||this._name===(e+="")||(this.parent._updateSource(e,this.nameRange()),this._name=e),this._name},namePosition:function(e){return this._pos(this._positions.name,e)},valuePosition:function(e){return this._pos(this._positions.value,e)},range:function(e){return o(this.namePosition(e),""+this)},fullRange:function(e){return this.range(e)},nameRange:function(e){return o(this.namePosition(e),this.name())},valueRange:function(e){return o(this.valuePosition(e),this.value())},toString:function(){return this.name()+this.value()},valueOf:function(){return""+this}},{EditContainer:r,EditElement:i,createToken:function(e,t,n){return e={start:e||0,value:t||"",type:n},e.end=e.start+e.value.length,e}}}),emmet.define("cssEditTree",function(e,t){function n(t,n){return e("range").create(t,n)}function r(e,n){var n=n||s|l,r=["white","line"];if((n&l)==l)for(;e.length&&t.include(r,t.last(e).type);)e.pop();if((n&s)==s)for(;e.length&&t.include(r,e[0].type);)e.shift();return e}function i(e){var i,o,a=["white","line",":"],u=[];for(e.nextUntil(function(){return!t.include(a,this.itemNext().type)}),o=e.current().end;i=e.next();){if("}"==i.type||";"==i.type)return r(u,s|("}"==i.type?l:0)),u.length?(o=u[0].start,e=t.last(u).end):e=o,n(o,e-o);u.push(i)}return u.length?n(u[0].start,t.last(u).end-u[0].start):void 0}function o(r){var i=e("stringStream").create(r),o=[],a=/[\s\u00a0,]/,s=function(){i.next(),o.push(n(i.start,i.current())),i.start=i.pos};for(i.eatSpace(),i.start=i.pos;r=i.next();)if('"'==r||"'"==r){if(i.next(),!i.skipTo(r))break;s()}else if("("==r){if(i.backUp(1),!i.skipToPair("(",")"))break;i.backUp(1),s()}else a.test(r)&&(o.push(n(i.start,i.current().length-1)),i.eatWhile(a),i.start=i.pos);return s(),t.chain(o).filter(function(e){return!!e.length()}).uniq(!1,function(e){return""+e}).value()}var a={styleBefore:"\n	",styleSeparator:": ",offset:0},s=1,l=2,u=e("editTree").EditContainer.extend({initialize:function(o){t.defaults(this.options,a);var s,l,u=e("editTree"),f=e("tokenIterator").create(e("cssParser").parse(o)),d=[];for(s=f.position();(l=f.next())&&"{"!=l.type;)d.push(l);if(r(d),d.length?(s=d[0].start,d=t.last(d).end):d=s,s=n(s,d-s),this._positions.name=s.start,this._name=s.substring(o),!f.current()||"{"!=f.current().type)throw"Invalid CSS rule";for(this._positions.contentStart=f.position()+1;s=f.next();){if(d="identifier"==s.type)e:{d=f.tokens,l=f._i+1;for(var h=d.length;h>l;l++){if(":"==d[l].type){d=!0;break e}if("identifier"==d[l].type||"line"==d[l].type){d=!1;break e}}d=!1}d&&(s=n(s),d=i(f),l=f.current()&&";"==f.current().type?n(f.current()):n(d.end,0),this._children.push(new c(this,u.createToken(s.start,s.substring(o)),u.createToken(d.start,d.substring(o)),u.createToken(l.start,l.substring(o)))))}this._saveStyle()},_saveStyle:function(){var n=this._positions.contentStart,r=this.source,i=e("utils");t.each(this.list(),function(e){e.styleBefore=r.substring(n,e.namePosition());var o=i.splitByLines(e.styleBefore);o.length>1&&(e.styleBefore="\n"+t.last(o)),e.styleSeparator=r.substring(e.nameRange().end,e.valuePosition()),e.styleBefore=t.last(e.styleBefore.split("*/")),e.styleSeparator=e.styleSeparator.replace(/\/\*.*?\*\//g,""),n=e.range().end})},add:function(n,r,i){var o=this.list(),a=this._positions.contentStart,s=t.pick(this.options,"styleBefore","styleSeparator"),l=e("editTree");t.isUndefined(i)&&(i=o.length);var u=o[i];return u?a=u.fullRange().start:(u=o[i-1])&&(u.end(";"),a=u.range().end),u&&(s=t.pick(u,"styleBefore","styleSeparator")),n=l.createToken(a+s.styleBefore.length,n),r=l.createToken(n.end+s.styleSeparator.length,r),l=new c(this,n,r,l.createToken(r.end,";")),t.extend(l,s),this._updateSource(l.styleBefore+(""+l),a),this._children.splice(i,0,l),l}}),c=e("editTree").EditElement.extend({initialize:function(e,t,n,r){this.styleBefore=e.options.styleBefore,this.styleSeparator=e.options.styleSeparator,this._end=r.value,this._positions.end=r.start},valueParts:function(e){var n=o(this.value());if(e){var r=this.valuePosition(!0);t.each(n,function(e){e.shift(r)})}return n},end:function(e){return t.isUndefined(e)||this._end===e||(this.parent._updateSource(e,this._positions.end,this._positions.end+this._end.length),this._end=e),this._end
},fullRange:function(e){return e=this.range(e),e.start-=this.styleBefore.length,e},toString:function(){return this.name()+this.styleSeparator+this.value()+this.end()}});return{parse:function(e,t){return new u(e,t)},parseFromPosition:function(e,t,n){return n=this.extractRule(e,t,n),n&&n.inside(t)?this.parse(n.substring(e),{offset:n.start}):null},extractRule:function(t,n,r){for(var i,o="",a=t.length,s=-1;n>=0;){if(i=t.charAt(n),"{"==i){s=n;break}if("}"==i&&!r){n++;break}n--}for(;a>n;){if(i=t.charAt(n),"{"==i)s=n;else if("}"==i){-1!=s&&(o=t.substring(s,n+1));break}n++}if(o){for(n=s-1,r="";n>=0&&(i=t.charAt(n),-1=="{}/\\<>\n\r".indexOf(i));)n--;return r=t.substring(n+1,s).replace(/^[\s\n\r]+/m,""),e("range").create(s-r.length,o.length+r.length)}return null},baseName:function(e){return e.replace(/^\s*\-\w+\-/,"")},findParts:o}}),emmet.define("xmlEditTree",function(e,t){var n={styleBefore:" ",styleSeparator:"=",styleQuote:'"',offset:0},r=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/m,i=e("editTree").EditContainer.extend({initialize:function(r){t.defaults(this.options,n),this._positions.name=1;var i=null,a=e("xmlParser").parse(r),s=e("range");t.each(a,function(e){switch(e.value=s.create(e).substring(r),e.type){case"tag":/^<[^\/]+/.test(e.value)&&(this._name=e.value.substring(1));break;case"attribute":i&&this._children.push(new o(this,i)),i=e;break;case"string":this._children.push(new o(this,i,e)),i=null}},this),i&&this._children.push(new o(this,i)),this._saveStyle()},_saveStyle:function(){var e=this.nameRange().end,n=this.source;t.each(this.list(),function(t){t.styleBefore=n.substring(e,t.namePosition()),-1!==t.valuePosition()&&(t.styleSeparator=n.substring(t.namePosition()+t.name().length,t.valuePosition()-t.styleQuote.length)),e=t.range().end})},add:function(n,r,i){var a=this.list(),s=this.nameRange().end,l=e("editTree"),u=t.pick(this.options,"styleBefore","styleSeparator","styleQuote");t.isUndefined(i)&&(i=a.length);var c=a[i];return c?s=c.fullRange().start:(c=a[i-1])&&(s=c.range().end),c&&(u=t.pick(c,"styleBefore","styleSeparator","styleQuote")),r=u.styleQuote+r+u.styleQuote,n=new o(this,l.createToken(s+u.styleBefore.length,n),l.createToken(s+u.styleBefore.length+n.length+u.styleSeparator.length,r)),t.extend(n,u),this._updateSource(n.styleBefore+(""+n),s),this._children.splice(i,0,n),n}}),o=e("editTree").EditElement.extend({initialize:function(e,t,n){this.styleBefore=e.options.styleBefore,this.styleSeparator=e.options.styleSeparator,t="",e=e.options.styleQuote,n&&(t=n.value,e=t.charAt(0),'"'==e||"'"==e?t=t.substring(1):e="",e&&t.charAt(t.length-1)==e&&(t=t.substring(0,t.length-1))),this.styleQuote=e,this._value=t,this._positions.value=n?n.start+e.length:-1},fullRange:function(e){return e=this.range(e),e.start-=this.styleBefore.length,e},toString:function(){return this.name()+this.styleSeparator+this.styleQuote+this.value()+this.styleQuote}});return{parse:function(e,t){return new i(e,t)},parseFromPosition:function(e,t,n){return n=this.extractTag(e,t,n),n&&n.inside(t)?this.parse(n.substring(e),{offset:n.start}):null},extractTag:function(t,n,i){var o,a=t.length,s=e("range"),l=Math.min(2e3,a),u=null,c=function(e){var n;return"<"==t.charAt(e)&&(n=t.substr(e,l).match(r))?s.create(e,n[0]):void 0};for(o=n;o>=0&&!(u=c(o));o--);if(u&&(u.inside(n)||i))return u;if(!u&&i)return null;for(o=n;a>o;o++)if(u=c(o))return u}}}),emmet.define("expandAbbreviation",function(e,t){var n=e("handlerList").create(),r=null,i=e("actions");return i.add("expand_abbreviation",function(r,i,o){var a=t.toArray(arguments),s=e("editorUtils").outputInfo(r,i,o);return a[1]=s.syntax,a[2]=s.profile,n.exec(!1,a)}),i.add("expand_abbreviation_with_tab",function(t,n,r){var o=t.getSelection(),a=e("resources").getVariable("indentation");return o?(r=e("utils"),n=e("range").create(t.getSelectionRange()),o=r.padString(o,a),t.replaceContent(a+"${0}",t.getCaretPos()),a=e("range").create(t.getCaretPos(),n.length()),t.replaceContent(o,a.start,a.end,!0),t.createSelection(a.start,a.start+o.length),!0):(i.run("expand_abbreviation",t,n,r)||t.replaceContent(a,t.getCaretPos()),!0)},{hidden:!0}),n.add(function(t,n,i){var o=t.getSelectionRange().end,a=r.findAbbreviation(t);return a&&(n=emmet.expandAbbreviation(a,n,i,e("actionUtils").captureContext(t)))?(t.replaceContent(n,o-a.length,o),!0):!1},{order:-1}),r={addHandler:function(e,t){n.add(e,t)},removeHandler:function(e){n.remove(e,options)},findAbbreviation:function(t){var n=e("range").create(t.getSelectionRange()),r=t.getContent()+"";return n.length()?n.substring(r):(t=t.getCurrentLineRange(),e("actionUtils").extractAbbreviation(r.substring(t.start,n.start)))}}}),emmet.define("wrapWithAbbreviation",function(e){var t=null;return e("actions").add("wrap_with_abbreviation",function(n,r,i,o){var i=e("editorUtils").outputInfo(n,i,o),a=e("utils"),o=e("editorUtils"),r=r||n.prompt("Enter abbreviation");if(!r)return null;var r=r+"",s=e("range").create(n.getSelectionRange());if(!s.length()){if(s=e("htmlMatcher").tag(i.content,s.start),!s)return!1;s=a.narrowToNonSpace(i.content,s.range)}return a=a.escapeText(s.substring(i.content)),(r=t.wrap(r,o.unindent(n,a),i.syntax,i.profile,e("actionUtils").captureContext(n)))?(n.replaceContent(r,s.start,s.end),!0):!1}),t={wrap:function(t,n,r,i,o){var a=e("filters"),s=e("utils"),r=r||emmet.defaultSyntax(),i=e("profile").get(i,r);return e("tabStops").resetTabstopIndex(),t=a.extractFromAbbreviation(t),(n=e("abbreviationParser").parse(t[0],{syntax:r,pastedContent:n,contextNode:o}))?(r=a.composeList(r,i,t[1]),a.apply(n,r,i),s.replaceVariables(""+n)):null}}}),emmet.exec(function(e,t){function n(e,n){var r=n-(e.options.offset||0),i=/^[\s\n\r]/;return t.find(e.list(),function(t){return t.range().end===r?i.test(e.source.charAt(r)):t.range().inside(r)})}function r(t,n,r,i){for(var o=-1,a=-1;n--;)if(t.substr(n,r.length)==r){o=n;break}if(-1!=o)for(n=o,r=t.length;r>=n++;)if(t.substr(n,i.length)==i){a=n+i.length;break}return-1!=o&&-1!=a?e("range").create(o,a-o):null}function i(t,n,i,o){function a(e){return e.replace(RegExp("^"+f.escapeForRegexp(n)+"\\s*"),function(e){return u-=e.length,""}).replace(RegExp("\\s*"+f.escapeForRegexp(i)+"$"),"")}var s=e("editorUtils"),l=s.outputInfo(t).content,u=t.getCaretPos(),c=null,f=e("utils");return(c=r(l,u,n,i))&&c.overlap(o)?(o=c,c=a(o.substring(l))):(c=n+" "+o.substring(l).replace(RegExp(f.escapeForRegexp(n)+"\\s*|\\s*"+f.escapeForRegexp(i),"g"),"")+" "+i,u+=n.length+1),null!==c?(c=f.escapeText(c),t.setCaretPos(o.start),t.replaceContent(s.unindent(t,c),o.start,o.end),t.setCaretPos(u),!0):!1}e("actions").add("toggle_comment",function(t){var r=e("editorUtils").outputInfo(t);if("css"==r.syntax){var o=t.getCaretPos(),a=e("htmlMatcher").tag(r.content,o);a&&a.open.range.inside(o)&&(r.syntax="html")}return"css"==r.syntax?(a=e("range").create(t.getSelectionRange()),r=e("editorUtils").outputInfo(t),!a.length()&&(o=e("cssEditTree").parseFromPosition(r.content,t.getCaretPos()))&&(a=(a=n(o,t.getCaretPos()))?a.range(!0):e("range").create(o.nameRange(!0).start,o.source)),a.length()||(a=e("range").create(t.getCurrentLineRange()),e("utils").narrowToNonSpace(r.content,a)),t=i(t,"/*","*/",a)):(r=e("range").create(t.getSelectionRange()),o=e("editorUtils").outputInfo(t),!r.length()&&(o=e("htmlMatcher").tag(o.content,t.getCaretPos()))&&(r=o.outerRange),t=i(t,"<!--","-->",r)),t})}),emmet.exec(function(e){function t(e,t,n){function r(e){for(var t=e;t>=0;){var n=i.charAt(t);if("\n"==n||"\r"==n)break;t--}return i.substring(t,e)}for(var t=t||1,n=e.getCaretPos()+(n||0),i=e.getContent()+"",e=i.length,o=-1,a=/^\s+$/;e>=n&&n>=0;){n+=t;var s=i.charAt(n),l=i.charAt(n+1),u=i.charAt(n-1);switch(s){case'"':case"'":l==s&&"="==u&&(o=n+1);break;case">":"<"==l&&(o=n+1);break;case"\n":case"\r":a.test(r(n-1))&&(o=n)}if(-1!=o)break}return o}e=e("actions"),e.add("prev_edit_point",function(e){var n=e.getCaretPos(),r=t(e,-1);return r==n&&(r=t(e,-1,-2)),-1!=r?(e.setCaretPos(r),!0):!1},{label:"Previous Edit Point"}),e.add("next_edit_point",function(e){var n=t(e,1);return-1!=n?(e.setCaretPos(n),!0):!1})}),emmet.exec(function(e,t){function n(t,n,r,i){var o,a=e("range"),s=e("editorUtils").outputInfo(t).content,l=s.length,u=a.create(-1,0),c=a.create(t.getSelectionRange());o=c.start;for(var f=1e5;o>=0&&l>o&&--f>0;){if(a=r(s,o,n)){if(u.equal(a))break;if(u=a.clone(),o=i(a.substring(s),a.start,c.clone()))return t.createSelection(o.start,o.end),!0;o=n?a.start:a.end-1}o+=n?-1:1}return!1}function r(e){var t=!0;return n(e,!1,function(e,n){if(t){t=!1;var r;e:{r=n;for(var i;r>=0;){if(i=l(e,r)){r=i;break e}r--}r=null}return r}return l(e,n)},function(e,t,n){return s(e,t,n,!1)})}function i(e){return n(e,!0,l,function(e,t,n){return s(e,t,n,!0)})}function o(n,r,i){var o,s,i=i||0,l=e("range"),c=[],f=-1,d="",h="";return t.each(r,function(e){switch(e.type){case"tag":s=n.substring(e.start,e.end),/^<[\w\:\-]/.test(s)&&c.push(l.create({start:e.start+1,end:e.end}));break;case"attribute":f=e.start,d=n.substring(e.start,e.end);break;case"string":c.push(l.create(f,e.end-f)),o=l.create(e),h=o.substring(n),u(h.charAt(0))&&o.start++,u(h.charAt(h.length-1))&&o.end--,c.push(o),"class"==d&&(c=c.concat(a(o.substring(n),o.start)))}}),t.each(c,function(e){e.shift(i)}),t.chain(c).filter(function(e){return!!e.length()}).uniq(!1,function(e){return""+e}).value()}function a(t,n){var n=n||0,r=[],i=e("stringStream").create(t),o=e("range");i.eatSpace(),i.start=i.pos;for(var a;a=i.next();)/[\s\u00a0]/.test(a)&&(r.push(o.create(i.start+n,i.pos-i.start-1)),i.eatSpace(),i.start=i.pos);return r.push(o.create(i.start+n,i.pos-i.start)),r}function s(n,r,i,a){return n=o(n,e("xmlParser").parse(n),r),a&&n.reverse(),(r=t.find(n,function(e){return e.equal(i)}))?(a=t.indexOf(n,r),n.length-1>a?n[a+1]:null):a?t.find(n,function(e){return e.start<i.start}):!r&&(a=t.filter(n,function(e){return e.inside(i.end)}),a.length>1)?a[1]:t.find(n,function(e){return e.end>i.end})}function l(t,n){var r;return"<"==t.charAt(n)&&(r=t.substring(n,t.length).match(p))?e("range").create(n,r[0]):void 0}function u(e){return'"'==e||"'"==e}function c(n){var r=n.valueRange(!0),i=[n.range(!0),r],o=e("stringStream"),a=e("cssEditTree"),s=e("range"),l=n.value();return t.each(n.valueParts(),function(e){var n=e.clone();i.push(n.shift(r.start));var u=o.create(e.substring(l));if(u.match(/^[\w\-]+\(/,!0)){u.start=u.pos,u.skipToPair("(",")");var c=u.current();i.push(s.create(n.start+u.start,c)),t.each(a.findParts(c),function(e){i.push(s.create(n.start+u.start+e.start,e.substring(c)))})}}),t.chain(i).filter(function(e){return!!e.length()}).uniq(!1,function(e){return""+e}).value()}function f(e,n,r){var i,o,a=null,s=null,l=e.list();for(r?(l.reverse(),i=function(e){return e.range(!0).start<=n.start},o=function(e){return e.start<n.start}):(i=function(e){return e.range(!0).end>=n.end},o=function(e){return e.end>n.start});a=t.find(l,i);){if(e=c(a),r&&e.reverse(),s=t.find(e,function(e){return e.equal(n)})){if(s=t.indexOf(e,s),s!=e.length-1){s=e[s+1];break}}else{if(s=t.filter(e,function(e){return e.inside(n.end)}),s.length>1){s=s[1];break}if(s=t.find(e,o))break}s=null,n.start=n.end=r?a.range(!0).start-1:a.range(!0).end+1}return s}function d(t,n,r){return t=e("cssEditTree").parse(t,{offset:n}),n=t.nameRange(!0),r.end<n.end?n:f(t,r,!1)}function h(t,n,r){return n=e("cssEditTree").parse(t,{offset:n}),t=f(n,r,!0),!t&&(n=n.nameRange(!0),r.start>n.start)?n:t}var p=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,m=e("actions");m.add("select_next_item",function(t){return"css"==t.getSyntax()?n(t,!1,e("cssEditTree").extractRule,d):r(t)}),m.add("select_previous_item",function(t){return"css"==t.getSyntax()?n(t,!0,e("cssEditTree").extractRule,h):i(t)})}),emmet.exec(function(e){function t(t,n){var n=(n||"out").toLowerCase()+"",o=e("editorUtils").outputInfo(t),a=e("range").create(t.getSelectionRange()),o=o.content;if(i&&!i.range.equal(a)&&(i=null),i&&a.length())if("in"==n){if("tag"==i.type&&!i.close)return!1;if(i.range.equal(i.outerRange))i.range=i.innerRange;else{var s=e("utils").narrowToNonSpace(o,i.innerRange);(i=r.find(o,s.start+1))&&i.range.equal(a)&&i.outerRange.equal(a)&&(i.range=i.innerRange)}}else!i.innerRange.equal(i.outerRange)&&i.range.equal(i.innerRange)&&a.equal(i.range)?i.range=i.outerRange:(i=r.find(o,a.start))&&i.range.equal(a)&&i.innerRange.equal(a)&&(i.range=i.outerRange);else i=r.find(o,a.start);return i&&!i.range.equal(a)?(t.createSelection(i.range.start,i.range.end),!0):(i=null,!1)}var n=e("actions"),r=e("htmlMatcher"),i=null;n.add("match_pair",t,{hidden:!0}),n.add("match_pair_inward",function(e){return t(e,"in")},{label:"HTML/Match Pair Tag (inward)"}),n.add("match_pair_outward",function(e){return t(e,"out")},{label:"HTML/Match Pair Tag (outward)"}),n.add("matching_pair",function(e){var t=e.getContent()+"",n=e.getCaretPos();return"<"==t.charAt(n)&&n++,(t=r.tag(t,n))&&t.close?(t.open.range.inside(n)?e.setCaretPos(t.close.range.start):e.setCaretPos(t.open.range.start),!0):!1},{label:"HTML/Go To Matching Tag Pair"})}),emmet.exec(function(e){e("actions").add("remove_tag",function(t){var n=e("utils"),r=e("editorUtils").outputInfo(t),i=e("htmlMatcher").tag(r.content,t.getCaretPos());if(i){if(i.close){var o=n.narrowToNonSpace(r.content,i.innerRange),a=n.findNewlineBounds(r.content,o.start),a=n.getLinePadding(a.substring(r.content)),r=o.substring(r.content),r=n.unindentString(r,a);t.replaceContent(n.getCaretPlaceholder()+n.escapeText(r),i.outerRange.start,i.outerRange.end)}else t.replaceContent(n.getCaretPlaceholder(),i.range.start,i.range.end);return!0}return!1},{label:"HTML/Remove Tag"})}),emmet.exec(function(e){e("actions").add("split_join_tag",function(t,n){var r=e("htmlMatcher"),i=e("editorUtils").outputInfo(t,null,n),o=e("profile").get(i.profile);if(r=r.tag(i.content,t.getCaretPos())){if(r.close){var i=e("utils"),o=o.selfClosing()||" /",o=r.open.range.substring(r.source).replace(/\s*>$/,o+">"),a=t.getCaretPos();a>o.length+r.outerRange.start&&(a=o.length+r.outerRange.start),o=i.escapeText(o),t.replaceContent(o,r.outerRange.start,r.outerRange.end)}else{var i=e("utils"),s=i.getNewline(),l=e("resources").getVariable("indentation"),a=t.getCaretPos(),o=o.tag_nl===!0?s+l+s:"",s=r.outerContent().replace(/\s*\/>$/,">"),a=r.outerRange.start+s.length;s+=o+"</"+r.open.name+">",s=i.escapeText(s),t.replaceContent(s,r.outerRange.start,r.outerRange.end)}t.setCaretPos(a),r=!0}else r=!1;return r},{label:"HTML/Split\\Join Tag Declaration"})}),emmet.define("reflectCSSValue",function(e,t){function n(t){var n=e("cssEditTree"),r=e("editorUtils").outputInfo(t),t=t.getCaretPos();if((n=n.parseFromPosition(r.content,t))&&(r=n.itemFromPosition(t,!0))){var o=n.source,a=n.options.offset,t=t-a-r.range().start;if(i.exec(!1,[r]),o!==n.source)return{data:n.source,start:a,end:a+o.length,caret:a+r.range().start+t}}}function r(t){var n,t=e("cssEditTree").baseName(t);return"opacity"==t||"filter"==t?/^(?:\-\w+\-)?(?:opacity|filter)$/:(n=t.match(/^border-radius-(top|bottom)(left|right)/))?RegExp("^(?:\\-\\w+\\-)?(?:"+t+"|border-"+n[1]+"-"+n[2]+"-radius)$"):(n=t.match(/^border-(top|bottom)-(left|right)-radius/))?RegExp("^(?:\\-\\w+\\-)?(?:"+t+"|border-radius-"+n[1]+n[2]+")$"):RegExp("^(?:\\-\\w+\\-)?"+t+"$")}var i=e("handlerList").create();return e("actions").add("reflect_css_value",function(t){return"css"!=t.getSyntax()?!1:e("actionUtils").compoundUpdate(t,n(t))},{label:"CSS/Reflect Value"}),i.add(function(n){var i=r(n.name());t.each(n.parent.list(),function(t){if(i.test(t.name())){var r,o=n.name(),a=n.value(),s=t.name();r=t.value();var l=e("cssEditTree"),u=e("utils"),o=l.baseName(o),s=l.baseName(s);r="opacity"==o&&"filter"==s?r.replace(/opacity=[^)]*/i,"opacity="+Math.floor(100*parseFloat(a))):"filter"==o&&"opacity"==s?(o=a.match(/opacity=([^)]*)/i))?u.prettifyNumber(parseInt(o[1])/100):r:a,t.value(r)}})},{order:-1}),{addHandler:function(e,t){i.add(e,t)},removeHandler:function(e){i.remove(e,options)}}}),emmet.exec(function(e){e("actions").add("evaluate_math_expression",function(t){var n=e("actionUtils"),r=e("utils"),i=t.getContent()+"",o=e("range").create(t.getSelectionRange());if(o.length()||(o=n.findExpressionBounds(t,function(e){return r.isNumeric(e)||-1!=".+-*/\\".indexOf(e)})),o&&o.length()){n=o.substring(i),n=n.replace(/([\d\.\-]+)\\([\d\.\-]+)/g,"Math.round($1/$2)");try{var a=r.prettifyNumber(Function("return "+n)());return t.replaceContent(a,o.start,o.end),t.setCaretPos(o.start+a.length),!0}catch(s){}}return!1},{label:"Numbers/Evaluate Math Expression"})}),emmet.exec(function(e,t){function n(n,i){var o=e("utils"),a=!1,s=!1,l=e("actionUtils").findExpressionBounds(n,function(e,t,n){return o.isNumeric(e)?!0:"."==e?o.isNumeric(n.charAt(t+1))?s?!1:s=!0:!1:"-"==e?a?!1:a=!0:!1});if(l&&l.length()){var u=l.substring(n.getContent()+""),c=parseFloat(u);if(!t.isNaN(c)){if(c=o.prettifyNumber(c+i),/^(\-?)0+[1-9]/.test(u)){var f="";RegExp.$1&&(f="-",c=c.substring(1)),c=c.split("."),c[0]=o.zeroPadString(c[0],r(u)),c=f+c.join(".")}return n.replaceContent(c,l.start,l.end),n.createSelection(l.start,l.start+c.length),!0}}return!1}function r(e){return e=e.replace(/^\-/,""),~e.indexOf(".")?e.split(".")[0].length:e.length}var i=e("actions");t.each([1,-1,10,-10,.1,-.1],function(e){var t=e>0?"increment":"decrement";i.add(t+"_number_by_"+(Math.abs(e)+"").replace(".","").substring(0,2),function(t){return n(t,e)},{label:"Numbers/"+t.charAt(0).toUpperCase()+t.substring(1)+" number by "+Math.abs(e)})})}),emmet.exec(function(e,t){var n=e("actions"),r=e("preferences");r.define("css.closeBraceIndentation","\n","Indentation before closing brace of CSS rule. Some users prefere indented closing brace of CSS rule for better readability. This preference’s value will be automatically inserted before closing brace when user adds newline in newly created CSS rule (e.g. when “Insert formatted linebreak” action will be performed in CSS file). If you’re such user, you may want to write put a value like <code>\\n\\t</code> in this preference."),n.add("insert_formatted_line_break_only",function(n){var i=e("utils"),o=e("resources"),a=e("editorUtils").outputInfo(n),s=n.getCaretPos(),l=i.getNewline();if(t.include(["html","xml","xsl"],a.syntax)){if(o=o.getVariable("indentation"),(a=e("htmlMatcher").tag(a.content,s))&&!a.innerRange.length())return n.replaceContent(l+o+i.getCaretPlaceholder()+l,s),!0}else if("css"==a.syntax&&(a=a.content,s&&"{"==a.charAt(s-1))){var u=r.get("css.closeBraceIndentation"),o=o.getVariable("indentation"),c="}"==a.charAt(s);if(!c)for(var f,d=s,h=a.length;h>d&&(f=a.charAt(d),"{"!=f);d++)if("}"==f){u="",c=!0;break}return c||(u+="}"),i=l+o+i.getCaretPlaceholder()+u,n.replaceContent(i,s),!0}return!1},{hidden:!0}),n.add("insert_formatted_line_break",function(t){if(!n.run("insert_formatted_line_break_only",t)){for(var r,i=e("utils"),o=e("editorUtils").getCurrentLinePadding(t),a=t.getContent()+"",s=t.getCaretPos(),l=a.length,i=i.getNewline(),u="",c=t.getCurrentLineRange().end+1;l>c&&(r=a.charAt(c)," "==r||"	"==r);c++)u+=r;u.length>o.length?t.replaceContent(i+u,s,s,!0):t.replaceContent(i,s)}return!0},{hidden:!0})}),emmet.exec(function(e){e("actions").add("merge_lines",function(t){var n=e("htmlMatcher"),r=e("utils"),i=e("editorUtils").outputInfo(t),o=e("range").create(t.getSelectionRange());if(!o.length()&&(n=n.find(i.content,t.getCaretPos()))&&(o=n.outerRange),o.length()){for(i=o.substring(i.content),i=r.splitByLines(i),n=1;i.length>n;n++)i[n]=i[n].replace(/^\s+/,"");return i=i.join("").replace(/\s{2,}/," "),n=i.length,i=r.escapeText(i),t.replaceContent(i,o.start,o.end),t.createSelection(o.start,o.start+n),!0}return!1})}),emmet.exec(function(e){function t(e,t,n){return n=n||0,t.charAt(n)==e.charAt(0)&&t.substr(n,e.length)==e}e("actions").add("encode_decode_data_url",function(n){var r=n.getSelection()+"",i=n.getCaretPos();if(!r)for(var o=n.getContent()+"";i-->=0;){if(t("src=",o,i)){(o=o.substr(i).match(/^(src=(["'])?)([^'"<>\s]+)\1?/))&&(r=o[3],i+=o[1].length);break}if(t("url(",o,i)){(o=o.substr(i).match(/^(url\((['"])?)([^'"\)\s]+)\1?/))&&(r=o[3],i+=o[1].length);break}}if(r)if(t("data:",r))if(o=n.prompt("Enter path to file (absolute or relative)")+""){var a=e("file"),s=a.createPath(n.getFilePath(),o);if(!s)throw"Can't save file";a.save(s,e("base64").decode(r.replace(/^data\:.+?;.+?,/,""))),n.replaceContent("$0"+o,i,i+r.length),n=!0}else n=!1;else{if(o=e("file"),a=e("actionUtils"),s=n.getFilePath(),null===s)throw"You should save your file before using this action";if(s=o.locateFile(s,r),null===s)throw"Can't find "+r+" file";var l=e("base64").encode(o.read(s)+"");if(!l)throw"Can't encode file content to base64";l="data:"+(a.mimeTypes[o.getExt(s)+""]||"application/octet-stream")+";base64,"+l,n.replaceContent("$0"+l,i,i+r.length),n=!0}else n=!1;return n},{label:"Encode\\Decode data:URL image"})}),emmet.exec(function(e,t){function n(t,n){var r;if(n){if(/^data:/.test(n))r=e("base64").decode(n.replace(/^data\:.+?;.+?,/,""));else{r=e("file");var i=r.locateFile(t.getFilePath(),n);if(null===i)throw"Can't find "+n+" file";r=r.read(i)+""}return e("actionUtils").getImageSize(r)}}e("actions").add("update_image_size",function(r){var i;if(t.include(["css","less","scss"],r.getSyntax()+""))e:{i=r.getCaretPos();var o=e("editorUtils").outputInfo(r);if(o=e("cssEditTree").parseFromPosition(o.content,i,!0)){var a,s=o.itemFromPosition(i,!0);if(s&&(a=/url\((["']?)(.+?)\1\)/i.exec(s.value()||""))&&(a=n(r,a[2]))){s=o.range(!0),o.value("width",a.width+"px"),o.value("height",a.height+"px",o.indexOf("width")+1),i=t.extend(s,{data:""+o,caret:i});break e}}i=null}else i=r.getCaretPos(),o=e("editorUtils").outputInfo(r),(o=e("xmlEditTree").parseFromPosition(o.content,i,!0))&&"img"==(o.name()||"").toLowerCase()&&(a=n(r,o.value("src")))?(s=o.range(!0),o.value("width",a.width),o.value("height",a.height,o.indexOf("width")+1),i=t.extend(s,{data:""+o,caret:i})):i=null;return e("actionUtils").compoundUpdate(r,i)})}),emmet.define("cssResolver",function(e,t){function n(e){var t=e&&e.charCodeAt(0);return e&&"."==e||t>47&&58>t}function r(t){return t=e("utils").trim(t),~t.indexOf("/*")||/[\n\r]/.test(t)?!1:/^[a-z0-9\-]+\s*\:/i.test(t)?(t=e("tabStops").processText(t,{replaceCarets:!0,tabstop:function(){return"value"}}),2==t.split(":").length):!1}function i(t){if(t.charAt(0),"#"==t.charAt(0)){var n=t.replace(/^#+/,"")||"0",r=e("utils").repeatString,t=null;switch(n.length){case 1:t=r(n,6);break;case 2:t=r(n,3);break;case 3:t=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2);break;case 4:t=n+n.substr(0,2);break;case 5:t=n+n.charAt(0);break;default:t=n.substr(0,6)}switch(b.get("css.color.short")&&(n=t.split(""),n[0]==n[1]&&n[2]==n[3]&&n[4]==n[5]&&(t=n[0]+n[2]+n[4])),b.get("css.color.case")){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}t="#"+t}else t=o(t);return t}function o(e){var t=b.getDict("css.keywordAliases");return e in t?t[e]:e}function a(e){return t.include(b.getArray("css.keywords"),o(e))}function s(t){var n=e("utils"),t=n.trim(t);return-1==t.indexOf(":")?{name:t,value:v}:(t=t.split(":"),{name:n.trim(t.shift()),value:n.trim(t.join(":")).replace(/^(\$\{0\}|\$0)(\s*;?)$/,"${1}$2")})}function l(e,n){var r=g[n];return r||(r=t.find(g,function(e){return e.prefix==n})),r&&r.supports(e)}function u(e,n){var r=[];return t.each(g,function(t,n){l(e,n)&&r.push(n)}),!r.length&&!n&&t.each(g,function(e,t){e.obsolete||r.push(t)}),r}function c(e,n){t.isString(n)&&(n={prefix:n}),g[e]=t.extend({},m,n)}function f(e,n){if(n){var r=b.get(n+"."+e);if(!t.isUndefined(r))return r}return b.get("css."+e)}function d(n,i,o){return t.isString(n)||(n=n.data),r(n)?(i&&(~n.indexOf(";")?n=n.split(";").join(" !important;"):n+=" !important"),i=n.indexOf(":"),n=n.substring(0,i).replace(/\s+$/,"")+f("valueSeparator",o)+e("utils").trim(n.substring(i+1)),n.replace(/\s*;\s*$/,f("propertyEnd",o))):n}function h(e){var n=b.getArray(e);return t.each(b.getArray(e+"Addon"),function(e){"-"==e.charAt(0)?n=t.without(n,e.substr(1)):("+"==e.charAt(0)&&(e=e.substr(1)),n.push(e))}),n}var p=null,m={prefix:"emmet",obsolete:!1,transformName:function(e){return"-"+this.prefix+"-"+e},properties:function(){return h("css."+this.prefix+"Properties")||[]},supports:function(e){return t.include(this.properties(),e)}},g={},v="${1};",b=e("preferences");b.define("css.valueSeparator",": ","Defines a symbol that should be placed between CSS property and value when expanding CSS abbreviations."),b.define("css.propertyEnd",";","Defines a symbol that should be placed at the end of CSS property  when expanding CSS abbreviations."),b.define("stylus.valueSeparator"," ","Defines a symbol that should be placed between CSS property and value when expanding CSS abbreviations in Stylus dialect."),b.define("stylus.propertyEnd","","Defines a symbol that should be placed at the end of CSS property  when expanding CSS abbreviations in Stylus dialect."),b.define("sass.propertyEnd","","Defines a symbol that should be placed at the end of CSS property  when expanding CSS abbreviations in SASS dialect."),b.define("css.autoInsertVendorPrefixes",!0,"Automatically generate vendor-prefixed copies of expanded CSS property. By default, Emmet will generate vendor-prefixed properties only when you put dash before abbreviation (e.g. <code>-bxsh</code>). With this option enabled, you don’t need dashes before abbreviations: Emmet will produce vendor-prefixed properties for you.");var y=t.template("A comma-separated list of CSS properties that may have <code><%= vendor %></code> vendor prefix. This list is used to generate a list of prefixed properties when expanding <code>-property</code> abbreviations. Empty list means that all possible CSS values may have <code><%= vendor %></code> prefix."),x=t.template("A comma-separated list of <em>additional</em> CSS properties for <code>css.<%= vendor %>Preperties</code> preference. You should use this list if you want to add or remove a few CSS properties to original set. To add a new property, simply write its name, to remove it, precede property with hyphen.<br>For example, to add <em>foo</em> property and remove <em>border-radius</em> one, the preference value will look like this: <code>foo, -border-radius</code>.");t.each({webkit:"animation, animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, appearance, backface-visibility, background-clip, background-composite, background-origin, background-size, border-fit, border-horizontal-spacing, border-image, border-vertical-spacing, box-align, box-direction, box-flex, box-flex-group, box-lines, box-ordinal-group, box-orient, box-pack, box-reflect, box-shadow, color-correction, column-break-after, column-break-before, column-break-inside, column-count, column-gap, column-rule-color, column-rule-style, column-rule-width, column-span, column-width, dashboard-region, font-smoothing, highlight, hyphenate-character, hyphenate-limit-after, hyphenate-limit-before, hyphens, line-box-contain, line-break, line-clamp, locale, margin-before-collapse, margin-after-collapse, marquee-direction, marquee-increment, marquee-repetition, marquee-style, mask-attachment, mask-box-image, mask-box-image-outset, mask-box-image-repeat, mask-box-image-slice, mask-box-image-source, mask-box-image-width, mask-clip, mask-composite, mask-image, mask-origin, mask-position, mask-repeat, mask-size, nbsp-mode, perspective, perspective-origin, rtl-ordering, text-combine, text-decorations-in-effect, text-emphasis-color, text-emphasis-position, text-emphasis-style, text-fill-color, text-orientation, text-security, text-stroke-color, text-stroke-width, transform, transition, transform-origin, transform-style, transition-delay, transition-duration, transition-property, transition-timing-function, user-drag, user-modify, user-select, writing-mode, svg-shadow, box-sizing, border-radius",moz:"animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, appearance, backface-visibility, background-inline-policy, binding, border-bottom-colors, border-image, border-left-colors, border-right-colors, border-top-colors, box-align, box-direction, box-flex, box-ordinal-group, box-orient, box-pack, box-shadow, box-sizing, column-count, column-gap, column-rule-color, column-rule-style, column-rule-width, column-width, float-edge, font-feature-settings, font-language-override, force-broken-image-icon, hyphens, image-region, orient, outline-radius-bottomleft, outline-radius-bottomright, outline-radius-topleft, outline-radius-topright, perspective, perspective-origin, stack-sizing, tab-size, text-blink, text-decoration-color, text-decoration-line, text-decoration-style, text-size-adjust, transform, transform-origin, transform-style, transition, transition-delay, transition-duration, transition-property, transition-timing-function, user-focus, user-input, user-modify, user-select, window-shadow, background-clip, border-radius",ms:"accelerator, backface-visibility, background-position-x, background-position-y, behavior, block-progression, box-align, box-direction, box-flex, box-line-progression, box-lines, box-ordinal-group, box-orient, box-pack, content-zoom-boundary, content-zoom-boundary-max, content-zoom-boundary-min, content-zoom-chaining, content-zoom-snap, content-zoom-snap-points, content-zoom-snap-type, content-zooming, filter, flow-from, flow-into, font-feature-settings, grid-column, grid-column-align, grid-column-span, grid-columns, grid-layer, grid-row, grid-row-align, grid-row-span, grid-rows, high-contrast-adjust, hyphenate-limit-chars, hyphenate-limit-lines, hyphenate-limit-zone, hyphens, ime-mode, interpolation-mode, layout-flow, layout-grid, layout-grid-char, layout-grid-line, layout-grid-mode, layout-grid-type, line-break, overflow-style, perspective, perspective-origin, perspective-origin-x, perspective-origin-y, scroll-boundary, scroll-boundary-bottom, scroll-boundary-left, scroll-boundary-right, scroll-boundary-top, scroll-chaining, scroll-rails, scroll-snap-points-x, scroll-snap-points-y, scroll-snap-type, scroll-snap-x, scroll-snap-y, scrollbar-arrow-color, scrollbar-base-color, scrollbar-darkshadow-color, scrollbar-face-color, scrollbar-highlight-color, scrollbar-shadow-color, scrollbar-track-color, text-align-last, text-autospace, text-justify, text-kashida-space, text-overflow, text-size-adjust, text-underline-position, touch-action, transform, transform-origin, transform-origin-x, transform-origin-y, transform-origin-z, transform-style, transition, transition-delay, transition-duration, transition-property, transition-timing-function, user-select, word-break, word-wrap, wrap-flow, wrap-margin, wrap-through, writing-mode",o:"dashboard-region, animation, animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, border-image, link, link-source, object-fit, object-position, tab-size, table-baseline, transform, transform-origin, transition, transition-delay, transition-duration, transition-property, transition-timing-function, accesskey, input-format, input-required, marquee-dir, marquee-loop, marquee-speed, marquee-style"},function(e,t){b.define("css."+t+"Properties",e,y({vendor:t})),b.define("css."+t+"PropertiesAddon","",x({vendor:t}))}),b.define("css.unitlessProperties","z-index, line-height, opacity, font-weight, zoom","The list of properties whose values ​​must not contain units."),b.define("css.intUnit","px","Default unit for integer values"),b.define("css.floatUnit","em","Default unit for float values"),b.define("css.keywords","auto, inherit","A comma-separated list of valid keywords that can be used in CSS abbreviations."),b.define("css.keywordAliases","a:auto, i:inherit, s:solid, da:dashed, do:dotted","A comma-separated list of keyword aliases, used in CSS abbreviation. Each alias should be defined as <code>alias:keyword_name</code>."),b.define("css.unitAliases","e:em, p:%, x:ex, r:rem","A comma-separated list of unit aliases, used in CSS abbreviation. Each alias should be defined as <code>alias:unit_value</code>."),b.define("css.color.short",!0,"Should color values like <code>#ffffff</code> be shortened to <code>#fff</code> after abbreviation with color was expanded."),b.define("css.color.case","keep","Letter case of color values generated by abbreviations with color (like <code>c#0</code>). Possible values are <code>upper</code>, <code>lower</code> and <code>keep</code>."),b.define("css.fuzzySearch",!0,"Enable fuzzy search among CSS snippet names. When enabled, every <em>unknown</em> snippet will be scored against available snippet names (not values or CSS properties!). The match with best score will be used to resolve snippet value. For example, with this preference enabled, the following abbreviations are equal: <code>ov:h</code> == <code>ov-h</code> == <code>o-h</code> == <code>oh</code>"),b.define("css.fuzzySearchMinScore",.3,"The minium score (from 0 to 1) that fuzzy-matched abbreviation should achive. Lower values may produce many false-positive matches, higher values may reduce possible matches."),c("w",{prefix:"webkit"}),c("m",{prefix:"moz"}),c("s",{prefix:"ms"}),c("o",{prefix:"o"});
var w=["css","less","sass","scss","stylus"];e("resources").addResolver(function(e,n){return t.include(w,n)&&e.isElement()?p.expandToSnippet(e.abbreviation,n):null});var C=e("expandAbbreviation");return C.addHandler(function(e,n,r){if(!t.include(w,n))return!1;var i=e.getSelectionRange().end,o=C.findAbbreviation(e);return o&&(n=emmet.expandAbbreviation(o,n,r))?(o=i-o.length,r=i,";"==e.getContent().charAt(i)&&";"==n.charAt(n.length-1)&&r++,e.replaceContent(n,o,r),!0):!1}),p={addPrefix:c,supportsPrefix:l,prefixed:function(e,t){return l(e,t)?"-"+t+"-"+e:e},listPrefixes:function(){return t.map(g,function(e){return e.prefix})},getPrefix:function(e){return g[e]},removePrefix:function(e){e in g&&delete g[e]},extractPrefixes:function(e){if("-"!=e.charAt(0))return{property:e,prefixes:null};for(var t,n=1,r=e.length,i=[];r>n;){if(t=e.charAt(n),"-"==t){n++;break}if(!(t in g)){i.length=0,n=1;break}i.push(t),n++}return n==r-1&&(n=1,i.length=1),{property:e.substring(n),prefixes:i.length?i:"all"}},findValuesInAbbreviation:function(t,r){for(var i,r=r||"css",o=0,s=t.length,l="";s>o;){if(i=t.charAt(o),n(i)||"#"==i||"-"==i&&n(t.charAt(o+1))){l=t.substring(o);break}o++}for(i=t.substring(0,t.length-l.length),o=e("resources"),s=[];~i.indexOf("-")&&!o.findSnippet(r,i);){i=i.split("-");var u=i.pop();if(!a(u))break;s.unshift(u),i=i.join("-")}return s.join("-")+l},parseValues:function(r){for(var o=e("stringStream").create(r),s=[],l=null;l=o.next();)"#"==l?o.match(/^[0-9a-f]+/,!0):"-"==l?((a(t.last(s))||o.start&&n(r.charAt(o.start-1)))&&(o.start=o.pos),o.match(/^\-?[0-9]*(\.[0-9]+)?[a-z%\.]*/,!0)):o.match(/^[0-9]*(\.[0-9]*)?[a-z%]*/,!0),s.push(o.current()),o.start=o.pos;return t.map(t.compact(s),i)},extractValues:function(e){var t=this.findValuesInAbbreviation(e);return t?{property:e.substring(0,e.length-t.length).replace(/-$/,""),values:this.parseValues(t)}:{property:e,values:null}},normalizeValue:function(e,n){var n=(n||"").toLowerCase(),r=b.getArray("css.unitlessProperties");return e.replace(/^(\-?[0-9\.]+)([a-z]*)$/,function(e,i,o){return o||"0"!=i&&!t.include(r,n)?(o?(e=b.getDict("css.unitAliases"),i+=o in e?e[o]:o):i=i.replace(/\.$/,"")+b.get(~i.indexOf(".")?"css.floatUnit":"css.intUnit"),i):i})},expand:function(n,i,o){var a,o=o||"css",l=e("resources"),c=b.get("css.autoInsertVendorPrefixes");(a=/^(.+)\!$/.test(n))&&(n=RegExp.$1);var f=l.findSnippet(o,n);if(f&&!c)return d(f,a,o);if(f=this.extractPrefixes(n),n=this.extractValues(f.property),n=t.extend(f,n),f=l.findSnippet(o,n.property),!f&&b.get("css.fuzzySearch")&&(f=l.fuzzyFindSnippet(o,n.property,parseFloat(b.get("css.fuzzySearchMinScore")))),f?t.isString(f)||(f=f.data):f=n.property+":"+v,!r(f))return f;var h=s(f),p=[];return!i&&n.values&&(i=t.map(n.values,function(e){return this.normalizeValue(e,h.name)},this).join(" ")+";"),h.value=i||h.value,i="all"==n.prefixes||!n.prefixes&&c?u(h.name,c&&"all"!=n.prefixes):n.prefixes,t.each(i,function(e){e in g&&p.push(d(g[e].transformName(h.name)+":"+h.value,a,o))}),p.push(d(h.name+":"+h.value,a,o)),p},expandToSnippet:function(e,n){var r=this.expand(e,null,n);return t.isArray(r)?r.join("\n"):t.isString(r)?r+"":r.data},getSyntaxPreference:f,transformSnippet:d}}),emmet.define("cssGradient",function(e,t){function n(t){return e("utils").trim(t).replace(/\s+/g," ")}function r(e){var e=n(e),t=null,e=e.replace(/^(\w+\(.+?\))\s*/,function(e,n){return t=n,""});t||(e=e.split(" "),t=e[0],e=e[1]||"");var r={color:t};return e&&e.replace(/^(\-?[\d\.]+)([a-z%]+)?$/,function(e,t,n){r.position=t,~t.indexOf(".")?n="":n||(n="%"),n&&(r.unit=n)}),r}function i(e){var n=0;t.each(e,function(r,i){if(!i)return r.position=r.position||0;if(i!=e.length-1||"position"in r||(r.position=1),"position"in r){var o=e[n].position||0,a=(r.position-o)/(i-n);t.each(e.slice(n,i),function(e,t){e.position=o+a*t}),n=i}})}function o(e){var n=parseFloat(e);if(!t.isNaN(n))switch(n%360){case 0:return"left";case 90:return"bottom";case 180:return"right";case 240:return"top"}return e}function a(e){if(e=o(e),g.test(e))throw"The direction is an angle that can’t be converted.";var t=function(t){return~e.indexOf(t)?"100%":"0"};return t("right")+" "+t("bottom")+", "+t("left")+" "+t("top")}function s(e){var n=b.getArray("css.gradient.prefixes"),n=t.map(n,function(t){return"-"+t+"-"+e});return n.push(e),n}function l(n,r){var i=[],o=e("cssResolver");return b.get("css.gradient.fallback")&&~r.toLowerCase().indexOf("background")&&i.push({name:"background-color",value:"${1:"+n.colorStops[0].color+"}"}),t.each(b.getArray("css.gradient.prefixes"),function(e){var t=o.prefixed(r,e);if("webkit"==e&&b.get("css.gradient.oldWebkit"))try{i.push({name:t,value:p.oldWebkitLinearGradient(n)})}catch(a){}i.push({name:t,value:p.toString(n,e)})}),i.sort(function(e,t){return t.name.length-e.name.length})}function u(n,r,i){var o=n.parent,a=e("utils");t.each(o.getAll(s(n.name())),function(e){e!=n&&/gradient/i.test(e.value())&&o.remove(e)});var u=n.value();i||(i=e("range").create(0,n.value())),n.value(function(e){return a.replaceSubstring(u,e,i)}(p.toString(r))+"${2}"),r=l(r,n.name()),t.each(r,function(e){o.add(e.name,e.value,o.indexOf(n))})}function c(e){var n=e.value(),r=null;return(e=t.find(e.valueParts(),function(e){return r=p.parse(e.substring(n))}))&&r?{gradient:r,valueRange:e}:null}function f(n,r){var i=b.get("css.gradient.defaultProperty");if(!i)return!1;var o=n.getContent()+"",a=e("range").create(n.getCurrentLineRange()),s=a.substring(o).replace(/^\s+/,function(e){return a.start+=e.length,""}).replace(/\s+$/,function(e){return a.end-=e.length,""}),o=e("cssResolver");if(s=p.parse(s)){var u=l(s,i);u.push({name:i,value:p.toString(s)+"${2}"});var c=o.getSyntaxPreference("valueSeparator",r),f=o.getSyntaxPreference("propertyEnd",r),u=t.map(u,function(e){return e.name+c+e.value+f});return n.replaceContent(u.join("\n"),a.start,a.end),!0}return!1}function d(n,r){var i=null,o=e("cssEditTree").parseFromPosition(n,r,!0);return o&&((i=o.itemFromPosition(r,!0))||(i=t.find(o.list(),function(e){return e.range(!0).end==r}))),{rule:o,property:i}}var h=["top","to bottom","0deg"],p=null,m=["css","less","sass","scss","stylus","styl"],g=/\d+deg/i,v=/top|bottom|left|right/i,b=e("preferences");return b.define("css.gradient.prefixes","webkit, moz, o","A comma-separated list of vendor-prefixes for which values should be generated."),b.define("css.gradient.oldWebkit",!0,"Generate gradient definition for old Webkit implementations"),b.define("css.gradient.omitDefaultDirection",!0,"Do not output default direction definition in generated gradients."),b.define("css.gradient.defaultProperty","background-image","When gradient expanded outside CSS value context, it will produce properties with this name."),b.define("css.gradient.fallback",!1,"With this option enabled, CSS gradient generator will produce <code>background-color</code> property with gradient first color as fallback for old browsers."),e("expandAbbreviation").addHandler(function(n,r,i){var o=e("editorUtils").outputInfo(n,r,i);if(!t.include(m,o.syntax))return!1;var i=n.getCaretPos(),a=o.content,o=d(a,i);if(o.property){var s=c(o.property);if(s){var r=o.rule.options.offset||0,l=r+(""+o.rule).length;if(/[\n\r]/.test(o.property.value())){var h=o.property.valueRange(!0).start+s.valueRange.end,a=e("utils").replaceSubstring(a,";",h),i=d(a,i);i.property&&(s=c(i.property),o=i)}return o.property.end(";"),u(o.property,s.gradient,s.valueRange),n.replaceContent(""+o.rule,r,l,!0),!0}}return f(n,r)}),e("reflectCSSValue").addHandler(function(n){var r=e("utils"),i=c(n);if(!i)return!1;var o=n.value(),a=function(e){return r.replaceSubstring(o,e,i.valueRange)};return t.each(n.parent.getAll(s(n.name())),function(e){if(e!==n){var t=e.value().match(/^\s*(\-([a-z]+)\-)?linear\-gradient/);t?e.value(a(p.toString(i.gradient,t[2]||""))):e.value().match(/\s*\-webkit\-gradient/)&&e.value(a(p.oldWebkitLinearGradient(i.gradient)))}}),!0}),p={parse:function(i){var o=null;return e("utils").trim(i).replace(/^([\w\-]+)\((.+?)\)$/,function(i,a,s){if(a=a.toLowerCase().replace(/^\-[a-z]+\-/,""),"linear-gradient"==a||"lg"==a){for(var l,i=h[0],s=e("stringStream").create(e("utils").trim(s)),a=[];l=s.next();)","==s.peek()?(a.push(s.current()),s.next(),s.eatSpace(),s.start=s.pos):"("==l&&s.skipTo(")");return a.push(s.current()),a=t.compact(t.map(a,n)),a.length?((g.test(a[0])||v.test(a[0]))&&(i=a.shift()),o={type:"linear",direction:i,colorStops:t.map(a,r)}):o=null,""}return i}),o},oldWebkitLinearGradient:function(e){if(t.isString(e)&&(e=this.parse(e)),!e)return null;var n=t.map(e.colorStops,t.clone);return t.each(n,function(e){if("position"in e){if(!~e.position.indexOf(".")&&"%"!=e.unit)throw"Can't convert color stop '"+(e.position+(e.unit||""))+"'";e.position=parseFloat(e.position)/("%"==e.unit?100:1)}}),i(n),n=t.map(n,function(e,t){return e.position||t?1==e.position&&t==n.length-1?"to("+e.color+")":"color-stop("+e.position.toFixed(2).replace(/\.?0+$/,"")+", "+e.color+")":"from("+e.color+")"}),"-webkit-gradient(linear, "+a(e.direction)+", "+n.join(", ")+")"},toString:function(e,n){if("linear"==e.type){var r=(n?"-"+n+"-":"")+"linear-gradient",i=t.map(e.colorStops,function(e){return e.color+("position"in e?" "+e.position+(e.unit||""):"")});return e.direction&&(!b.get("css.gradient.omitDefaultDirection")||!t.include(h,e.direction))&&i.unshift(e.direction),r+"("+i.join(", ")+")"}}}}),emmet.exec(function(e,t){var n=e("handlerList").create(),r=e("resources");t.extend(r,{addGenerator:function(e,r,i){t.isString(e)&&(e=RegExp(e)),n.add(function(t,n){var i;return(i=e.exec(t.name()))?r(i,t,n):null},i)}}),r.addResolver(function(){return n.exec(null,t.toArray(arguments))})}),emmet.define("tagName",function(e,t){var n={empty:"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,keygen,command".split(","),blockLevel:"address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,link,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul,h1,h2,h3,h4,h5,h6".split(","),inlineLevel:"a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var".split(",")},r={p:"span",ul:"li",ol:"li",table:"tr",tr:"td",tbody:"tr",thead:"tr",tfoot:"tr",colgroup:"col",select:"option",optgroup:"option",audio:"source",video:"source",object:"param",map:"area"};return{resolve:function(e){return e=(e||"").toLowerCase(),e in r?this.getMapping(e):this.isInlineLevel(e)?"span":"div"},getMapping:function(e){return r[e.toLowerCase()]},isInlineLevel:function(e){return this.isTypeOf(e,"inlineLevel")},isBlockLevel:function(e){return this.isTypeOf(e,"blockLevel")},isEmptyElement:function(e){return this.isTypeOf(e,"empty")},isTypeOf:function(e,r){return t.include(n[r],e)},addMapping:function(e,t){r[e]=t},removeMapping:function(e){e in r&&delete r[e]},addElementToCollection:function(e,r){n[r]||(n[r]=[]);var i=this.getCollection(r);t.include(i,e)||i.push(e)},removeElementFromCollection:function(e,r){r in n&&(n[r]=t.without(this.getCollection(r),e))},getCollection:function(e){return n[e]}}}),emmet.exec(function(e,t){function n(){return{element:s.get("bem.elementSeparator"),modifier:s.get("bem.modifierSeparator")}}function r(r){if(e("abbreviationUtils").isSnippet(r))return r;r.__bem={block:"",element:"",modifier:""};var a=i(r.attribute("class")).split(" "),s=/^[a-z]\-/i;return r.__bem.block=t.find(a,function(e){return s.test(e)}),r.__bem.block||(s=/^[a-z]/i,r.__bem.block=t.find(a,function(e){return s.test(e)})||""),(a=t.chain(a).map(function(e){var t;t=o(e,r,"element"),t=o(t,r,"modifier");var i="",a="",s="",e=n();if(~t.indexOf(e.element)?(i=t.split(e.element),s=i[1].split(e.modifier),i=i[0],a=s.shift(),s=s.join(e.modifier)):~t.indexOf(e.modifier)&&(s=t.split(e.modifier),i=s.shift(),s=s.join(e.modifier)),i||a||s){i||(i=r.__bem.block),t=i;var l=[];a&&(t+=e.element+a),l.push(t),s&&l.push(t+e.modifier+s),r.__bem.block=i,r.__bem.element=a,r.__bem.modifier=s,e=l}else e=t;return e}).flatten().uniq().value().join(" "))&&r.attribute("class",a),r}function i(t){var r=e("utils"),t=(" "+(t||"")+" ").replace(/\s+/g," "),i=s.get("bem.shortElementPrefix");return i&&(i=RegExp("\\s("+r.escapeForRegexp(i)+"+)","g"),t=t.replace(i,function(e,t){return" "+r.repeatString(n().element,t.length)})),r.trim(t)}function o(e,t,r){var i=n(),o=RegExp("^("+i[r]+")+","g");if(o.test(e)){for(var a=0,o=e.replace(o,function(e){return a=e.length/i[r].length,""}),s=t;s.parent&&a--;)s=s.parent;if(s&&s.__bem||(s=t),s&&s.__bem)return e=s.__bem.block,"modifier"==r&&s.__bem.element&&(e+=i.element+s.__bem.element),e+i[r]+o}return e}function a(n,i){n.name&&r(n,i);var o=e("abbreviationUtils");return t.each(n.children,function(e){a(e,i),!o.isSnippet(e)&&e.start&&(l=!0)}),n}var s=e("preferences");s.define("bem.elementSeparator","__","Class name’s element separator."),s.define("bem.modifierSeparator","_","Class name’s modifier separator."),s.define("bem.shortElementPrefix","-","Symbol for describing short “block-element” notation. Class names prefixed with this symbol will be treated as element name for parent‘s block name. Each symbol instance traverses one level up in parsed tree for block name lookup. Empty value will disable short notation.");var l=!1;e("filters").add("bem",function(t,n){return l=!1,t=a(t,n),l&&(t=e("filters").apply(t,"html",n)),t})}),emmet.exec(function(e,t){function n(n,r,o){var a=e("utils"),s=i.get("filter.commentTrigger");("*"==s||t.find(s.split(","),function(e){return!!n.attribute(a.trim(e))}))&&(s={node:n,name:n.name(),padding:n.parent?n.parent.padding:"",attr:function(e,t,r){return(e=n.attribute(e))?(t||"")+e+(r||""):""}},r=a.normalizeNewline(r?r(s):""),o=a.normalizeNewline(o?o(s):""),n.start=n.start.replace(/</,r+"<"),n.end=n.end.replace(/>/,">"+o))}function r(i,o,a){var s=e("abbreviationUtils");return t.each(i.children,function(e){s.isBlock(e)&&n(e,o,a),r(e,o,a)}),i}var i=e("preferences");i.define("filter.commentAfter",'\n<!-- /<%= attr("id", "#") %><%= attr("class", ".") %> -->',"A definition of comment that should be placed <i>after</i> matched element when <code>comment</code> filter is applied. This definition is an ERB-style template passed to <code>_.template()</code> function (see Underscore.js docs for details). In template context, the following properties and functions are availabe:\n<ul><li><code>attr(name, before, after)</code> – a function that outputsspecified attribute value concatenated with <code>before</code> and <code>after</code> strings. If attribute doesn't exists, the empty string will be returned.</li><li><code>node</code> – current node (instance of <code>AbbreviationNode</code>)</li><li><code>name</code> – name of current tag</li><li><code>padding</code> – current string padding, can be used for formatting</li></ul>"),i.define("filter.commentBefore","","A definition of comment that should be placed <i>before</i> matched element when <code>comment</code> filter is applied. For more info, read description of <code>filter.commentAfter</code> property"),i.define("filter.commentTrigger","id, class","A comma-separated list of attribute names that should exist in abbreviatoin where comment should be added. If you wish to add comment for every element, set this option to <code>*</code>"),e("filters").add("c",function(e){var n=t.template(i.get("filter.commentBefore")),o=t.template(i.get("filter.commentAfter"));return r(e,n,o)})}),emmet.exec(function(e,t){function n(e){return e.replace(/([<>&])/g,function(e,t){return r[t]})}var r={"<":"&lt;",">":"&gt;","&":"&amp;"};e("filters").add("e",function i(e){return t.each(e.children,function(e){e.start=n(e.start),e.end=n(e.end),e.content=n(e.content),i(e)}),e})}),emmet.exec(function(e,t){function n(){return e("resources").getVariable("indentation")}function r(e){return e.parent&&!e.parent.parent&&!e.index()}function i(t,n){var r=e("abbreviationUtils");return n.tag_nl===!0||r.isBlock(t)?!0:t.parent&&n.inline_break?o(t.parent,n):!1}function o(n,r){var i=0,o=e("abbreviationUtils");return!!t.find(n.children,function(e){return e.isTextNode()||!o.isInline(e)?i=0:o.isInline(e)&&i++,i>=r.inline_break?!0:void 0})}function a(n,r){var i=e("abbreviationUtils");return t.any(n.children,function(e){return i.isSnippet(e)?!1:!i.isInline(e)})?!0:o(n,r)}e("filters").add("_format",function s(o,l,u){var u=u||0,c=e("abbreviationUtils");return t.each(o.children,function(t){if(c.isSnippet(t))t.start=t.end="",r(t)||l.tag_nl===!1||!i(t,l)||t.parent.parent&&e("abbreviationUtils").isInline(t.parent)||(t.start=e("utils").getNewline()+t.start);else{t.start=t.end="%s";var o=e("utils"),f=e("abbreviationUtils"),d=f.isUnary(t),o=o.getNewline();if(l.tag_nl!==!1){var h=l.tag_nl===!0&&(l.tag_nl_leaf||t.children.length);t.isTextNode()||(i(t,l)?(r(t)||f.isSnippet(t.parent)&&!t.index()||(t.start=o+t.start),(f.hasBlockChildren(t)||t.children.length&&i(t.children[0],l)||h&&!d)&&(t.end=o+t.end),(f.hasTagsInContent(t)||h&&!t.children.length&&!d)&&(t.start+=o+n())):f.isInline(t)&&t.parent&&e("abbreviationUtils").hasBlockChildren(t.parent)&&!r(t)?t.start=o+t.start:f.isInline(t)&&a(t,l)&&(t.end=o+t.end),t.padding=n())}}s(t,l,u+1)}),o})}),emmet.exec(function(e,t){function n(n,r){var i="",o=[],a=r.attributeQuote(),s=r.cursor();return t.each(n.attributeList(),function(t){var n=r.attributeName(t.name);switch(n.toLowerCase()){case"id":i+="#"+(t.value||s);break;case"class":i+="."+e("utils").trim(t.value||s).replace(/\s+/g,".");break;default:o.push(":"+n+" => "+a+(t.value||s)+a)}}),o.length&&(i+="{"+o.join(", ")+"}"),i}e("filters").add("haml",function r(i,o,a){var a=a||0,s=e("abbreviationUtils");return a||(i=e("filters").apply(i,"_format",o)),t.each(i.children,function(t){if(!s.isSnippet(t)&&t.parent){var i=e("abbreviationUtils"),l=e("utils"),u=n(t,o),c=o.cursor(),i=i.isUnary(t),f=o.self_closing_tag&&i?"/":"",d="",d="%"+o.tagName(t.name());"%div"==d.toLowerCase()&&u&&-1==u.indexOf("{")&&(d=""),t.end="",t.start=l.replaceSubstring(t.start,d+u+f+" ",t.start.indexOf("%s"),"%s"),!t.children.length&&!i&&(t.start+=c)}r(t,o,a+1)}),i})}),emmet.exec(function(e,t){function n(e,n){var r=n.attributeQuote(),i=n.cursor();return t.map(e.attributeList(),function(e){return" "+n.attributeName(e.name)+"="+r+(e.value||i)+r}).join("")}e("filters").add("html",function r(i,o,a){var a=a||0,s=e("abbreviationUtils");return a||(i=e("filters").apply(i,"_format",o)),t.each(i.children,function(t){if(!s.isSnippet(t)&&t.parent){var i=e("abbreviationUtils"),l=e("utils"),u=n(t,o),c=o.cursor(),i=i.isUnary(t),f="",d="";if(!t.isTextNode()){var h=o.tagName(t.name());i?(f="<"+h+u+o.selfClosing()+">",t.end=""):(f="<"+h+u+">",d="</"+h+">")}t.start=l.replaceSubstring(t.start,f,t.start.indexOf("%s"),"%s"),t.end=l.replaceSubstring(t.end,d,t.end.indexOf("%s"),"%s"),!t.children.length&&!i&&-1==t.content.indexOf(c)&&(t.start+=c)}r(t,o,a+1)}),i})}),emmet.exec(function(e,t){var n=/^\s+/,r=/[\n\r]/g;e("filters").add("s",function i(o){var a=e("abbreviationUtils");return t.each(o.children,function(e){a.isSnippet(e)||(e.start=e.start.replace(n,""),e.end=e.end.replace(n,"")),e.start=e.start.replace(r,""),e.end=e.end.replace(r,""),e.content=e.content.replace(r,""),i(e)}),o})}),emmet.exec(function(e,t){function n(e,r){return t.each(e.children,function(e){e.content&&(e.content=e.content.replace(r,"")),n(e,r)}),e}e("preferences").define("filter.trimRegexp","[\\s|\\u00a0]*[\\d|#|\\-|*|\\u2022]+\\.?\\s*","Regular expression used to remove list markers (numbers, dashes, bullets, etc.) in <code>t</code> (trim) filter. The trim filter is useful for wrapping with abbreviation lists, pased from other documents (for example, Word documents)."),e("filters").add("t",function(t){var r=RegExp(e("preferences").get("filter.trimRegexp"));return n(t,r)})}),emmet.exec(function(e,t){var n={"xsl:variable":1,"xsl:with-param":1};e("filters").add("xsl",function r(i){var o=e("abbreviationUtils");return t.each(i.children,function(e){!o.isSnippet(e)&&(e.name()||"").toLowerCase()in n&&e.children.length&&(e.start=e.start.replace(/\s+select\s*=\s*(['"]).*?\1/,"")),r(e)}),i})}),emmet.exec(function(e,t){function n(e,t){return Math.round(Math.random()*(t-e)+e)}function r(e,r){for(var i=e.length,o=Math.min(i,r),a=[];o>a.length;){var s=n(0,i-1);t.include(a,s)||a.push(s)}return t.map(a,function(t){return e[t]})}function i(e,r){return e.length&&(e[0]=e[0].charAt(0).toUpperCase()+e[0].substring(1)),e.join(" ")+(r||(t.isString("?!...")?"?!...".charAt(n(0,4)):"?!..."[n(0,4)]))}function o(e){var i=e.length,o=0,o=i>3&&6>=i?n(0,1):i>6&&12>=i?n(0,2):n(1,4);t.each(r(t.range(o)),function(t){e[t]+=","})}e("abbreviationParser").addPreprocessor(function(e){var t,l=/^(?:lorem|lipsum)(\d*)$/i;e.findAll(function(e){if(e._name&&(t=e._name.match(l))){var u=t[1]||30;e._name="",e.data("forceNameResolving",e.isRepeating()||e.attributeList().length),e.data("pasteOverwrites",!0),e.data("paste",function(e){var t=u,l=!e,e=[],c=0,t=parseInt(t,10);for(l&&(l=a.slice(0,t),l.length>5&&(l[4]+=","),c+=l.length,e.push(i(l,".")));t>c;)l=r(s,Math.min(n(3,12)*n(1,5),t-c)),c+=l.length,o(l),e.push(i(l));return e.join(" ")})}})});var a="lorem ipsum dolor sit amet consectetur adipisicing elit".split(" "),s=["exercitationem","perferendis","perspiciatis","laborum","eveniet","sunt","iure","nam","nobis","eum","cum","officiis","excepturi","odio","consectetur","quasi","aut","quisquam","vel","eligendi","itaque","non","odit","tempore","quaerat","dignissimos","facilis","neque","nihil","expedita","vitae","vero","ipsum","nisi","animi","cumque","pariatur","velit","modi","natus","iusto","eaque","sequi","illo","sed","ex","et","voluptatibus","tempora","veritatis","ratione","assumenda","incidunt","nostrum","placeat","aliquid","fuga","provident","praesentium","rem","necessitatibus","suscipit","adipisci","quidem","possimus","voluptas","debitis","sint","accusantium","unde","sapiente","voluptate","qui","aspernatur","laudantium","soluta","amet","quo","aliquam","saepe","culpa","libero","ipsa","dicta","reiciendis","nesciunt","doloribus","autem","impedit","minima","maiores","repudiandae","ipsam","obcaecati","ullam","enim","totam","delectus","ducimus","quis","voluptates","dolores","molestiae","harum","dolorem","quia","voluptatem","molestias","magni","distinctio","omnis","illum","dolorum","voluptatum","ea","quas","quam","corporis","quae","blanditiis","atque","deserunt","laboriosam","earum","consequuntur","hic","cupiditate","quibusdam","accusamus","ut","rerum","error","minus","eius","ab","ad","nemo","fugit","officia","at","in","id","quos","reprehenderit","numquam","iste","fugiat","sit","inventore","beatae","repellendus","magnam","recusandae","quod","explicabo","doloremque","aperiam","consequatur","asperiores","commodi","optio","dolor","labore","temporibus","repellat","veniam","architecto","est","esse","mollitia","nulla","a","similique","eos","alias","dolore","tenetur","deleniti","porro","facere","maxime","corrupti"]}),emmet.exec(function(e){e("actions").add("select_line",function(e){var t=e.getCurrentLineRange();return e.createSelection(t.start,t.end),!0})}),emmet.exec(function(e){e("resources").setVocabulary({variables:{lang:"en",locale:"en-US",charset:"UTF-8",indentation:"	",newline:"\n"},css:{filters:"html",snippets:{"@i":"@import url(|);","@m":"@media print {\n	|\n}","@f":"@font-face {\n	font-family:|;\n	src:url(|);\n}","@f+":"@font-face {\n	font-family: '${1:FontName}';\n	src: url('${2:FileName}.eot');\n	src: url('${2:FileName}.eot?#iefix') format('embedded-opentype'),\n		 url('${2:FileName}.woff') format('woff'),\n		 url('${2:FileName}.ttf') format('truetype'),\n		 url('${2:FileName}.svg#${1:FontName}') format('svg');\n	font-style: ${3:normal};\n	font-weight: ${4:normal};\n}","!":"!important",pos:"position:|;","pos:s":"position:static;","pos:a":"position:absolute;","pos:r":"position:relative;","pos:f":"position:fixed;",t:"top:|;","t:a":"top:auto;",r:"right:|;","r:a":"right:auto;",b:"bottom:|;","b:a":"bottom:auto;",l:"left:|;","l:a":"left:auto;",z:"z-index:|;","z:a":"z-index:auto;",fl:"float:|;","fl:n":"float:none;","fl:l":"float:left;","fl:r":"float:right;",cl:"clear:|;","cl:n":"clear:none;","cl:l":"clear:left;","cl:r":"clear:right;","cl:b":"clear:both;",d:"display:|;","d:n":"display:none;","d:b":"display:block;","d:i":"display:inline;","d:ib":"display:inline-block;","d:li":"display:list-item;","d:ri":"display:run-in;","d:cp":"display:compact;","d:tb":"display:table;","d:itb":"display:inline-table;","d:tbcp":"display:table-caption;","d:tbcl":"display:table-column;","d:tbclg":"display:table-column-group;","d:tbhg":"display:table-header-group;","d:tbfg":"display:table-footer-group;","d:tbr":"display:table-row;","d:tbrg":"display:table-row-group;","d:tbc":"display:table-cell;","d:rb":"display:ruby;","d:rbb":"display:ruby-base;","d:rbbg":"display:ruby-base-group;","d:rbt":"display:ruby-text;","d:rbtg":"display:ruby-text-group;",v:"visibility:|;","v:v":"visibility:visible;","v:h":"visibility:hidden;","v:c":"visibility:collapse;",ov:"overflow:|;","ov:v":"overflow:visible;","ov:h":"overflow:hidden;","ov:s":"overflow:scroll;","ov:a":"overflow:auto;",ovx:"overflow-x:|;","ovx:v":"overflow-x:visible;","ovx:h":"overflow-x:hidden;","ovx:s":"overflow-x:scroll;","ovx:a":"overflow-x:auto;",ovy:"overflow-y:|;","ovy:v":"overflow-y:visible;","ovy:h":"overflow-y:hidden;","ovy:s":"overflow-y:scroll;","ovy:a":"overflow-y:auto;",ovs:"overflow-style:|;","ovs:a":"overflow-style:auto;","ovs:s":"overflow-style:scrollbar;","ovs:p":"overflow-style:panner;","ovs:m":"overflow-style:move;","ovs:mq":"overflow-style:marquee;",zoo:"zoom:1;",cp:"clip:|;","cp:a":"clip:auto;","cp:r":"clip:rect(|);",bxz:"box-sizing:|;","bxz:cb":"box-sizing:content-box;","bxz:bb":"box-sizing:border-box;",bxsh:"box-shadow:${1:hoff} ${2:voff} ${3:radius} ${4:color};","bxsh:n":"box-shadow:none;",m:"margin:|;","m:a":"margin:auto;",mt:"margin-top:|;","mt:a":"margin-top:auto;",mr:"margin-right:|;","mr:a":"margin-right:auto;",mb:"margin-bottom:|;","mb:a":"margin-bottom:auto;",ml:"margin-left:|;","ml:a":"margin-left:auto;",p:"padding:|;",pt:"padding-top:|;",pr:"padding-right:|;",pb:"padding-bottom:|;",pl:"padding-left:|;",w:"width:|;","w:a":"width:auto;",h:"height:|;","h:a":"height:auto;",maw:"max-width:|;","maw:n":"max-width:none;",mah:"max-height:|;","mah:n":"max-height:none;",miw:"min-width:|;",mih:"min-height:|;",o:"outline:|;","o:n":"outline:none;",oo:"outline-offset:|;",ow:"outline-width:|;",os:"outline-style:|;",oc:"outline-color:#${1:000};","oc:i":"outline-color:invert;",bd:"border:|;","bd+":"border:${1:1px} ${2:solid} ${3:#000};","bd:n":"border:none;",bdbk:"border-break:|;","bdbk:c":"border-break:close;",bdcl:"border-collapse:|;","bdcl:c":"border-collapse:collapse;","bdcl:s":"border-collapse:separate;",bdc:"border-color:#${1:000};",bdi:"border-image:url(|);","bdi:n":"border-image:none;",bdti:"border-top-image:url(|);","bdti:n":"border-top-image:none;",bdri:"border-right-image:url(|);","bdri:n":"border-right-image:none;",bdbi:"border-bottom-image:url(|);","bdbi:n":"border-bottom-image:none;",bdli:"border-left-image:url(|);","bdli:n":"border-left-image:none;",bdci:"border-corner-image:url(|);","bdci:n":"border-corner-image:none;","bdci:c":"border-corner-image:continue;",bdtli:"border-top-left-image:url(|);","bdtli:n":"border-top-left-image:none;","bdtli:c":"border-top-left-image:continue;",bdtri:"border-top-right-image:url(|);","bdtri:n":"border-top-right-image:none;","bdtri:c":"border-top-right-image:continue;",bdbri:"border-bottom-right-image:url(|);","bdbri:n":"border-bottom-right-image:none;","bdbri:c":"border-bottom-right-image:continue;",bdbli:"border-bottom-left-image:url(|);","bdbli:n":"border-bottom-left-image:none;","bdbli:c":"border-bottom-left-image:continue;",bdf:"border-fit:|;","bdf:c":"border-fit:clip;","bdf:r":"border-fit:repeat;","bdf:sc":"border-fit:scale;","bdf:st":"border-fit:stretch;","bdf:ow":"border-fit:overwrite;","bdf:of":"border-fit:overflow;","bdf:sp":"border-fit:space;",bdl:"border-length:|;","bdl:a":"border-length:auto;",bdsp:"border-spacing:|;",bds:"border-style:|;","bds:n":"border-style:none;","bds:h":"border-style:hidden;","bds:dt":"border-style:dotted;","bds:ds":"border-style:dashed;","bds:s":"border-style:solid;","bds:db":"border-style:double;","bds:dtds":"border-style:dot-dash;","bds:dtdtds":"border-style:dot-dot-dash;","bds:w":"border-style:wave;","bds:g":"border-style:groove;","bds:r":"border-style:ridge;","bds:i":"border-style:inset;","bds:o":"border-style:outset;",bdw:"border-width:|;",bdt:"border-top:|;",bt:"border-top:|;","bdt+":"border-top:${1:1px} ${2:solid} ${3:#000};","bdt:n":"border-top:none;",bdtw:"border-top-width:|;",bdts:"border-top-style:|;","bdts:n":"border-top-style:none;",bdtc:"border-top-color:#${1:000};",bdr:"border-right:|;",br:"border-right:|;","bdr+":"border-right:${1:1px} ${2:solid} ${3:#000};","bdr:n":"border-right:none;",bdrw:"border-right-width:|;",bdrs:"border-right-style:|;","bdrs:n":"border-right-style:none;",bdrc:"border-right-color:#${1:000};",bdb:"border-bottom:|;",bb:"border-bottom:|;","bdb+":"border-bottom:${1:1px} ${2:solid} ${3:#000};","bdb:n":"border-bottom:none;",bdbw:"border-bottom-width:|;",bdbs:"border-bottom-style:|;","bdbs:n":"border-bottom-style:none;",bdbc:"border-bottom-color:#${1:000};",bdl:"border-left:|;",bl:"border-left:|;","bdl+":"border-left:${1:1px} ${2:solid} ${3:#000};","bdl:n":"border-left:none;",bdlw:"border-left-width:|;",bdls:"border-left-style:|;","bdls:n":"border-left-style:none;",bdlc:"border-left-color:#${1:000};",bdrs:"border-radius:|;",bdtrrs:"border-top-right-radius:|;",bdtlrs:"border-top-left-radius:|;",bdbrrs:"border-bottom-right-radius:|;",bdblrs:"border-bottom-left-radius:|;",bg:"background:|;","bg+":"background:${1:#fff} url(${2}) ${3:0} ${4:0} ${5:no-repeat};","bg:n":"background:none;","bg:ie":"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='${1:x}.png',sizingMethod='${2:crop}');",bgc:"background-color:#${1:fff};",bgi:"background-image:url(|);","bgi:n":"background-image:none;",bgr:"background-repeat:|;","bgr:n":"background-repeat:no-repeat;","bgr:x":"background-repeat:repeat-x;","bgr:y":"background-repeat:repeat-y;",bga:"background-attachment:|;","bga:f":"background-attachment:fixed;","bga:s":"background-attachment:scroll;",bgp:"background-position:${1:0} ${2:0};",bgpx:"background-position-x:|;",bgpy:"background-position-y:|;",bgbk:"background-break:|;","bgbk:bb":"background-break:bounding-box;","bgbk:eb":"background-break:each-box;","bgbk:c":"background-break:continuous;",bgcp:"background-clip:|;","bgcp:bb":"background-clip:border-box;","bgcp:pb":"background-clip:padding-box;","bgcp:cb":"background-clip:content-box;","bgcp:nc":"background-clip:no-clip;",bgo:"background-origin:|;","bgo:pb":"background-origin:padding-box;","bgo:bb":"background-origin:border-box;","bgo:cb":"background-origin:content-box;",bgz:"background-size:|;","bgz:a":"background-size:auto;","bgz:ct":"background-size:contain;","bgz:cv":"background-size:cover;",c:"color:#${1:000};",cm:"/* |${child} */",cn:"content:|;",tbl:"table-layout:|;","tbl:a":"table-layout:auto;","tbl:f":"table-layout:fixed;",cps:"caption-side:|;","cps:t":"caption-side:top;","cps:b":"caption-side:bottom;",ec:"empty-cells:|;","ec:s":"empty-cells:show;","ec:h":"empty-cells:hide;",lis:"list-style:|;","lis:n":"list-style:none;",lisp:"list-style-position:|;","lisp:i":"list-style-position:inside;","lisp:o":"list-style-position:outside;",list:"list-style-type:|;","list:n":"list-style-type:none;","list:d":"list-style-type:disc;","list:c":"list-style-type:circle;","list:s":"list-style-type:square;","list:dc":"list-style-type:decimal;","list:dclz":"list-style-type:decimal-leading-zero;","list:lr":"list-style-type:lower-roman;","list:ur":"list-style-type:upper-roman;",lisi:"list-style-image:|;","lisi:n":"list-style-image:none;",q:"quotes:|;","q:n":"quotes:none;","q:ru":"quotes:'\\00AB' '\\00BB' '\\201E' '\\201C';","q:en":"quotes:'\\201C' '\\201D' '\\2018' '\\2019';",ct:"content:|;","ct:n":"content:normal;","ct:oq":"content:open-quote;","ct:noq":"content:no-open-quote;","ct:cq":"content:close-quote;","ct:ncq":"content:no-close-quote;","ct:a":"content:attr(|);","ct:c":"content:counter(|);","ct:cs":"content:counters(|);",coi:"counter-increment:|;",cor:"counter-reset:|;",va:"vertical-align:|;","va:sup":"vertical-align:super;","va:t":"vertical-align:top;","va:tt":"vertical-align:text-top;","va:m":"vertical-align:middle;","va:bl":"vertical-align:baseline;","va:b":"vertical-align:bottom;","va:tb":"vertical-align:text-bottom;","va:sub":"vertical-align:sub;",ta:"text-align:|;","ta:l":"text-align:left;","ta:c":"text-align:center;","ta:r":"text-align:right;",tal:"text-align-last:|;","tal:a":"text-align-last:auto;","tal:l":"text-align-last:left;","tal:c":"text-align-last:center;","tal:r":"text-align-last:right;",td:"text-decoration:|;","td:n":"text-decoration:none;","td:u":"text-decoration:underline;","td:o":"text-decoration:overline;","td:l":"text-decoration:line-through;",te:"text-emphasis:|;","te:n":"text-emphasis:none;","te:ac":"text-emphasis:accent;","te:dt":"text-emphasis:dot;","te:c":"text-emphasis:circle;","te:ds":"text-emphasis:disc;","te:b":"text-emphasis:before;","te:a":"text-emphasis:after;",th:"text-height:|;","th:a":"text-height:auto;","th:f":"text-height:font-size;","th:t":"text-height:text-size;","th:m":"text-height:max-size;",ti:"text-indent:|;","ti:-":"text-indent:-9999px;",tj:"text-justify:|;","tj:a":"text-justify:auto;","tj:iw":"text-justify:inter-word;","tj:ii":"text-justify:inter-ideograph;","tj:ic":"text-justify:inter-cluster;","tj:d":"text-justify:distribute;","tj:k":"text-justify:kashida;","tj:t":"text-justify:tibetan;",to:"text-outline:|;","to+":"text-outline:${1:0} ${2:0} ${3:#000};","to:n":"text-outline:none;",tr:"text-replace:|;","tr:n":"text-replace:none;",tt:"text-transform:|;","tt:n":"text-transform:none;","tt:c":"text-transform:capitalize;","tt:u":"text-transform:uppercase;","tt:l":"text-transform:lowercase;",tw:"text-wrap:|;","tw:n":"text-wrap:normal;","tw:no":"text-wrap:none;","tw:u":"text-wrap:unrestricted;","tw:s":"text-wrap:suppress;",tsh:"text-shadow:${1:hoff} ${2:voff} ${3:blur} ${4:#000};","tsh+":"text-shadow:${1:0} ${2:0} ${3:0} ${4:#000};","tsh:n":"text-shadow:none;",trf:"transform:|;","trf:skx":"transform: skewX(${1:angle});","trf:sky":"transform: skewY(${1:angle});","trf:sc":"transform: scale(${1:x}, ${2:y});","trf:scx":"transform: scaleX(${1:x});","trf:scy":"transform: scaleY(${1:y});","trf:r":"transform: rotate(${1:angle});","trf:t":"transform: translate(${1:x}, ${2:y});","trf:tx":"transform: translateX(${1:x});","trf:ty":"transform: translateY(${1:y});",trs:"transition:${1:prop} ${2:time};",trsde:"transition-delay:${1:time};",trsdu:"transition-duration:${1:time};",trsp:"transition-property:${1:prop};",trstf:"transition-timing-function:${1:tfunc};",lh:"line-height:|;",whs:"white-space:|;","whs:n":"white-space:normal;","whs:p":"white-space:pre;","whs:nw":"white-space:nowrap;","whs:pw":"white-space:pre-wrap;","whs:pl":"white-space:pre-line;",whsc:"white-space-collapse:|;","whsc:n":"white-space-collapse:normal;","whsc:k":"white-space-collapse:keep-all;","whsc:l":"white-space-collapse:loose;","whsc:bs":"white-space-collapse:break-strict;","whsc:ba":"white-space-collapse:break-all;",wob:"word-break:|;","wob:n":"word-break:normal;","wob:k":"word-break:keep-all;","wob:l":"word-break:loose;","wob:bs":"word-break:break-strict;","wob:ba":"word-break:break-all;",wos:"word-spacing:|;",wow:"word-wrap:|;","wow:nm":"word-wrap:normal;","wow:n":"word-wrap:none;","wow:u":"word-wrap:unrestricted;","wow:s":"word-wrap:suppress;",lts:"letter-spacing:|;",f:"font:|;","f+":"font:${1:1em} ${2:Arial,sans-serif};",fw:"font-weight:|;","fw:n":"font-weight:normal;","fw:b":"font-weight:bold;","fw:br":"font-weight:bolder;","fw:lr":"font-weight:lighter;",fs:"font-style:|;","fs:n":"font-style:normal;","fs:i":"font-style:italic;","fs:o":"font-style:oblique;",fv:"font-variant:|;","fv:n":"font-variant:normal;","fv:sc":"font-variant:small-caps;",fz:"font-size:|;",fza:"font-size-adjust:|;","fza:n":"font-size-adjust:none;",ff:"font-family:|;","ff:s":"font-family:serif;","ff:ss":"font-family:sans-serif;","ff:c":"font-family:cursive;","ff:f":"font-family:fantasy;","ff:m":"font-family:monospace;",fef:"font-effect:|;","fef:n":"font-effect:none;","fef:eg":"font-effect:engrave;","fef:eb":"font-effect:emboss;","fef:o":"font-effect:outline;",fem:"font-emphasize:|;",femp:"font-emphasize-position:|;","femp:b":"font-emphasize-position:before;","femp:a":"font-emphasize-position:after;",fems:"font-emphasize-style:|;","fems:n":"font-emphasize-style:none;","fems:ac":"font-emphasize-style:accent;","fems:dt":"font-emphasize-style:dot;","fems:c":"font-emphasize-style:circle;","fems:ds":"font-emphasize-style:disc;",fsm:"font-smooth:|;","fsm:a":"font-smooth:auto;","fsm:n":"font-smooth:never;","fsm:aw":"font-smooth:always;",fst:"font-stretch:|;","fst:n":"font-stretch:normal;","fst:uc":"font-stretch:ultra-condensed;","fst:ec":"font-stretch:extra-condensed;","fst:c":"font-stretch:condensed;","fst:sc":"font-stretch:semi-condensed;","fst:se":"font-stretch:semi-expanded;","fst:e":"font-stretch:expanded;","fst:ee":"font-stretch:extra-expanded;","fst:ue":"font-stretch:ultra-expanded;",op:"opacity:|;","op:ie":"filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);","op:ms":"-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)';",rz:"resize:|;","rz:n":"resize:none;","rz:b":"resize:both;","rz:h":"resize:horizontal;","rz:v":"resize:vertical;",cur:"cursor:|;","cur:a":"cursor:auto;","cur:d":"cursor:default;","cur:c":"cursor:crosshair;","cur:ha":"cursor:hand;","cur:he":"cursor:help;","cur:m":"cursor:move;","cur:p":"cursor:pointer;","cur:t":"cursor:text;",pgbb:"page-break-before:|;","pgbb:au":"page-break-before:auto;","pgbb:al":"page-break-before:always;","pgbb:l":"page-break-before:left;","pgbb:r":"page-break-before:right;",pgbi:"page-break-inside:|;","pgbi:au":"page-break-inside:auto;","pgbi:av":"page-break-inside:avoid;",pgba:"page-break-after:|;","pgba:au":"page-break-after:auto;","pgba:al":"page-break-after:always;","pgba:l":"page-break-after:left;","pgba:r":"page-break-after:right;",orp:"orphans:|;",wid:"widows:|;"}},html:{filters:"html",profile:"html",snippets:{c:"<!-- |${child} -->","cc:ie6":"<!--[if lte IE 6]>\n	${child}|\n<![endif]-->","cc:ie":"<!--[if IE]>\n	${child}|\n<![endif]-->","cc:noie":"<!--[if !IE]><!-->\n	${child}|\n<!--<![endif]-->","html:4t":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">\n<html lang="${lang}">\n<head>\n	<meta http-equiv="Content-Type" content="text/html;charset=${charset}">\n	<title>${1:Document}</title>\n</head>\n<body>\n	${child}${2}\n</body>\n</html>',"html:4s":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">\n<html lang="${lang}">\n<head>\n	<meta http-equiv="Content-Type" content="text/html;charset=${charset}">\n	<title>${1:Document}</title>\n</head>\n<body>\n	${child}${2}\n</body>\n</html>',"html:xt":'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="${lang}">\n<head>\n	<meta http-equiv="Content-Type" content="text/html;charset=${charset}" />\n	<title></title>\n</head>\n<body>\n	${child}${2}\n</body>\n</html>',"html:xs":'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="${lang}">\n<head>\n	<meta http-equiv="Content-Type" content="text/html;charset=${charset}" />\n	<title>${1:Document}</title>\n</head>\n<body>\n	${child}${2}\n</body>\n</html>',"html:xxs":'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="${lang}">\n<head>\n	<meta http-equiv="Content-Type" content="text/html;charset=${charset}" />\n	<title>${1:Document}</title>\n</head>\n<body>\n	${child}${2}\n</body>\n</html>',"html:5":'<!doctype html>\n<html lang="${lang}">\n<head>\n	<meta charset="${charset}">\n	<title>${1:Document}</title>\n</head>\n<body>\n	${child}${2}\n</body>\n</html>'},abbreviations:{"!":"html:5",a:'<a href="">',"a:link":'<a href="http://|">',"a:mail":'<a href="mailto:|">',abbr:'<abbr title="">',acronym:'<acronym title="">',base:'<base href="" />',bdo:'<bdo dir="">',"bdo:r":'<bdo dir="rtl">',"bdo:l":'<bdo dir="ltr">',link:'<link rel="stylesheet" href="" />',"link:css":'<link rel="stylesheet" href="${1:style}.css" media="all" />',"link:print":'<link rel="stylesheet" href="${1:print}.css" media="print" />',"link:favicon":'<link rel="shortcut icon" type="image/x-icon" href="${1:favicon.ico}" />',"link:touch":'<link rel="apple-touch-icon" href="${1:favicon.png}" />',"link:rss":'<link rel="alternate" type="application/rss+xml" title="RSS" href="${1:rss.xml}" />',"link:atom":'<link rel="alternate" type="application/atom+xml" title="Atom" href="${1:atom.xml}" />',"meta:utf":'<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />',"meta:win":'<meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />',"meta:compat":'<meta http-equiv="X-UA-Compatible" content="${1:IE=7}" />',style:"<style>",script:"<script>","script:src":'<script src="">',img:'<img src="" alt="" />',iframe:'<iframe src="" frameborder="0">',embed:'<embed src="" type="" />',object:'<object data="" type="">',param:'<param name="" value="" />',map:'<map name="">',area:'<area shape="" coords="" href="" alt="" />',"area:d":'<area shape="default" href="" alt="" />',"area:c":'<area shape="circle" coords="" href="" alt="" />',"area:r":'<area shape="rect" coords="" href="" alt="" />',"area:p":'<area shape="poly" coords="" href="" alt="" />',form:'<form action="">',"form:get":'<form action="" method="get">',"form:post":'<form action="" method="post">',label:'<label for="">',input:'<input type="" />',"input:hidden":'<input type="hidden" name="" />',"input:h":'<input type="hidden" name="" />',"input:text":'<input type="text" name="" id="" />',"input:t":'<input type="text" name="" id="" />',"input:search":'<input type="search" name="" id="" />',"input:email":'<input type="email" name="" id="" />',"input:url":'<input type="url" name="" id="" />',"input:password":'<input type="password" name="" id="" />',"input:p":'<input type="password" name="" id="" />',"input:datetime":'<input type="datetime" name="" id="" />',"input:date":'<input type="date" name="" id="" />',"input:datetime-local":'<input type="datetime-local" name="" id="" />',"input:month":'<input type="month" name="" id="" />',"input:week":'<input type="week" name="" id="" />',"input:time":'<input type="time" name="" id="" />',"input:number":'<input type="number" name="" id="" />',"input:color":'<input type="color" name="" id="" />',"input:checkbox":'<input type="checkbox" name="" id="" />',"input:c":'<input type="checkbox" name="" id="" />',"input:radio":'<input type="radio" name="" id="" />',"input:r":'<input type="radio" name="" id="" />',"input:range":'<input type="range" name="" id="" />',"input:file":'<input type="file" name="" id="" />',"input:f":'<input type="file" name="" id="" />',"input:submit":'<input type="submit" value="" />',"input:s":'<input type="submit" value="" />',"input:image":'<input type="image" src="" alt="" />',"input:i":'<input type="image" src="" alt="" />',"input:reset":'<input type="reset" value="" />',"input:button":'<input type="button" value="" />',"input:b":'<input type="button" value="" />',select:'<select name="" id=""></select>',option:'<option value=""></option>',textarea:'<textarea name="" id="" cols="${1:30}" rows="${2:10}">',"menu:context":'<menu type="context">',"menu:c":'<menu type="context">',"menu:toolbar":'<menu type="toolbar">',"menu:t":'<menu type="toolbar">',video:'<video src="">',audio:'<audio src="">',"html:xml":'<html xmlns="http://www.w3.org/1999/xhtml">',bq:"blockquote",acr:"acronym",fig:"figure",figc:"figcaption",ifr:"iframe",emb:"embed",obj:"object",src:"source",cap:"caption",colg:"colgroup",fst:"fieldset",btn:"button",optg:"optgroup",opt:"option",tarea:"textarea",leg:"legend",sect:"section",art:"article",hdr:"header",ftr:"footer",adr:"address",dlg:"dialog",str:"strong",prog:"progress",fset:"fieldset",datag:"datagrid",datal:"datalist",kg:"keygen",out:"output",det:"details",cmd:"command","ol+":"ol>li","ul+":"ul>li","dl+":"dl>dt+dd","map+":"map>area","table+":"table>tr>td","colgroup+":"colgroup>col","colg+":"colgroup>col","tr+":"tr>td","select+":"select>option","optgroup+":"optgroup>option","optg+":"optgroup>option"}},xml:{"extends":"html",profile:"xml",filters:"html"},xsl:{"extends":"html",profile:"xml",filters:"html, xsl",abbreviations:{tm:'<xsl:template match="" mode="">',tmatch:"tm",tn:'<xsl:template name="">',tname:"tn",call:'<xsl:call-template name=""/>',ap:'<xsl:apply-templates select="" mode=""/>',api:"<xsl:apply-imports/>",imp:'<xsl:import href=""/>',inc:'<xsl:include href=""/>',ch:"<xsl:choose>","xsl:when":'<xsl:when test="">',wh:"xsl:when",ot:"<xsl:otherwise>","if":'<xsl:if test="">',par:'<xsl:param name="">',pare:'<xsl:param name="" select=""/>',"var":'<xsl:variable name="">',vare:'<xsl:variable name="" select=""/>',wp:'<xsl:with-param name="" select=""/>',key:'<xsl:key name="" match="" use=""/>',elem:'<xsl:element name="">',attr:'<xsl:attribute name="">',attrs:'<xsl:attribute-set name="">',cp:'<xsl:copy select=""/>',co:'<xsl:copy-of select=""/>',val:'<xsl:value-of select=""/>',each:'<xsl:for-each select="">',"for":"each",tex:"<xsl:text></xsl:text>",com:"<xsl:comment>",msg:'<xsl:message terminate="no">',fall:"<xsl:fallback>",num:'<xsl:number value=""/>',nam:'<namespace-alias stylesheet-prefix="" result-prefix=""/>',pres:'<xsl:preserve-space elements=""/>',strip:'<xsl:strip-space elements=""/>',proc:'<xsl:processing-instruction name="">',sort:'<xsl:sort select="" order=""/>',"choose+":"xsl:choose>xsl:when+xsl:otherwise"}},haml:{filters:"haml","extends":"html",profile:"xml"},scss:{"extends":"css"},sass:{"extends":"css"},less:{"extends":"css"},stylus:{"extends":"css"}},"system")
}),emmet.define("cm-editor-proxy",function(e,t){function n(){var t=u.getSyntax();return e("resources").hasSyntax(t)}function r(){if(CodeMirror.version>="3.1")return CodeMirror.Pass;throw CodeMirror.Pass}function i(t,i){if(u.setupContext(i),"expand_abbreviation_with_tab"==t&&(u.getSelection()||!n()))return r();var o=!0;try{var a=e("actions").run(t,u);("next_edit_point"==t||"prev_edit_point"==t)&&i.replaceSelection(""),a||"insert_formatted_line_break_only"!=t||(o=!1)}catch(s){}return o?void 0:r()}var o=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),a=o||/Mac/.test(navigator.platform),s={"Cmd-E":"expand_abbreviation",Tab:"expand_abbreviation_with_tab","Cmd-D":"match_pair_outward","Shift-Cmd-D":"match_pair_inward","Cmd-T":"matching_pair","Shift-Cmd-A":"wrap_with_abbreviation","Ctrl-Alt-Right":"next_edit_point","Ctrl-Alt-Left":"prev_edit_point","Cmd-L":"select_line","Cmd-Shift-M":"merge_lines","Cmd-/":"toggle_comment","Cmd-J":"split_join_tag","Cmd-K":"remove_tag","Shift-Cmd-Y":"evaluate_math_expression","Ctrl-Up":"increment_number_by_1","Ctrl-Down":"decrement_number_by_1","Alt-Up":"increment_number_by_01","Alt-Down":"decrement_number_by_01","Ctrl-Alt-Up":"increment_number_by_10","Ctrl-Alt-Down":"decrement_number_by_10","Shift-Cmd-.":"select_next_item","Shift-Cmd-,":"select_previous_item","Cmd-B":"reflect_css_value",Enter:"insert_formatted_line_break_only"},l={"text/html":"html","application/xml":"xml","text/xsl":"xsl","text/css":"css","text/x-less":"less"};CodeMirror.defineOption?CodeMirror.defineOption("profile","html"):CodeMirror.defaults.profile="html";var u={context:null,getSelectionRange:function(){var e=this.getCaretPos();return{start:e,end:e+this.getSelection().length}},createSelection:function(e,t){e==t?this.context.setCursor(this.context.posFromIndex(e)):this.context.setSelection(this.context.posFromIndex(e),this.context.posFromIndex(t))},getCurrentLineRange:function(){var e=this.context.getCursor(!0);return{start:this.context.indexFromPos({line:e.line,ch:0}),end:this.context.indexFromPos({line:e.line,ch:this.context.getLine(e.line).length})}},getCaretPos:function(){return this.context.indexFromPos(this.context.getCursor(!0))},setCaretPos:function(e){this.createSelection(e,e)},getCurrentLine:function(){return this.context.getLine(this.context.getCursor(!0).line)||""},replaceContent:function(n,r,i,o){t.isUndefined(i)&&(i=t.isUndefined(r)?content.length:r),t.isUndefined(r)&&(r=0);var a=e("utils");o||(n=a.padString(n,a.getLinePaddingFromPosition(this.getContent(),r)));var s=e("tabStops").extract(n,{escape:function(e){return e}});n=s.text;var l=s.tabstops[0];l?(l.start+=r,l.end+=r):l={start:n.length+r,end:n.length+r};var u=this,c=this.context.operation||this.context.compoundChange;c.call(this.context,function(){u.context.replaceRange(n,u.context.posFromIndex(r),u.context.posFromIndex(i)),u.createSelection(l.start,l.end)})},getContent:function(){return this.context.getValue()},getSyntax:function(){var t=this.context.getOption("mode");return t in l&&(t=l[t]),e("actionUtils").detectSyntax(this,t)},getProfileName:function(){return this.context.getOption("profile")?this.context.getOption("profile"):e("actionUtils").detectProfile(this)},prompt:function(e){return prompt(e)},getSelection:function(){return this.context.getSelection()||""},getFilePath:function(){return location.href},setupContext:function(t){this.context=t;var n="	";t.getOption("indentWithTabs")||(n=e("utils").repeatString(" ",t.getOption("indentUnit"))),e("resources").setVariable("indentation",n)},addAction:function(e,t,n){var r="emmet."+e;CodeMirror.commands[r]||(CodeMirror.commands[r]=function(t){return i(e,t)}),t&&(n||(CodeMirror.keyMap&&CodeMirror.keyMap["default"]?n=CodeMirror.keyMap["default"]:(CodeMirror.defaults.extraKeys||(CodeMirror.defaults.extraKeys={}),n=CodeMirror.defaults.extraKeys)),a||(t=t.replace("Cmd","Ctrl")),n&&(n[t]=r))}};return"undefined"!=typeof emmetKeymap&&(s=emmetKeymap),t.each(s,function(e,t){u.addAction(e,t)}),u}),function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,r){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):";"==t&&r.lexical&&")"==r.lexical.type?!1:/^[;{}]$/.test(t)&&!/^;/.test(n)}}),CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(e,t,n){return"tag"==e&&/>$/.test(t)||/^</.test(n)}}),CodeMirror.defineExtension("commentRange",function(e,t,n){var r=this,i=CodeMirror.innerMode(r.getMode(),r.getTokenAt(t).state).mode;r.operation(function(){if(e)r.replaceRange(i.commentEnd,n),r.replaceRange(i.commentStart,t),t.line==n.line&&t.ch==n.ch&&r.setCursor(t.line,t.ch+i.commentStart.length);else{var o=r.getRange(t,n),a=o.indexOf(i.commentStart),s=o.lastIndexOf(i.commentEnd);a>-1&&s>-1&&s>a&&(o=o.substr(0,a)+o.substring(a+i.commentStart.length,s)+o.substr(s+i.commentEnd.length)),r.replaceRange(o,t,n)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var r=e.line;t.line>=r;r++)n.indentLine(r,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){function n(){l+="\n",c=!0,++u}for(var r=this,i=r.getMode(),o=r.getRange(e,t).split("\n"),a=CodeMirror.copyState(i,r.getTokenAt(e).state),s=r.getOption("tabSize"),l="",u=0,c=0==e.ch,f=0;o.length>f;++f){for(var d=new CodeMirror.StringStream(o[f],s);!d.eol();){var h=CodeMirror.innerMode(i,a),p=i.token(d,a),m=d.current();d.start=d.pos,(!c||/\S/.test(m))&&(l+=m,c=!1),!c&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(p,m,d.string.slice(d.pos)||o[f+1]||"",h.state)&&n()}!d.pos&&i.blankLine&&i.blankLine(a),c||n()}r.operation(function(){r.replaceRange(l,e,t);for(var n=e.line+1,i=e.line+u;i>=n;++n)r.indentLine(n,"smart");r.setSelection(e,r.getCursor(!1))})})}();